/*
 jQWidgets v4.5.0 (2017-Jan)
 Copyright (c) 2011-2017 jQWidgets.
 License: http://jqwidgets.com/license/
*/
var $jscomp={scope:{},findInternal:function(h,d,a){h instanceof String&&(h=String(h));for(var c=h.length,e=0;e<c;e++){var g=h[e];if(d.call(a,g,e,h))return{i:e,v:g}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(h,d,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");h!=Array.prototype&&h!=Object.prototype&&(h[d]=a.value)};
$jscomp.getGlobal=function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global&&null!=global?global:h};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(h,d,a,c){if(d){a=$jscomp.global;h=h.split(".");for(c=0;c<h.length-1;c++){var e=h[c];e in a||(a[e]={});a=a[e]}h=h[h.length-1];c=a[h];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(a,h,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(h){return h?h:function(d,a){return $jscomp.findInternal(this,d,a).v}},"es6-impl","es3");
(function(h){h.extend(h.jqx._jqxGrid.prototype,{_handledblclick:function(d,a){if(null!=d.target&&!a.disabled&&!h(d.target).ischildof(this.columnsheader)){var c;d.which?c=3==d.which:d.button&&(c=2==d.button);if(!c){var e;d.which?e=2==d.which:d.button&&(e=1==d.button);if(!e){e=this.showheader?this.columnsheader.height()+2:0;var g=this._groupsheader()?this.groupsheader.height():0,g=g+(this.showtoolbar?this.toolbarheight:0),k=this.host.offset();c=d.pageX-k.left;var f=this._hittestrow(c,d.pageY-e-k.top-
g);if(f&&(e=f.row,k=d.target.className,f=this.table[0].rows[f.index],null!=f)){a.mousecaptured=!0;a.mousecaptureposition={left:d.pageX,top:d.pageY-g};for(var g=this.hScrollInstance.value,m=0,b=0;b<f.cells.length;b++){var l=parseInt(h(this.columnsrow[0].cells[b]).css("left")),r=l-g;a.columns.records[b].pinned&&(r=l);l=this._getcolumnat(b);if((null==l||!l.hidden)&&r+h(this.columnsrow[0].cells[b]).width()>=c&&c>=r){m=b;break}}null!=e&&(l=this._getcolumnat(m),-1==k.indexOf("jqx-grid-group-expand")&&-1==
k.indexOf("jqx-grid-group-collapse")&&-1!=e.boundindex&&a.begincelledit(a.getboundindex(e),l.datafield,l.defaulteditorvalue))}}}}},_getpreveditablecolumn:function(d){for(;0<d;){d--;var a=this.getcolumnat(d);if(!a)break;if(a.editable&&!a.hidden)return a}return null},_getnexteditablecolumn:function(d){for(;d<this.columns.records.length;){d++;var a=this.getcolumnat(d);if(!a)break;if(a.editable&&!a.hidden)return a}return null},_handleeditkeydown:function(d,a){if(a.handlekeyboardnavigation&&1==a.handlekeyboardnavigation(d))return!0;
var c=d.charCode?d.charCode:d.keyCode?d.keyCode:0;a.editEvent=d;if(a.showfilterrow&&a.filterable&&this.filterrow&&h(d.target).ischildof(this.filterrow)||d.target.className&&0<=d.target.className.indexOf("jqx-grid-widget")||a.pageable&&h(d.target).ischildof(this.pager)||this.showtoolbar&&h(d.target).ischildof(this.toolbar)||this.showeverpresentrow&&(this.addnewrowtop&&h(d.target).ischildof(this.addnewrowtop)||this.addnewrowbottom&&h(d.target).ischildof(this.addnewrowbottom))||this.showstatusbar&&h(d.target).ischildof(this.statusbar)||
this.rowdetails&&h(d.target).ischildof(this.content.find("[role='rowgroup']")))return!0;if(this.editcell){if("selectedrow"===this.editmode){if(13===c)return this.endrowedit(this.editcell.row,!1),!1;if(27===c)return this.endrowedit(this.editcell.row,!0),!1;if(32==c&&this._currentColumn&&"checkbox"==this.getcolumn(this._currentColumn).columntype){var e=this.getcolumn(this._currentColumn);if(e.editable){var g=!this.getcellvalue(this.editcell.row,e.datafield),c=this.getrowdata(this.editcell.row),k=this.editcell.row,
c=a.getrowdata(a.editcell.row);this.setcellvalue(this.editcell.row,e.datafield,g,!1);var f=this._focusedColumn,c=this._currentColumn,g=this._currentEditableColumn;this.endrowedit(this.editcell.row,!1);this.beginrowedit(k,!1);this._currentColumn=c;this._focusedColumn=f;this._currentEditableColumn=g;this._renderrows();this.selectcell(k,e.datafield);this._oldselectedcell=this.selectedcell;if(f){var m=this;setTimeout(function(){m.selectcell(k,e.datafield);m._oldselectedcell=m.selectedcell;h(m._checkboxCells[e.datafield].checkbox).jqxCheckBox("focus")},
25)}return!1}}if(9===c){var b=this.editcell.datafield,g=this._getcolumnindex(b);this._currentEditableColumn?g=this._currentEditableColumn:this._currentEditableColumn=g;e=this._getnexteditablecolumn(g);d.shiftKey&&(e=this._getpreveditablecolumn(g));if(e)if(g=this._getcolumnindex(e.datafield),this.editcell[e.datafield]){this._currentEditableColumn=g;var l=this.editcell[e.datafield].editor;l&&(l.data().jqxWidget&&l.data().jqxWidget.focus?l.data().jqxWidget.focus():l.focus());this._currentColumn=this._focusedColumn=
e.datafield}else"checkbox"==e.columntype&&(this._currentColumn=e.datafield,this._currentEditableColumn=g,this.selectcell(this.editcell.row,e.datafield),this._oldselectedcell=this.selectedcell,this._checkboxCells[e.datafield]&&h(this._checkboxCells[e.datafield].checkbox).jqxCheckBox("focus"));return!1}return!0}if(null==this.editcell.columntype||"textbox"==this.editcell.columntype||"numberinput"==this.editcell.columntype||"combobox"==this.editcell.columntype||"datetimeinput"==this.editcell.columntype)33<=
c&&40>=c&&"multiplecellsadvanced"==a.selectionmode&&(l="textbox"==this.editcell.columntype||null==this.editcell.columntype?this.editcell.editor:this.editcell.editor.find("input"),f=a._selection(l),l=l.val().length,0<f.length&&"datetimeinput"!=this.editcell.columntype&&(a._cancelkeydown=!0),0<f.start&&37==c&&(a._cancelkeydown=!0),f.start<l&&39==c&&"datetimeinput"!=this.editcell.columntype&&(a._cancelkeydown=!0),"datetimeinput"==this.editcell.columntype&&39==c&&f.start+f.length<l&&(a._cancelkeydown=
!0));else if("dropdownlist"==this.editcell.columntype){if(37==c||39==c&&"multiplecellsadvanced"==a.selectionmode)a._cancelkeydown=!1}else"multiplecellsadvanced"==this.selectionmode&&"textbox"!=this.editcell.columntype&&"numberinput"!=this.editcell.columntype&&(a._cancelkeydown=!0);if(32==c&&"checkbox"==a.editcell.columntype&&(e=a.getcolumn(a.editcell.datafield),e.editable)){g=!a.getcellvalue(a.editcell.row,a.editcell.column);if(e.cellbeginedit&&(c=e.cellbeginedit(a.editcell.row,e.datafield,e.columntype,
!g),0==c))return!1;c=a.getrowdata(a.editcell.row);a.setcellvalue(a.editcell.row,a.editcell.column,g,!0);a._raiseEvent(18,{rowindex:a.editcell.row,row:c,datafield:a.editcell.column,oldvalue:!g,value:g,columntype:"checkbox"});return!1}if(9==c){var f=this.editcell.row,l=b=this.editcell.column,g=a._getcolumnindex(b),c=!1,r=a.getrowvisibleindex(f);this.editchar="";(c=this.editcell.validated)||(c=this.endcelledit(this.editcell.row,this.editcell.column,!1,!0,!1));if(0!=c)if(d.shiftKey?(e=a._getpreveditablecolumn(g))?
(b=e.datafield,c=!0,-1!=a.selectionmode.indexOf("cell")&&(a.selectprevcell(f,l),a._oldselectedcell=a.selectedcell,setTimeout(function(){a.ensurecellvisible(r,b)},10))):(g=a._getlastvisiblecolumn(),c=!0,b=g.displayfield,f--,-1!=a.selectionmode.indexOf("cell")&&(a.clearselection(),a.selectcell(f,b),a._oldselectedcell=a.selectedcell,setTimeout(function(){a.ensurecellvisible(r,b)},10))):(e=a._getnexteditablecolumn(g))?(b=e.datafield,c=!0,-1!=a.selectionmode.indexOf("cell")&&(a.selectnextcell(f,l),a._oldselectedcell=
a.selectedcell,setTimeout(function(){a.ensurecellvisible(r,b)},10))):(g=a._getfirstvisiblecolumn(),c=!0,b=g.displayfield,f++,-1!=a.selectionmode.indexOf("cell")&&(a.clearselection(),a.selectcell(f,b),a._oldselectedcell=a.selectedcell,setTimeout(function(){a.ensurecellvisible(r,b)},10))),c)a.begincelledit(f,b),null!=this.editcell&&"checkbox"==this.editcell.columntype&&this._renderrows(this.virtualsizeinfo);else return null!=this.editcell&&(a.endcelledit(f,b,!1),this._renderrows(this.virtualsizeinfo)),
!0;return!1}if(13==c)return(c=this.selectedcell)&&(g=this.getrowvisibleindex(c.rowindex)),this.endcelledit(this.editcell.row,this.editcell.column,!1,!0),"multiplecellsadvanced"==this.selectionmode&&(f=a.getselectedcell(),null!=f&&a.selectcell&&null==this.editcell&&f.rowindex+1<this.dataview.totalrecords)&&(this.sortcolumn!=f.datafield?(r=this.getrowvisibleindex(f.rowindex),(c=this.dataview.loadedrecords[r+1])&&(!this.pageable||this.pageable&&r+1<(this.dataview.pagenum+1)*this.pagesize)&&(this.clearselection(!1),
this.selectcell(this.getboundindex(c),f.datafield),f=this.getselectedcell(),this.ensurecellvisible(c.visibleindex,f.datafield))):null!=c&&(c=this.dataview.loadedrecords[g+1])&&(!this.pageable||this.pageable&&g+1<this.pagesize?(this.clearselection(!1),this.selectcell(this.getboundindex(c),f.datafield)):this.pageable&&g+1>=this.pagesize&&(this.clearselection(!1),c=this.dataview.loadedrecords[g],this.selectcell(this.getboundindex(c),f.datafield)))),!1;if(27==c)return this.endcelledit(this.editcell.row,
this.editcell.column,!0,!0),!1}else{f=!1;113==c&&(f=!0);if(!(d.ctrlKey||d.altKey||d.metaKey||(48<=c&&57>=c&&(this.editchar=String.fromCharCode(c),f=!0),189===c&&(f=!0),65<=c&&90>=c?(this.editchar=String.fromCharCode(c),f=!1,d.shiftKey?f=d.shiftKey:d.modifiers&&(f=!!(d.modifiers&4)),f||(this.editchar=this.editchar.toLowerCase()),f=!0):96<=c&&105>=c&&(this.editchar=c-96,this.editchar=this.editchar.toString(),f=!0),g=h(".jqx-grid").length,f=f&&(1==g||1<g&&a.focused),g=h.data(document.body,"jqxgrid.edit"),
void 0===g||""===g||13!==c&&!f||g==a.element.id)))return!0;if((13==c||f)&&a.getselectedrowindex){f=a.getselectedrowindex();if("selectedrow"===a.editmode)return a.beginrowedit(f),!1;switch(a.selectionmode){case "singlerow":case "multiplerows":case "multiplerowsextended":if(0<=f){b="";for(c=0;c<a.columns.records.length;c++)if(e=a.getcolumnat(c),e.editable){b=e.datafield;break}"selectedrow"===a.editmode?a.beginrowedit(f):a.begincelledit(f,b)}break;case "singlecell":case "multiplecells":case "multiplecellsextended":f=
a.getselectedcell();null!=f&&(e=a._getcolumnbydatafield(f.datafield),"checkbox"!=e.columntype&&a.begincelledit(f.rowindex,f.datafield));break;case "multiplecellsadvanced":if(f=a.getselectedcell(),null!=f)13==c?a.selectcell&&(r=this.getrowvisibleindex(f.rowindex),r+1<a.dataview.totalrecords&&(c=this.dataview.loadedrecords[r+1]))&&(this.clearselection(!1),this.selectcell(this.getboundindex(c),f.datafield),f=this.getselectedcell(),this.ensurecellvisible(c.visibleindex,f.datafield)):"selectedrow"!==a.editmode&&
a.begincelledit(f.rowindex,f.datafield)}return!1}if(46==c&&(g=a.getselectedcells(),-1==a.selectionmode.indexOf("cell")&&a._getcellsforcopypaste&&(g=a._getcellsforcopypaste()),null!=g&&0<g.length)){for(l=0;l<g.length;l++)if(f=g[l],f.datafield){var e=a.getcolumn(f.datafield),p=a.getcellvalue(f.rowindex,f.datafield);if(""!==p&&e.editable&&a.enablekeyboarddelete){var n=null;"checkbox"==e.columntype&&(e.threestatecheckbox||(n=!1));if(e.cellbeginedit&&(c=e.cellbeginedit(f.rowindex,e.datafield,e.columntype,
n),0==c))return!1;c=a.getrowdata(f.rowindex);a._raiseEvent(17,{rowindex:f.rowindex,row:c,datafield:f.datafield,value:p});l==g.length-1?a.setcellvalue(f.rowindex,f.datafield,n,!0):a.setcellvalue(f.rowindex,f.datafield,n,!1);e.displayfield!=e.datafield&&a.setcellvalue(f.rowindex,e.displayfield,n,!0);e.cellendedit&&e.cellendedit(f.rowindex,e.datafield,e.columntype,n);a._raiseEvent(18,{rowindex:f.rowindex,row:c,datafield:f.datafield,oldvalue:p,value:n})}}this.dataview.updateview();this._renderrows(this.virtualsizeinfo);
return!1}if(32==c&&(f=a.getselectedcell(),null!=f&&(e=a.getcolumn(f.datafield),"checkbox"==e.columntype&&e.editable))){g=!a.getcellvalue(f.rowindex,f.datafield);if(e.cellbeginedit&&(c=e.cellbeginedit(f.rowindex,e.datafield,e.columntype,!g),0==c))return!1;c=a.getrowdata(f.rowindex);a._raiseEvent(17,{rowindex:f.rowindex,row:c,datafield:f.datafield,value:!g,columntype:"checkbox"});a.setcellvalue(f.rowindex,f.datafield,g,!0);a._raiseEvent(18,{rowindex:f.rowindex,row:c,datafield:f.datafield,oldvalue:!g,
value:g,columntype:"checkbox"});return!1}}return!0},begincelledit:function(d,a,c,e,g){var k=this.getcolumn(a);this._cellscache=[];if(null!=a&&!("number"==k.columntype||"button"==k.columntype||k.createwidget||this.groupable&&(0<=this.groups.indexOf(a)||0<=this.groups.indexOf(k.displayfield))||void 0!=this.editrow)){if(this.editcell){if(this.editcell.row==d&&this.editcell.column==a)return!0;if("selectedrow"===this.editmode&&this.editcell.row==d||0==this.endcelledit(this.editcell.row,this.editcell.column,
!1,!0,!1))return}var f="checkbox"==k.columntype||"button"==k.columntype||k.createwidget;this.host.removeClass("jqx-disableselect");this.content.removeClass("jqx-disableselect");if(k.editable){if(k.cellbeginedit){var m=this.getcell(d,a);if(0==k.cellbeginedit(d,a,k.columntype,null!=m?m.value:null))return}m=this.getrowvisibleindex(d);if(this.editcell=this.getcell(d,a))if(this.editcell.visiblerowindex=m,!this.editcell.editing&&(f||(this.editcell.editing=!0),this.editcell.columntype=k.columntype,this.editcell.defaultvalue=
c,void 0!=k.defaultvalue&&(this.editcell.defaultvalue=k.defaultvalue),this.editcell.init=!0,"checkbox"!=k.columntype&&"selectedrow"!=this.editmode&&(a=this.getrowdata(d),this._raiseEvent(17,{rowindex:d,row:a,datafield:k.datafield,value:this.editcell.value,columntype:k.columntype})),h.data(document.body,"jqxgrid.edit",this.element.id),f||(d=this.getrowvisibleindex(d),!1!==e&&(this.autorowheight||this.ensurecellvisible(d,k.datafield)),!1!==g&&this._renderrows(this.virtualsizeinfo)),this.editcell))return this.editcell.init=
!1,!0}else this.editcell&&(this.editcell.editor=null,this.editcell.editing=!1,!1!==g&&this._renderrows(this.virtualsizeinfo),this.editcell=null)}},getScrollTop:function(){if(this._py||(this._py="undefined"!=typeof pageYOffset))return pageYOffset;var d=document.body,a=document.documentElement,a=a.clientHeight?a:d;return a.scrollTop},getScrollLeft:function(){if("undefined"!=typeof pageXOffset)return pageXOffset;var d=document.body,a=document.documentElement,a=a.clientHeight?a:d;return a.scrollLeft},
endcelledit:function(d,a,c,e,g){if(void 0==d||void 0==a)this.editcell&&(d=this.editcell.row,a=this.editcell.column),void 0==c&&(c=!0);if(this.editcell){var k=this.getcolumn(a),f=this;if("selectedrow"===f.editmode)this.endrowedit(d,c);else{var m=function(){if(0!=g&&!f.isTouchDevice()&&!f.isNestedGrid){var a=f.getScrollTop(),b=f.getScrollLeft();try{f.element.focus(),f.content.focus(),a!=f.getScrollTop()&&window.scrollTo(b,a),setTimeout(function(){f.element.focus();f.content.focus();a!=f.getScrollTop()&&
window.scrollTo(b,a)},10)}catch(q){}}};if("checkbox"==k.columntype||"button"==k.columntype||k.createwidget)return this.editcell&&(this.editcell.editor=null,this.editcell.editing=!1,this.editcell=null),!0;var b=this._geteditorvalue(k),l=function(c){c._hidecelleditor();k.cellendedit&&k.cellendedit(d,a,k.columntype,c.editcell.value,b);c.editchar=null;if(k.displayfield!=k.datafield){var f=c.getcellvalue(c.editcell.row,k.displayfield);oldvalue={value:c.editcell.value,label:f}}else oldvalue=c.editcell.value;
f=c.getrowdata(d);c._raiseEvent(18,{rowindex:d,row:f,datafield:a,displayfield:k.displayfield,oldvalue:b,value:b,columntype:k.columntype});c.editcell.editor=null;c.editcell.editing=!1;c.editcell=null;(e||void 0==e)&&c._renderrows(c.virtualsizeinfo);m();c.enablebrowserselection||(c.host.addClass("jqx-disableselect"),c.content.addClass("jqx-disableselect"))};if(c)return l(this),!1;this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide());k.cellvaluechanging&&(c=k.cellvaluechanging(d,
a,k.columntype,this.editcell.value,b),void 0!=c&&(b=c));if(k.validation){c=this.getcell(d,a);try{var r=k.validation(c,b),p=this.gridlocalization.validationstring;void 0!=r.message&&(p=r.message);if("boolean"==typeof r?!r:!r.result)return void 0!=r.showmessage&&1!=r.showmessage||this._showvalidationpopup(d,a,p),this.editcell.validated=!1}catch(n){return this._showvalidationpopup(d,a,this.gridlocalization.validationstring),this.editcell.validated=!1}}k.displayfield!=k.datafield?(r=this.getcellvalue(this.editcell.row,
k.displayfield),oldvalue={value:this.editcell.value,label:r}):oldvalue=this.editcell.value;r=this.getrowdata(d);if(k.cellendedit&&0==k.cellendedit(d,a,k.columntype,this.editcell.value,b))return this._raiseEvent(18,{rowindex:d,row:r,datafield:a,displayfield:k.displayfield,oldvalue:oldvalue,value:oldvalue,columntype:k.columntype}),l(this),!1;this._raiseEvent(18,{rowindex:d,row:r,datafield:a,displayfield:k.displayfield,oldvalue:oldvalue,value:b,columntype:k.columntype});this._hidecelleditor(!1);void 0!=
this.editcell&&(this.editcell.editor=null,this.editcell.editing=!1);this.editchar=this.editcell=null;this.setcellvalue(d,a,b,e);this._raiseEvent(26,{rowindex:d,row:r,datafield:a,displayfield:k.displayfield,oldvalue:oldvalue,value:b,columntype:k.columntype});this.enablebrowserselection||(this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect"));h.jqx.browser.msie||m();h.data(document.body,"jqxgrid.edit","");return!0}}},beginrowedit:function(d){var a=this;a._oldselectedrow=
d;this._cellscache=[];var c=!1;"selectedrow"!=this.editmode&&(c=!0);if(c){var e=this.editmode;this.editmode="selectedrow"}var g=null;h.each(this.columns.records,function(c,e){if(a.editable&&this.editable){if("checkbox"===this.columntype||"custom"===this.columntype||"widget"===this.columntype||"template"===this.columntype||"button"===this.columntype)return!0;g||(g=this.datafield);var f=a.getcell(d,this.datafield);a.begincelledit(d,this.datafield,null,!1,!1);var b=a.getrowdata(d);a._raiseEvent(17,{rowindex:d,
row:b,datafield:this.datafield,value:f.value,columntype:this.columntype})}});a.editcell&&(a.editcell.init=!0);this._renderrows(this.virtualsizeinfo);c&&(this.editmode=e);g&&a.editcell&&setTimeout(function(){if(a.editcell){var c=a.editcell[g].editor;c&&(c.data().jqxWidget&&c.data().jqxWidget.focus?c.data().jqxWidget.focus():c.focus())}},25)},endrowedit:function(d,a){var c=this;this._currentEditableColumn=0;this._currentColumn=this._focusedColumn=null;this._checkboxCells=[];if(!this.editcell||void 0==
this.editcell.editor&&"checkbox"!==this.editcell.columntype)return!1;var e=!1;"selectedrow"!=this.editmode&&(e=!0);if(e){var g=this.editmode;this.editmode="selectedrow"}var k=!1,f={};this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide());for(var m=0;m<this.columns.records.length;m++){var b=this.columns.records[m];if(b.editable&&!b.hidden&&"checkbox"!=b.columntype&&!b.createwidget){var l=this._geteditorvalue(b),r=function(a){a._hidecelleditor();var c=a.getcellvalue(a.editcell.row,
b.displayfield);b.cellendedit&&b.cellendedit(d,v,b.columntype,c,l);a.editchar=null;if(b.displayfield!=b.datafield){var e=a.getcellvalue(a.editcell.row,b.displayfield);p={value:c,label:e}}else p=c;e=a.getrowdata(d);a._raiseEvent(18,{rowindex:d,row:e,datafield:v,displayfield:b.displayfield,oldvalue:c,value:c,columntype:b.columntype});a.editcell.editing=!1};if(a)r(this);else{if(b.cellvaluechanging){var p=this.getcellvalue(this.editcell.row,b.displayfield),n=b.cellvaluechanging(d,v,b.columntype,p,l);
void 0!=n&&(l=n)}var v=b.datafield;if(b.validation){n=this.getcell(d,b.datafield);try{var q=b.validation(n,l),t=this.gridlocalization.validationstring;void 0!=q.message&&(t=q.message);var w="boolean"==typeof q?q:q.result;if(!w){void 0!=q.showmessage&&1!=q.showmessage||this._showvalidationpopup(d,v,t);k=!0;this.editcell[b.datafield].validated=!1;continue}}catch(z){this._showvalidationpopup(d,v,this.gridlocalization.validationstring);this.editcell[b.datafield].validated=!1;k=!0;continue}}b.displayfield!=
b.datafield?(n=this.getcellvalue(this.editcell.row,b.displayfield),p={value:this.editcell.value,label:n}):p=this.getcellvalue(this.editcell.row,b.displayfield);f[b.datafield]={newvalue:l,oldvalue:p}}}}var w={},x={};if(!k){this._hidecelleditor(!1);for(m=0;m<this.columns.records.length;m++)if(b=this.columns.records[m],v=b.datafield,!b.hidden&&b.editable){var u=this.getrowdata(d);b.createwidget||("checkbox"==b.columntype?(l=this.getcellvalue(d,b.displayfield),this._raiseEvent(18,{rowindex:d,row:u,datafield:b.datafield,
displayfield:b.displayfield,oldvalue:l,value:l,columntype:b.columntype})):f[b.datafield]&&(l=f[b.datafield].newvalue,p=f[b.datafield].oldvalue,b.cellendedit&&0==b.cellendedit(d,v,b.columntype,p,l)?(this._raiseEvent(18,{rowindex:d,row:u,datafield:v,displayfield:b.displayfield,oldvalue:p,value:p,columntype:b.columntype}),r(this)):(this.source.updaterow||this._raiseEvent(18,{rowindex:d,row:u,datafield:b.datafield,displayfield:b.displayfield,oldvalue:p,value:l,columntype:b.columntype}),w[b.datafield]=
l,x[b.datafield]=p)))}var y=this.getrowid(d),u=this.getrowdata(d);h.each(w,function(a,b){if(b&&void 0!=b.label){var d=c.getcolumn(a);u[d.displayfield]=b.label;u[d.datafield]=b.value}else u[a]=b});this.enablebrowserselection||(this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect"));h.data(document.body,"jqxgrid.edit","");this.editchar=this.editcell=null;if(this.source.updaterow){f=!1;c=this;w=function(a){var b=c.source.updaterow;c.source.updaterow=null;0==a&&h.each(x,function(a,
b){if(b&&void 0!=b.label){var d=c.getcolumn(a);u[d.displayfield]=b.label;u[d.datafield]=b.value}else u[a]=b});c.updaterow(y,u);for(a=0;a<c.columns.records.length;a++){var e=c.columns.records[a];c._raiseEvent(18,{rowindex:d,datafield:e.datafield,row:u,displayfield:e.displayfield,oldvalue:x[e.datafield],value:u[e.displayfield],columntype:e.columntype})}c.source.updaterow=b};try{f=this.source.updaterow(y,u,w),void 0==f&&(f=!0)}catch(z){f=!1;return}}else this.updaterow(y,u),this._renderrows(this.virtualsizeinfo)}e&&
(this.editmode=g);return k},_selection:function(d){if("selectionStart"in d[0]){var a=d[0];d=a.selectionEnd-a.selectionStart;return{start:a.selectionStart,end:a.selectionEnd,length:d,text:a.value}}var c=document.selection.createRange();if(null==c)return{start:0,end:a.value.length,length:0};d=d[0].createTextRange();a=d.duplicate();d.moveToBookmark(c.getBookmark());a.setEndPoint("EndToStart",d);d=c.text.length;return{start:a.text.length,end:a.text.length+c.text.length,length:d,text:c.text}},findRecordIndex:function(d,
a,c){if(a){a=c.length;for(var e=0;e<a;e++)if(d==c[e].label)return e}return-1},_destroyeditors:function(){var d=this;this.columns.records&&(h.each(this.columns.records,function(a,c){var e=h.trim(this.datafield).split(" ").join("");switch(this.columntype){case "dropdownlist":var g=d.editors["dropdownlist_"+e];g&&(g.jqxDropDownList("destroy"),d.editors["dropdownlist_"+e]=null);break;case "combobox":if(g=d.editors["combobox_"+e])g.jqxComboBox("destroy"),d.editors["combobox_"+e]=null;break;case "datetimeinput":if(g=
d.editors["datetimeinput_"+this.datafield])g.jqxDateTimeInput("destroy"),d.editors["datetimeinput_"+e]=null;break;case "numberinput":if(g=d.editors["numberinput_"+e])g.jqxNumberInput("destroy"),d.editors["numberinput_"+e]=null;break;case "custom":case "template":d.destroyeditor&&d.editors["templateeditor_"+e]&&(d.destroyeditor(d.editors["templateeditor_"+e]),d.editors["templateeditor_"+e]=null);if(d.destroyeditor)for(var g=d.getrows.length(),k=0;k<g;k++)d.editors["customeditor_"+e+"_"+k]&&(d.destroyeditor(d.editors["customeditor_"+
e+"_"+k],k),d.editors["customeditor_"+e+"_"+k]=null);break;default:if(g=d.editors["textboxeditor_"+e])d.removeHandler(g,"keydown"),d.editors["textbox_"+e]=null}}),d.editors=[])},_showcelleditor:function(d,a,c,e,g){if(void 0!=c&&null!=this.editcell)if("checkbox"==a.columntype&&a.editable)"selectedrow"==this.editmode&&(this._checkboxCells||(this._checkboxCells=[]),this._checkboxCells[a.datafield]=c);else{void 0==g&&(g=!0);"selectedrow"==this.editmode&&(this.editchar="",g=!1);var k=a.datafield,f=h(c),
m=this,b=this.editcell.editor,l=this.getcellvalue(d,k),r=this.getcelltext(d,k),p=parseInt(this.hScrollInstance.value);this.columns.records.indexOf(a);this.editcell.element=c;if(0==this.editcell.validated){var n="";this.validationpopup&&(n=this.validationpopup.text());this._showvalidationpopup(d,k,n)}var v=function(a){m.hScrollInstance.isScrolling()||m.vScrollInstance.isScrolling()||!g||m.isTouchDevice()||(a&&a.focus(),0!=m.gridcontent[0].scrollTop&&(m.scrolltop(Math.abs(m.gridcontent[0].scrollTop)),
m.gridcontent[0].scrollTop=0),0!=m.gridcontent[0].scrollLeft&&(m.gridcontent[0].scrollLeft=0))};switch(a.columntype){case "dropdownlist":if(this.host.jqxDropDownList){c.innerHTML="";var n=h.trim(a.datafield).split(" ").join(""),q=h.trim(a.displayfield).split(" ").join("");-1!=n.indexOf(".")&&(n=n.replace(".",""));-1!=q.indexOf(".")&&(q=q.replace(".",""));var t=this.editors["dropdownlist_"+n],b=void 0==t?h("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='dropdownlisteditor'></div>"):
t;b.css("top",h(c).parent().position().top);this.oldhscroll?b.css("left",-p+parseInt(h(c).position().left)):b.css("left",parseInt(h(c).position().left));a.pinned&&b.css("left",p+parseInt(h(c).position().left));void 0==t&&(b.prependTo(this.table),b[0].id="dropdownlisteditor"+this.element.id+n,t=this.source._source?!0:!1,p=null,t?(p={id:this.source._source.id,localdata:this.source.records,datatype:this.source.datatype,async:!1},p=new h.jqx.dataAdapter(p,{autoBind:!1,async:!1,uniqueDataFields:[q],autoSort:!0,
autoSortField:q})):p=new h.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[q],async:!1,autoSort:!0,autoSortField:q}),t=a.createeditor?!1:!0,b.jqxDropDownList({enableBrowserBoundsDetection:!0,keyboardSelection:!1,source:p,rtl:this.rtl,autoDropDownHeight:t,theme:this.theme,width:f.width()-2,height:f.height()-2,displayMember:q,valueMember:k}),this.editors["dropdownlist_"+n]=b,a.createeditor&&a.createeditor(d,l,b));a._requirewidthupdate&&b.jqxDropDownList({width:f.width()-2});f=b.jqxDropDownList("listBox").visibleItems;
a.createeditor||(8>f.length?b.jqxDropDownList("autoDropDownHeight",!0):b.jqxDropDownList("autoDropDownHeight",!1));l=this.getcellvalue(d,q);f=this.findRecordIndex(l,q,f);e&&(""!=l?b.jqxDropDownList("selectIndex",f,!0):b.jqxDropDownList("selectIndex",-1));if(!this.editcell)return;void 0!=this.editcell.defaultvalue&&b.jqxDropDownList("selectIndex",this.editcell.defaultvalue,!0);g&&b.jqxDropDownList("focus")}break;case "combobox":if(this.host.jqxComboBox){c.innerHTML="";n=h.trim(a.datafield).split(" ").join("");
q=h.trim(a.displayfield).split(" ").join("");-1!=n.indexOf(".")&&(n=n.replace(".",""));-1!=q.indexOf(".")&&(q=q.replace(".",""));t=this.editors["combobox_"+n];b=void 0==t?h("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='comboboxeditor'></div>"):t;b.css("top",h(c).parent().position().top);this.oldhscroll?b.css("left",-p+parseInt(h(c).position().left)):b.css("left",parseInt(h(c).position().left));a.pinned&&
b.css("left",p+parseInt(h(c).position().left));void 0==t&&(b.prependTo(this.table),b[0].id="comboboxeditor"+this.element.id+n,t=this.source._source?!0:!1,p=null,t?(p={id:this.source._source.id,localdata:this.source.records,datatype:this.source.datatype,async:!1},p=new h.jqx.dataAdapter(p,{autoBind:!1,async:!1,uniqueDataFields:[q],autoSort:!0,autoSortField:q})):p=new h.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[q],async:!1,autoSort:!0,autoSortField:q}),t=a.createeditor?!1:!0,b.jqxComboBox({enableBrowserBoundsDetection:!0,
keyboardSelection:!1,source:p,rtl:this.rtl,autoDropDownHeight:t,theme:this.theme,width:f.width()-2,height:f.height()-2,displayMember:q,valueMember:k}),b.removeAttr("tabindex"),b.find("div").removeAttr("tabindex"),this.editors["combobox_"+n]=b,a.createeditor&&a.createeditor(d,l,b));a._requirewidthupdate&&b.jqxComboBox({width:f.width()-2});f=b.jqxComboBox("listBox").visibleItems;a.createeditor||(8>f.length?b.jqxComboBox("autoDropDownHeight",!0):b.jqxComboBox("autoDropDownHeight",!1));l=this.getcellvalue(d,
q);f=this.findRecordIndex(l,q,f);e&&(""!=l?b.jqxComboBox("selectIndex",f,!0):b.jqxComboBox("selectIndex",-1),b.jqxComboBox("val",l));if(!this.editcell)return;void 0!=this.editcell.defaultvalue&&b.jqxComboBox("selectIndex",this.editcell.defaultvalue,!0);this.editchar&&0<this.editchar.length&&b.jqxComboBox("input").val(this.editchar);g&&setTimeout(function(){v(b.jqxComboBox("input"));if(b)if(b.jqxComboBox("_setSelection",0,0),m.editchar)b.jqxComboBox("_setSelection",1,1),m.editchar=null;else if(b.jqxComboBox("input")){var a=
b.jqxComboBox("input").val();b.jqxComboBox("_setSelection",0,a.length)}},10)}break;case "datetimeinput":if(this.host.jqxDateTimeInput&&(c.innerHTML="",n=h.trim(a.datafield).split(" ").join(""),-1!=n.indexOf(".")&&(n=n.replace(".","")),q=this.editors["datetimeinput_"+n],b=void 0==q?h("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='datetimeeditor'></div>"):q,b.show(),b.css("top",h(c).parent().position().top),
this.oldhscroll?b.css("left",-p+parseInt(h(c).position().left)):b.css("left",parseInt(h(c).position().left)),a.pinned&&b.css("left",p+parseInt(h(c).position().left)),void 0==q&&(b.prependTo(this.table),b[0].id="datetimeeditor"+this.element.id+n,b.jqxDateTimeInput({firstDayOfWeek:this.gridlocalization.firstDay,enableBrowserBoundsDetection:!0,localization:{calendar:this.gridlocalization},_editor:!0,theme:this.theme,rtl:this.rtl,width:f.width(),height:f.height(),formatString:a.cellsformat}),this.editors["datetimeinput_"+
n]=b,a.createeditor&&a.createeditor(d,l,b)),a._requirewidthupdate&&b.jqxDateTimeInput({width:f.width()-2}),e&&(""!=l&&null!=l?(f=new Date(l),"Invalid Date"==f&&this.source.getvaluebytype&&(f=this.source.getvaluebytype(l,{name:a.datafield,type:"date"})),b.jqxDateTimeInput("setDate",f)):b.jqxDateTimeInput("setDate",null),void 0!=this.editcell.defaultvalue&&b.jqxDateTimeInput("setDate",this.editcell.defaultvalue)),g)){var w=this.editEvent;setTimeout(function(){v(b.jqxDateTimeInput("dateTimeInput"));
setTimeout(function(){b.jqxDateTimeInput("_selectGroup",0);if(m.editchar&&0<m.editchar.length){var a=parseInt(m.editchar);isNaN(a)||w&&b.jqxDateTimeInput("_handleKeyPress",w,w.charCode?w.charCode:w.keyCode?w.keyCode:0)}},25)},10)}break;case "numberinput":this.host.jqxNumberInput&&(c.innerHTML="",n=h.trim(a.datafield).split(" ").join(""),-1!=n.indexOf(".")&&(n=n.replace(".","")),q=this.editors["numberinput_"+n],b=void 0==q?h("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='numbereditor'></div>"):
q,b.show(),b.css("top",h(c).parent().position().top),this.oldhscroll?b.css("left",-p+parseInt(h(c).position().left)):b.css("left",parseInt(h(c).position().left)),a.pinned&&b.css("left",p+parseInt(h(c).position().left)),void 0==q&&(b.prependTo(this.table),b[0].id="numbereditor"+this.element.id+n,p="",q="left",t=2,a.cellsformat?-1!=a.cellsformat.indexOf("c")?(p=this.gridlocalization.currencysymbol,q=this.gridlocalization.currencysymbolposition,q="before"==q?"left":"right",1<a.cellsformat.length&&(t=
parseInt(a.cellsformat.substring(1),10))):-1!=a.cellsformat.indexOf("p")&&(p=this.gridlocalization.percentsymbol,q="right",1<a.cellsformat.length&&(t=parseInt(a.cellsformat.substring(1),10))):t=0,b.jqxNumberInput({decimalSeparator:this.gridlocalization.decimalseparator,decimalDigits:t,inputMode:"simple",theme:this.theme,rtl:this.rtl,width:f.width()-1,height:f.height()-1,spinButtons:!0,symbol:p,symbolPosition:q}),this.editors["numberinput_"+n]=b,a.createeditor&&a.createeditor(d,l,b)),a._requirewidthupdate&&
b.jqxNumberInput({width:f.width()-2}),e&&(""!=l&&null!=l?b.jqxNumberInput("setDecimal",l):b.jqxNumberInput("setDecimal",0),void 0!=this.editcell.defaultvalue&&b.jqxNumberInput("setDecimal",this.editcell.defaultvalue),this.editchar&&0<this.editchar.length&&(f=parseInt(this.editchar),isNaN(f)||b.jqxNumberInput("setDecimal",f)),g&&setTimeout(function(){v(b.jqxNumberInput("numberInput"));b.jqxNumberInput("_setSelectionStart",0);if(m.editchar)0<a.cellsformat.length?b.jqxNumberInput("_setSelectionStart",
2):b.jqxNumberInput("_setSelectionStart",1),m.editchar=null;else{if(b.jqxNumberInput("spinButtons")){var c=b.jqxNumberInput("numberInput").val();m._setSelection(b.jqxNumberInput("numberInput")[0],c.length,c.length)}else c=b.jqxNumberInput("numberInput").val(),m._setSelection(b.jqxNumberInput("numberInput")[0],0,c.length);b.jqxNumberInput("selectAll")}},10)));break;case "custom":c.innerHTML="";n=h.trim(a.datafield).split(" ").join("");-1!=n.indexOf(".")&&(n=n.replace(".",""));q=this.editors["customeditor_"+
n+"_"+d];b=void 0==q?h("<div style='overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='customeditor'></div>"):q;b.show();b.css("top",h(c).parent().position().top);this.oldhscroll?b.css("left",-p+parseInt(h(c).position().left)):b.css("left",parseInt(h(c).position().left));a.pinned&&b.css("left",p+parseInt(h(c).position().left));void 0==q&&(b.prependTo(this.table),b[0].id="customeditor"+this.element.id+
n+"_"+d,this.editors["customeditor_"+n+"_"+d]=b,n=f.width()-1,p=f.height()-1,b.width(n),b.height(p),a.createeditor&&a.createeditor(d,l,b,r,n,p,this.editchar));a._requirewidthupdate&&b.width(f.width()-2);break;case "template":c.innerHTML="";n=h.trim(a.datafield).split(" ").join("");-1!=n.indexOf(".")&&(n=n.replace(".",""));q=this.editors["templateeditor_"+n];b=void 0==q?h("<div style='overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='templateeditor'></div>"):
q;b.show();b.css("top",h(c).parent().position().top);this.oldhscroll?b.css("left",-p+parseInt(h(c).position().left)):b.css("left",parseInt(h(c).position().left));a.pinned&&b.css("left",p+parseInt(h(c).position().left));void 0==q&&(b.prependTo(this.table),b[0].id="templateeditor"+this.element.id+n,this.editors["templateeditor_"+n]=b,n=f.width()-1,p=f.height()-1,b.width(n),b.height(p),a.createeditor&&a.createeditor(d,l,b,r,n,p,this.editchar));a._requirewidthupdate&&b.width(f.width()-2);break;default:c.innerHTML=
"";b=this.editors["textboxeditor_"+a.datafield]||h("<input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox' id='textboxeditor'/>");b[0].id="textboxeditor"+this.element.id+a.datafield;b.appendTo(f);this.rtl&&b.css("direction","rtl");if(e||""==b[0].className)b.addClass(this.toThemeProperty("jqx-input")),b.addClass(this.toThemeProperty("jqx-widget-content")),this.editchar&&0<this.editchar.length?b.val(this.editchar):(""!=a.cellsformat&&(l=this.getcelltext(d,
k)),void 0==l&&(l=""),b.val(l)),void 0!=this.editcell.defaultvalue&&b.val(this.editcell.defaultvalue),b.width(f.width()+1),b.height(f.height()+1),a.createeditor&&a.createeditor(d,l,b),""==a.cellsformat||-1==a.cellsformat.indexOf("p")&&-1==a.cellsformat.indexOf("c")&&-1==a.cellsformat.indexOf("n")&&-1==a.cellsformat.indexOf("f")||this.editors["textboxeditor_"+a.datafield]||b.keydown(function(c){c=String.fromCharCode(c.charCode?c.charCode:c.keyCode?c.keyCode:0);c=parseInt(c);if(isNaN(c)||0<m._selection(b).length)return!0;
c="";var d=b.val();if(1<a.cellsformat.length){var e=parseInt(a.cellsformat.substring(1));isNaN(e)&&(e=0)}else e=0;if(0<e&&-1!=d.indexOf(m.gridlocalization.decimalseparator)&&m._selection(b).start>d.indexOf(m.gridlocalization.decimalseparator))return!0;for(var f=0;f<d.length-e;f++){var g=d.substring(f,f+1);null!=g.match(/^[0-9]+$/)&&(c+=g)}if(11<=c.length)return!1});this.editors["textboxeditor_"+a.datafield]=b;e&&g&&setTimeout(function(){v(b);m.editchar?(m._setSelection(b[0],1,1),m.editchar=null):
m._setSelection(b[0],0,b.val().length)},25)}b&&(b[0].style.zIndex=1+c.style.zIndex,h.jqx.browser.msie&&8>h.jqx.browser.version&&(b[0].style.zIndex=1+this.columns.records.length+c.style.zIndex),b.css("display","block"),this.editcell.editor=b,this.editcell[k]||(this.editcell[k]={}),this.editcell[k].editor=b);e&&a.initeditor&&a.initeditor(d,l,b,r,this.editchar);m.isTouchDevice()||setTimeout(function(){m.content&&(m.content[0].scrollTop=0,m.content[0].scrollLeft=0);m.gridcontent&&(m.gridcontent[0].scrollLeft=
0,m.gridcontent[0].scrollTop=0)},10)}},_setSelection:function(d,a,c){try{if("selectionStart"in d)d.setSelectionRange(a,c);else{var e=d.createTextRange();e.collapse(!0);e.moveEnd("character",c);e.moveStart("character",a);e.select()}}catch(g){}},_hideeditors:function(){if(null!=this.editcells)for(var d in this.editcells)this.editcell=this.editcells[d],this._hidecelleditor()},_hidecelleditor:function(d){if(this.editcell)if("selectedrow"===this.editmode){for(d=0;d<this.columns.records.length;d++){var a=
this.columns.records[d];if(this.editcell[a.datafield]&&this.editcell[a.datafield].editor){this.editcell[a.datafield].editor.hide();var c=this.editcell[a.datafield].editor;switch(a.columntype){case "dropdownlist":c.jqxDropDownList({closeDelay:0});c.jqxDropDownList("hideListBox");c.jqxDropDownList({closeDelay:300});break;case "combobox":c.jqxComboBox({closeDelay:0});c.jqxComboBox("hideListBox");c.jqxComboBox({closeDelay:300});break;case "datetimeinput":c.jqxDateTimeInput("isOpened")&&(c.jqxDateTimeInput({closeDelay:0}),
c.jqxDateTimeInput("hideCalendar"),c.jqxDateTimeInput({closeDelay:300}))}}}this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide())}else if("checkbox"!=this.editcell.columntype){if(this.editcell.editor)switch(this.editcell.editor.hide(),this.editcell.columntype){case "dropdownlist":this.editcell.editor.jqxDropDownList({closeDelay:0});this.editcell.editor.jqxDropDownList("hideListBox");this.editcell.editor.jqxDropDownList({closeDelay:300});break;case "combobox":this.editcell.editor.jqxComboBox({closeDelay:0});
this.editcell.editor.jqxComboBox("hideListBox");this.editcell.editor.jqxComboBox({closeDelay:300});break;case "datetimeinput":a=this.editcell.editor,a.jqxDateTimeInput("isOpened")&&(a.jqxDateTimeInput({closeDelay:0}),a.jqxDateTimeInput("hideCalendar"),a.jqxDateTimeInput({closeDelay:300}))}this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide());this.isNestedGrid||0!=d&&this.element.focus()}},_geteditorvalue:function(d){var a=new String;if(!this.editcell)return null;var c=
this.editcell.editor;"selectedrow"==this.editmode&&this.editcell[d.datafield]&&(c=this.editcell[d.datafield].editor);if(c){switch(d.columntype){default:a=c.val();if(""!=d.cellsformat){var e="string",g=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(g){var k="";h.each(g,function(){if(this.name==d.displayfield)return this.type&&(k=this.type),!1});k&&(e=k)}g="date"===e||"time"===e;if("number"===e||"float"===e||"int"===e||"integer"===e||"string"===e&&(-1!=d.cellsformat.indexOf("p")||
-1!=d.cellsformat.indexOf("c")||-1!=d.cellsformat.indexOf("n")||-1!=d.cellsformat.indexOf("f"))){if(""===a&&d.nullable)return"";-1<a.indexOf(this.gridlocalization.currencysymbol)&&(a=a.replace(this.gridlocalization.currencysymbol,""));var f;f=new Number(a);if(!isNaN(f))return f;a=function(a,b,c){var d=a;if(b==c)return a;for(a=d.indexOf(b);-1!=a;)d=d.replace(b,c),a=d.indexOf(b);return d}(a,this.gridlocalization.thousandsseparator,"");a=a.replace(this.gridlocalization.decimalseparator,".");-1<a.indexOf(this.gridlocalization.percentsymbol)&&
(a=a.replace(this.gridlocalization.percentsymbol,""));f="";for(var m=0;m<a.length;m++){var b=a.substring(m,m+1);"-"===b&&(f+="-");"."===b&&(f+=".");null!=b.match(/^[0-9]+$/)&&(f+=b)}a=f.replace(/ /g,"");a=new Number(a);isNaN(a)&&(a="")}if(g||"string"===e&&(-1!=d.cellsformat.indexOf("H")||-1!=d.cellsformat.indexOf("m")||-1!=d.cellsformat.indexOf("M")||-1!=d.cellsformat.indexOf("y")||-1!=d.cellsformat.indexOf("h")||-1!=d.cellsformat.indexOf("d"))){if(""===a&&d.nullable)return"";h.jqx.dataFormat&&(a=
h.jqx.dataFormat.tryparsedate(a,this.gridlocalization));if("Invalid Date"==a||null==a)a=""}}d.displayfield!=d.datafield&&(a={label:a,value:a});break;case "checkbox":c.jqxCheckBox&&(a=c.jqxCheckBox("checked"));break;case "datetimeinput":if(c.jqxDateTimeInput){c.jqxDateTimeInput({isEditing:!1});c.jqxDateTimeInput("_validateValue");a=c.jqxDateTimeInput("getDate");if(null==a)return null;a=new Date(a.toString());d.displayfield!=d.datafield&&(a={label:a,value:a})}break;case "dropdownlist":c.jqxDropDownList&&
(a=c.jqxDropDownList("selectedIndex"),e=c.jqxDropDownList("listBox").getVisibleItem(a),a=d.displayfield!=d.datafield?e?{label:e.label,value:e.value}:"":e?e.label:"",null==a&&(a=""));break;case "combobox":c.jqxComboBox&&(a=c.jqxComboBox("val"),d.displayfield!=d.datafield&&(e=c.jqxComboBox("getSelectedItem"),null!=e&&(a={label:e.label,value:e.value})),null==a&&(a=""));break;case "numberinput":c.jqxNumberInput&&(this.touchdevice&&c.jqxNumberInput("_doTouchHandling"),e=c.jqxNumberInput("getDecimal"),
a=new Number(e),a=parseFloat(a),isNaN(a)&&(a=0),null===e&&(a=null),d.displayfield!=d.datafield&&(a={label:a,value:a}))}d.geteditorvalue&&(a="selectedrow"==this.editmode?d.geteditorvalue(this.editcell.row,this.getcellvalue(this.editcell.row,d.datafield),c):d.geteditorvalue(this.editcell.row,this.editcell.value,c))}return a},hidevalidationpopups:function(){this.popups&&(h.each(this.popups,function(){this.validation.remove();this.validationrow.remove()}),this.popups=[]);this.validationpopup&&(this.validationpopuparrow.hide(),
this.validationpopup.hide())},showvalidationpopup:function(d,a,c){void 0==c&&(c=this.gridlocalization.validationstring);var e=h("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),g=h("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");e.html(c);g.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));e.addClass(this.toThemeProperty("jqx-grid-validation"));e.addClass(this.toThemeProperty("jqx-rc-all"));e.prependTo(this.table);
g.prependTo(this.table);for(var k=parseInt(this.hScrollInstance.value),f=this.getcolumn(a).uielement,m=null,b=0;b<this.hittestinfo.length;b++)d===this.hittestinfo[b].row.visibleindex&&(m=this.hittestinfo[b]);if(m){b=h(m.visualrow);e.css("top",parseInt(b.position().top)+30+"px");var l=parseInt(e.css("top"));g.css("top",l-12);g.removeClass();g.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));m=!1;l>=this._gettableheight()&&(g.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),
g.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),l=parseInt(b.position().top)-this.rowsheight-5,0>l&&(l=0,this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),m=!0),e.css("top",l+"px"),g.css("top",l+e.outerHeight()-9));b=-k+parseInt(h(f).position().left);g.css("left",k+b+30);l=e.width();l+b>this.host.width()-20&&(l=l+b-this.host.width()+40,b-=l);m?e.css("left",k+parseInt(h(f).position().left)-e.outerWidth()):e.css("left",k+b);e.show();g.show();
this.popups||(this.popups=[]);this.popups[this.popups.length]={validation:e,validationrow:g}}else{this.ensurerowvisible(d);var r=this;e.remove();g.remove();setTimeout(function(){for(var b=null,e=0;e<r.hittestinfo.length;e++)d===r.hittestinfo[e].row.visibleindex&&(b=r.hittestinfo[e]);b&&r.showvalidationpopup(d,a,c)},25)}},_showvalidationpopup:function(d,a,c){d=this.editcell;var e=this.editcell.editor;"selectedrow"==this.editmode&&(d=this.editcell[a])&&d.editor&&(e=d.editor,d.element=e);if(e){if(this.validationpopup&&
h.jqx.isHidden(this.validationpopup)&&(this.validationpopup.remove&&(this.validationpopup.remove(),this.validationpopuparrow.remove()),this.validationpopuparrow=this.validationpopup=null,void 0===a&&void 0===c&&this.editors&&0===this.editors.length))return;this.validationpopup?this.validationpopup.html(c):(a=h("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),e=h("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>"),
a.html(c),e.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),a.addClass(this.toThemeProperty("jqx-grid-validation")),a.addClass(this.toThemeProperty("jqx-rc-all")),a.prependTo(this.table),e.prependTo(this.table),this.validationpopup=a,this.validationpopuparrow=e);c=parseInt(this.hScrollInstance.value);"selectedrow"==this.editmode?this.visiblerows&&this.visiblerows[this.editcell.visiblerowindex]?this.validationpopup.css("top",this.visiblerows[this.editcell.visiblerowindex].top+(this.rowsheight+
5)+"px"):this.validationpopup.css("top",parseInt(h(d.editor).position().top)+(this.rowsheight+5)+"px"):this.validationpopup.css("top",parseInt(h(d.element).parent().position().top)+(this.rowsheight+5)+"px");e=parseInt(this.validationpopup.css("top"));this.validationpopuparrow.css("top",e-11);this.validationpopuparrow.removeClass();this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));var g=this._gettableheight();a=!1;e>=g&&(this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),
this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),e=parseInt(h(d.element).parent().position().top)-this.rowsheight-5,"selectedrow"==this.editmode&&(e=this.visiblerows&&this.visiblerows[this.editcell.visiblerowindex]?this.visiblerows[this.editcell.visiblerowindex].top-this.rowsheight-5:parseInt(h(d.editor).position().top)-this.rowsheight-5),0>e&&(e=0,this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),a=!0),this.validationpopup.css("top",
e+"px"),this.validationpopuparrow.css("top",e+this.validationpopup.outerHeight()-9));e=-c+parseInt(h(d.element).position().left);this.validationpopuparrow.css("left",c+e+30);g=this.validationpopup.width();g+e>this.host.width()-20&&(g=g+e-this.host.width()+40,e-=g);a?this.validationpopup.css("left",c+parseInt(h(d.element).position().left)-this.validationpopup.outerWidth()):this.validationpopup.css("left",c+e);"none"==this.editcell.editor.css("display")?(this.validationpopup.hide(),this.validationpopuparrow.hide()):
(this.validationpopup.show(),this.validationpopuparrow.show())}}})})(jqxBaseFramework);
