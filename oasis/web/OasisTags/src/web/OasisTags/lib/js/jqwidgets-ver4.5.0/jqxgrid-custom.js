/*
 jQWidgets v4.5.0 (2017-Jan)
 Copyright (c) 2011-2017 jQWidgets.
 License: http://jqwidgets.com/license/
*/
var $jscomp={scope:{},findInternal:function(e,D,v){e instanceof String&&(e=String(e));for(var a=e.length,c=0;c<a;c++){var b=e[c];if(D.call(v,b,c,e))return{i:c,v:b}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,D,v){if(v.get||v.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[D]=v.value)};
$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(e,D,v,a){if(D){v=$jscomp.global;e=e.split(".");for(a=0;a<e.length-1;a++){var c=e[a];c in v||(v[c]={});v=v[c]}e=e[e.length-1];a=v[e];D=D(a);D!=a&&null!=D&&$jscomp.defineProperty(v,e,{configurable:!0,writable:!0,value:D})}};
$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(e,v){return $jscomp.findInternal(this,e,v).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var D=0;return $jscomp.iteratorPrototype(function(){return D<e.length?{done:!1,value:e[D++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(e,D){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var v=0,a={next:function(){if(v<e.length){var c=v++;return{value:D(c,e[c]),done:!1}}a.next=function(){return{done:!0,value:void 0}};return a.next()}};a[Symbol.iterator]=function(){return a};return a};
$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");
(function(e){function D(a,c){this.owner=a;this.displayfield=this.datafield=null;this.text="";this.createfilterpanel=null;this.editable=this.hideable=this.sortable=!0;this.hidden=!1;this.groupable=!0;this.checkchange=this.cellsrenderer=this.renderer=null;this.threestatecheckbox=!1;this.columntype=this.buttonclick=null;this.cellsformat="";this.cellsalign=this.align="left";this.width="auto";this.minwidth=25;this.maxwidth="auto";this.pinned=!1;this.visibleindex=-1;this.filterable=!0;this.filter=null;
this.filteritems=[];this.resizable=!0;this.validation=this.geteditorvalue=this.destroyeditor=this.destroywidget=this.initwidget=this.createwidget=this.createeditor=this.initeditor=null;this.cellclassname=this.classname="";this.aggregatesrenderer=this.aggregates=this.cellvaluechanging=this.cellbeginedit=this.cellendedit=null;this.menu=!0;this.createfilterwidget=null;this.filtertype="default";this.rendered=this.filtercondition=null;this.exportable=!0;this.exporting=!1;this.enabletooltips=this.clipboard=
this.nullable=this.draggable=!0;this.columngroup=null;this.filterdelay=800;this.destroyeverpresentrowwidget=this.validateeverpresentrowwidgetvalue=this.initeverpresentrowwidget=this.createeverpresentrowwidget=this.geteverpresentrowwidgetvalue=this.reseteverpresentrowwidgetvalue=null;this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,
maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}};this.setproperty=function(a,c){if(this[a]){var b=this[a];this[a]=c;this.owner._columnPropertyChanged(this,a,c,b)}else this[a.toLowerCase()]&&(b=this[a.toLowerCase()],this[a.toLowerCase()]=c,this.owner._columnPropertyChanged(this,
a.toLowerCase(),c,b))};this._initfields=function(b){if(null!=b){var c=this.that;e.jqx.hasProperty(b,"dataField")&&(this.datafield=e.jqx.get(b,"dataField"));e.jqx.hasProperty(b,"displayField")?this.displayfield=e.jqx.get(b,"displayField"):this.displayfield=this.datafield;e.jqx.hasProperty(b,"enableTooltips")&&(this.enabletooltips=e.jqx.get(b,"enableTooltips"));e.jqx.hasProperty(b,"text")?this.text=e.jqx.get(b,"text"):this.text=this.displayfield;e.jqx.hasProperty(b,"createfilterpanel")&&(this.createfilterpanel=
e.jqx.get(b,"createfilterpanel"));e.jqx.hasProperty(b,"sortable")&&(this.sortable=e.jqx.get(b,"sortable"));e.jqx.hasProperty(b,"hideable")&&(this.hideable=e.jqx.get(b,"hideable"));e.jqx.hasProperty(b,"hidden")&&(this.hidden=e.jqx.get(b,"hidden"));e.jqx.hasProperty(b,"groupable")&&(this.groupable=e.jqx.get(b,"groupable"));e.jqx.hasProperty(b,"renderer")&&(this.renderer=e.jqx.get(b,"renderer"));e.jqx.hasProperty(b,"align")&&(this.align=e.jqx.get(b,"align"));e.jqx.hasProperty(b,"cellsAlign")&&(this.cellsalign=
e.jqx.get(b,"cellsAlign"));e.jqx.hasProperty(b,"clipboard")&&(this.clipboard=e.jqx.get(b,"clipboard"));e.jqx.hasProperty(b,"cellsFormat")&&(this.cellsformat=e.jqx.get(b,"cellsFormat"));e.jqx.hasProperty(b,"width")&&(this.width=e.jqx.get(b,"width"));e.jqx.hasProperty(b,"minWidth")&&(this.minwidth=parseInt(e.jqx.get(b,"minWidth")),isNaN(this.minwidth)&&(this.minwidth=25));e.jqx.hasProperty(b,"maxWidth")&&(this.maxwidth=parseInt(e.jqx.get(b,"maxWidth")),isNaN(this.maxwidth)&&(this.maxwidth="auto"));
e.jqx.hasProperty(b,"cellsRenderer")?this.cellsrenderer=e.jqx.get(b,"cellsRenderer"):b.cellsRenderer&&(this.cellsrenderer=b.cellsRenderer);e.jqx.hasProperty(b,"columnType")&&(this.columntype=e.jqx.get(b,"columnType"));e.jqx.hasProperty(b,"checkChange")&&(this.checkchange=e.jqx.get(b,"checkChange"));e.jqx.hasProperty(b,"buttonClick")?this.buttonclick=e.jqx.get(b,"buttonClick"):b.buttonClick&&(this.buttonclick=b.buttonClick);e.jqx.hasProperty(b,"pinned")&&(this.pinned=e.jqx.get(b,"pinned"));e.jqx.hasProperty(b,
"visibleIndex")&&(this.visibleindex=e.jqx.get(b,"visibleIndex"));e.jqx.hasProperty(b,"filterable")&&(this.filterable=e.jqx.get(b,"filterable"));e.jqx.hasProperty(b,"filter")&&(this.filter=e.jqx.get(b,"filter"));e.jqx.hasProperty(b,"resizable")&&(this.resizable=e.jqx.get(b,"resizable"));e.jqx.hasProperty(b,"editable")&&(this.editable=e.jqx.get(b,"editable"));e.jqx.hasProperty(b,"initEditor")?this.initeditor=e.jqx.get(b,"initEditor"):b.initEditor&&(this.initeditor=b.initEditor);e.jqx.hasProperty(b,
"createEditor")?this.createeditor=e.jqx.get(b,"createEditor"):b.createEditor&&(this.createeditor=b.createEditor);e.jqx.hasProperty(b,"initWidget")?this.initwidget=e.jqx.get(b,"initWidget"):b.initWidget&&(this.initwidget=b.initWidget);e.jqx.hasProperty(b,"createWidget")?this.createwidget=e.jqx.get(b,"createWidget"):b.createWidget&&(this.createwidget=b.createWidget);e.jqx.hasProperty(b,"destroyWidget")?this.destroywidget=e.jqx.get(b,"destroyWidget"):b.destroyWidget&&(this.destroywidget=b.destroyWidget);
e.jqx.hasProperty(b,"reseteverpresentrowwidgetvalue")||e.jqx.hasFunction(b,"reseteverpresentrowwidgetvalue")?this.reseteverpresentrowwidgetvalue=e.jqx.get(b,"reseteverpresentrowwidgetvalue"):b.resetEverPresentRowWidgetValue&&(this.reseteverpresentrowwidgetvalue=b.resetEverPresentRowWidgetValue);e.jqx.hasProperty(b,"geteverpresentrowwidgetvalue")||e.jqx.hasFunction(b,"geteverpresentrowwidgetvalue")?this.geteverpresentrowwidgetvalue=e.jqx.get(b,"geteverpresentrowwidgetvalue"):b.getEverPresentRowWidgetValue&&
(this.geteverpresentrowwidgetvalue=b.getEverPresentRowWidgetValue);e.jqx.hasProperty(b,"createeverpresentrowwidget")||e.jqx.hasFunction(b,"createeverpresentrowwidget")?this.createeverpresentrowwidget=e.jqx.get(b,"createeverpresentrowwidget"):b.createEverPresentRowWidget&&(this.createeverpresentrowwidget=b.createEverPresentRowWidget);e.jqx.hasProperty(b,"initeverpresentrowwidget")||e.jqx.hasFunction(b,"initeverpresentrowwidget")?this.initeverpresentrowwidget=e.jqx.get(b,"initeverpresentrowwidget"):
b.initEverPresentRowWidget&&(this.initeverpresentrowwidget=b.initEverPresentRowWidget);e.jqx.hasProperty(b,"validateeverpresentrowwidgetvalue")?this.validateeverpresentrowwidgetvalue=e.jqx.get(b,"validateeverpresentrowwidgetvalue"):b.validateEverPresentRowWidgetValue&&(this.validateeverpresentrowwidgetvalue=b.validateEverPresentRowWidgetValue);e.jqx.hasProperty(b,"destroyeverpresentrowwidget")||e.jqx.hasFunction(b,"destroyeverpresentrowwidget")?this.destroyeverpresentrowwidget=e.jqx.get(b,"destroyeverpresentrowwidget"):
b.destroyEverPresentRowWidget&&(this.destroyEverPresentRowWidget=b.destroyEverPresentRowWidget);e.jqx.hasProperty(b,"destroyEditor")?this.destroyeditor=e.jqx.get(b,"destroyEditor"):b.destroyEditor&&(this.destroyeditor=b.destroyEditor);e.jqx.hasProperty(b,"getEditorValue")?this.geteditorvalue=e.jqx.get(b,"getEditorValue"):b.getEditorValue&&(this.geteditorvalue=b.getEditorValue);e.jqx.hasProperty(b,"validation")?this.validation=e.jqx.get(b,"validation"):b.validation&&(this.validation=b.validation);
e.jqx.hasProperty(b,"cellBeginEdit")?this.cellbeginedit=e.jqx.get(b,"cellBeginEdit"):b.cellBeginEdit&&(this.cellbeginedit=b.cellBeginEdit);e.jqx.hasProperty(b,"cellEndEdit")?this.cellendedit=e.jqx.get(b,"cellEndEdit"):b.cellEndEdit&&(this.cellendedit=b.cellEndEdit);e.jqx.hasProperty(b,"className")&&(this.classname=e.jqx.get(b,"className"));e.jqx.hasProperty(b,"cellClassName")?this.cellclassname=e.jqx.get(b,"cellClassName"):b.cellClassName&&(this.cellclassname=b.cellClassName);e.jqx.hasProperty(b,
"menu")&&(this.menu=e.jqx.get(b,"menu"));e.jqx.hasProperty(b,"aggregates")&&(this.aggregates=e.jqx.get(b,"aggregates"));e.jqx.hasProperty(b,"aggregatesRenderer")&&(this.aggregatesrenderer=e.jqx.get(b,"aggregatesRenderer"));e.jqx.hasProperty(b,"createFilterWidget")&&(this.createfilterwidget=e.jqx.get(b,"createFilterWidget"));e.jqx.hasProperty(b,"filterType")&&(this.filtertype=e.jqx.get(b,"filterType"));e.jqx.hasProperty(b,"filterDelay")&&(this.filterdelay=e.jqx.get(b,"filterDelay"));e.jqx.hasProperty(b,
"rendered")&&(this.rendered=e.jqx.get(b,"rendered"));e.jqx.hasProperty(b,"exportable")&&(this.exportable=e.jqx.get(b,"exportable"));e.jqx.hasProperty(b,"filterItems")&&(this.filteritems=e.jqx.get(b,"filterItems"));e.jqx.hasProperty(b,"cellValueChanging")&&(this.cellvaluechanging=e.jqx.get(b,"cellValueChanging"));e.jqx.hasProperty(b,"draggable")&&(this.draggable=e.jqx.get(b,"draggable"));e.jqx.hasProperty(b,"filterCondition")&&(this.filtercondition=e.jqx.get(b,"filterCondition"));e.jqx.hasProperty(b,
"threeStateCheckbox")&&(this.threestatecheckbox=e.jqx.get(b,"threeStateCheckbox"));e.jqx.hasProperty(b,"nullable")&&(this.nullable=e.jqx.get(b,"nullable"));e.jqx.hasProperty(b,"columnGroup")&&(this.columngroup=e.jqx.get(b,"columnGroup"));if(!b instanceof String&&"string"!=typeof b)for(var g in b)if(!c.hasOwnProperty(g)&&!c.hasOwnProperty(g.toLowerCase()))throw a.host.remove(),Error("jqxGrid: Invalid property name - "+g+".");}};this._initfields(c);return this}function v(a,c){this.setdata=function(a){null!=
a&&(this.bounddata=a,this.boundindex=a.boundindex,this.visibleindex=a.visibleindex,this.group=a.group,this.parentbounddata=a.parentItem,this.uniqueid=a.uniqueid,this.level=a.level)};this.setdata(c);this.parentrow=null;this.subrows=[];this.owner=a;this.height=25;this.hidden=!1;this.rowdetails=null;this.rowdetailsheight=100;this.rowdetailshidden=!0;this.top=-1;this.setrowinfo=function(a){this.hidden=a.hidden;this.rowdetails=a.rowdetails;this.rowdetailsheight=a.rowdetailsheight;this.rowdetailshidden=
!a.showdetails;this.height=a.height};return this}e.jqx.jqxWidget("jqxGrid","",{});e.extend(e.jqx._jqxGrid.prototype,{defineInstance:function(){var a={disabled:!1,width:600,height:400,pagerheight:34,groupsheaderheight:34,pagesize:10,pagesizeoptions:["5","10","20"],rowsheight:28,columnsheight:30,filterrowheight:31,groupindentwidth:30,rowdetails:!1,enablerowdetailsindent:!0,enablemousewheel:!0,initrowdetails:null,layoutrowdetails:null,editable:!1,editmode:"selectedcell",pageable:!1,pagermode:"default",
pagerbuttonscount:5,groupable:!1,sortable:!1,filterable:!1,filtermode:"default",autoshowfiltericon:!0,showfiltercolumnbackground:!0,showpinnedcolumnbackground:!0,showsortcolumnbackground:!0,altrows:!1,altstart:1,altstep:1,showrowdetailscolumn:!0,showtoolbar:!1,toolbarheight:34,showstatusbar:!1,statusbarheight:34,enableellipsis:!0,groups:[],groupsrenderer:null,groupcolumnrenderer:null,groupsexpandedbydefault:!1,pagerrenderer:null,touchmode:"auto",columns:[],selectedrowindex:-1,selectedrowindexes:[],
selectedcells:[],autobind:!0,selectedcell:null,tableZIndex:799,headerZIndex:299,updatefilterconditions:null,showgroupaggregates:!1,showaggregates:!1,showfilterrow:!1,showeverpresentrow:!1,everpresentrowposition:"top",everpresentrowactions:"add reset",everpresentrowactionsmode:"buttons",everpresentrowheight:30,autorowheight:!1,autokoupdates:!0,handlekeyboardnavigation:null,showsortmenuitems:!0,showfiltermenuitems:!0,showgroupmenuitems:!0,enablebrowserselection:!1,enablekeyboarddelete:!0,clipboard:!0,
clipboardbegin:null,clipboardend:null,copytoclipboardwithheaders:!1,copytoclipboardhiddencolumns:!1,ready:null,updatefilterpanel:null,autogeneratecolumns:!1,rowdetailstemplate:null,scrollfeedback:null,rendertoolbar:null,renderstatusbar:null,rendered:null,multipleselectionbegins:null,columngroups:null,cellhover:null,source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,
loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},filter:null,dataview:null,updatedelay:null,autoheight:!1,autowidth:!1,showheader:!0,showgroupsheader:!0,closeablegroups:!0,scrollbarsize:e.jqx.utilities.scrollBarSize,touchscrollbarsize:e.jqx.utilities.touchScrollBarSize,scrollbarautoshow:e.jqx.utilities.scrollBarAutoShow,virtualmode:!1,sort:null,columnsmenu:!0,columnsresize:!1,columnsautoresize:!0,columnsreorder:!1,columnsmenuwidth:15,autoshowcolumnsmenubutton:!0,
popupwidth:"auto",popupheight:"auto",columnmenuopening:null,columnmenuclosing:null,sorttogglestates:2,rendergridrows:null,enableanimations:!0,enablecolumnsvirtualization:!0,enabletooltips:!1,selectionmode:"singlerow",enablehover:!0,loadingerrormessage:"The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",verticalscrollbarstep:30,verticalscrollbarlargestep:400,horizontalscrollbarstep:10,
horizontalscrollbarlargestep:50,keyboardnavigation:!0,touchModeStyle:"auto",autoshowloadelement:!0,showdefaultloadelement:!0,showemptyrow:!0,autosavestate:!1,autoloadstate:!1,_updating:!1,_pagescache:[],_pageviews:[],_cellscache:[],_rowdetailscache:[],_rowdetailselementscache:[],_requiresupdate:!1,_hasOpenedMenu:!1,scrollmode:"physical",deferreddatafields:null,localization:null,rtl:!1,menuitemsarray:[],events:"initialized rowClick rowSelect rowUnselect groupExpand groupCollapse sort columnClick cellClick pageChanged pageSizeChanged bindingComplete groupsChanged filter columnResized cellSelect cellUnselect cellBeginEdit cellEndEdit cellValueChanged rowExpand rowCollapse rowDoubleClick cellDoubleClick columnReordered pageChanging postCellEndEdit".split(" ")};
e.extend(!0,this,a);return a},createInstance:function(a){this.that=this;this.pagesize=parseInt(this.pagesize);this.toolbarheight=parseInt(this.toolbarheight);this.columnsheight=parseInt(this.columnsheight);this.filterrowheight=parseInt(this.filterrowheight);this.statusbarheight=parseInt(this.statusbarheight);this.groupsheaderheight=parseInt(this.groupsheaderheight);this.detailsVisibility=[];this.savedArgs=a&&0<a.length?a[0]:null;var c="<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper"+
this.element.id+"'><div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'></div><div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content"+this.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='verticalScrollBar"+this.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar"+
this.element.id+"'></div><div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'></div><div class='jqx-clear jqx-position-absolute' id='addrow'></div><div class='jqx-clear jqx-position-absolute' id='statusbar'></div><div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'></div></div></div>";this.element.innerHTML="";15!=e.jqx.utilities.scrollBarSize&&(this.scrollbarsize=e.jqx.utilities.scrollBarSize);if(this.source){if(!this.source.dataBind){if(!e.jqx.dataAdapter)throw Error("jqxGrid: Missing reference to jqxdata.js");
this.source=new e.jqx.dataAdapter(this.source)}(a=this.source._source.datafields)&&0<a.length&&(this.editmode=this.editmode.toLowerCase(),this.selectionmode=this.selectionmode.toLowerCase())}this.host.attr("role","grid");this.host.attr("align","left");this.element.innerHTML=c;this.host.addClass(this.toTP("jqx-grid"));this.host.addClass(this.toTP("jqx-reset"));this.host.addClass(this.toTP("jqx-rc-all"));this.host.addClass(this.toTP("jqx-widget"));this.host.addClass(this.toTP("jqx-widget-content"));
this.wrapper=this.host.find("#wrapper"+this.element.id);this.content=this.host.find("#content"+this.element.id);this.content.addClass(this.toTP("jqx-reset"));a=this.host.find("#verticalScrollBar"+this.element.id);c=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright jqx-scrollbar-state-normal"));if(!a.jqxScrollBar)throw Error("jqxGrid: Missing reference to jqxscrollbar.js");this.editors=[];this.vScrollBar=
a.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1});this.hScrollBar=c.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1});this.addnewrow=this.host.find("#addrow");this.addnewrow[0].id="addrow"+this.element.id;this.addnewrow.addClass(this.toTP("jqx-widget-header"));
this.pager=this.host.find("#pager");this.pager[0].id="pager"+this.element.id;this.toolbar=this.host.find("#toolbar");this.toolbar[0].id="toolbar"+this.element.id;this.toolbar.addClass(this.toTP("jqx-grid-toolbar"));this.toolbar.addClass(this.toTP("jqx-widget-header"));this.statusbar=this.host.find("#statusbar");this.statusbar[0].id="statusbar"+this.element.id;this.statusbar.addClass(this.toTP("jqx-grid-statusbar"));this.statusbar.addClass(this.toTP("jqx-widget-header"));this.pager.addClass(this.toTP("jqx-grid-pager"));
this.pager.addClass(this.toTP("jqx-widget-header"));this.groupsheader=this.host.find("#groupsheader");this.groupsheader.addClass(this.toTP("jqx-grid-groups-header"));this.groupsheader.addClass(this.toTP("jqx-widget-header"));this.groupsheader[0].id="groupsheader"+this.element.id;this.vScrollBar.css("visibility","hidden");this.hScrollBar.css("visibility","hidden");this.vScrollInstance=e.data(this.vScrollBar[0],"jqxScrollBar").instance;this.hScrollInstance=e.data(this.hScrollBar[0],"jqxScrollBar").instance;
this.gridtable=null;this.isNestedGrid=this.host.parent()?9999==this.host.parent().css("z-index"):!1;this.touchdevice=this.isTouchDevice();this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1));this.rowdetailstemplate&&(void 0==this.rowdetailstemplate.rowdetails&&(this.rowdetailstemplate.rowdetails="<div></div>"),void 0==this.rowdetailstemplate.rowdetailsheight&&(this.rowdetailstemplate.rowdetailsheight=200),void 0==this.rowdetailstemplate.rowdetailshidden&&
(this.rowdetailstemplate.rowdetailshidden=!0));if(this.showfilterrow&&!this.filterable)throw Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(!this.autorowheight||this.autoheight||this.pageable){if(this.virtualmode&&null==this.rendergridrows)throw Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(this.virtualmode&&!this.pageable&&this.groupable)throw Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(!this._testmodules()){this._builddataloadelement();
(this._cachedcolumns=this.columns)&&299<this.columns.length&&(this.headerZIndex=this.columns.length+100);28!=this.rowsheight&&this._measureElement("cell");(30!=this.columnsheight||this.columngroups)&&this._measureElement("column");if(this.source&&(a=this.source.datafields,null==a&&this.source._source&&(a=this.source._source.datafields),a))for(c=0;c<this.columns.length;c++){var b=this.columns[c];if(b&&b.cellsformat&&2<b.cellsformat.length)for(var d=0;d<a.length;d++)if(a[d].name==b.datafield&&!a[d].format){a[d].format=
b.cellsformat;break}}this.databind(this.source);this.showtoolbar&&this.toolbar.css("visibility","inherit");this.showstatusbar&&this.statusbar.css("visibility","inherit");this._arrange();this.pageable&&this._initpager&&this._initpager();this.tableheight=null;var g=this.that,f=function(){g.content&&(g.content[0].scrollTop=0,g.content[0].scrollLeft=0);g.gridcontent&&(g.gridcontent[0].scrollLeft=0,g.gridcontent[0].scrollTop=0)};this.addHandler(this.content,"mousedown",function(){f()});this.addHandler(this.content,
"scroll",function(a){f();return!1});this.showfilterrow||(this.showstatusbar||this.showtoolbar||this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect"));this.enablebrowserselection&&(this.content.removeClass("jqx-disableselect"),this.host.removeClass("jqx-disableselect"));this._resizeWindow();this.disabled&&this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.hasTransform=e.jqx.utilities.hasTransform(this.host);"logical"==this.scrollmode&&(this.vScrollInstance.thumbStep=
this.rowsheight,this.vScrollInstance.step=this.rowsheight);e.jqx.isHidden(this.host)||(this.filterable||this.groupable||this.sortable)&&this._initmenu()}}else throw Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');},_resizeWindow:function(){var a=this.that;if(null!=this.width&&-1!=this.width.toString().indexOf("%")||null!=this.height&&-1!=this.height.toString().indexOf("%")){this._updatesizeonwindowresize=!0;e.jqx.utilities.resize(this.host,function(b){var c=
e(window).width(),d=e(window).height(),k=a.host.width(),h=a.host.height();a.autoheight&&(a._lastHostWidth=d);if(a._lastHostWidth!=k||a._lastHostHeight!=h){if(a.touchdevice&&a.editcell&&"orientationchange"!==b)return;a._updatesize(a._lastHostWidth!=k,a._lastHostHeight!=h)}a._lastWidth=c;a._lastHeight=d;a._lastHostWidth=k;a._lastHostHeight=h});var c=a.host.width(),b=a.host.height();a._lastHostWidth=c;a._lastHostHeight=b}},_builddataloadelement:function(){this.dataloadelement&&this.dataloadelement.remove();
this.dataloadelement=e('<div style="overflow: hidden; position: absolute;"></div>');if(this.showdefaultloadelement){var a=e('<div style="z-index: 99999; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+
this.gridlocalization.loadtext+"</span></div></div>");a.addClass(this.toTP("jqx-rc-all"));this.dataloadelement.addClass(this.toTP("jqx-rc-all"));a.addClass(this.toTP("jqx-fill-state-normal"));this.dataloadelement.append(a)}else this.dataloadelement.addClass(this.toTP("jqx-grid-load"));this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height());this.wrapper.prepend(this.dataloadelement)},_measureElement:function(a){var c=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");
c.addClass(this.toTP("jqx-widget"));e(document.body).append(c);"cell"==a?this._cellheight=c.height():this._columnheight=c.height();c.remove()},_measureMenuElement:function(){var a=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");a.addClass(this.toTP("jqx-widget"));a.addClass(this.toTP("jqx-menu"));a.addClass(this.toTP("jqx-menu-item-top"));a.addClass(this.toTP("jqx-fill-state-normal"));this.isTouchDevice()&&a.addClass(this.toTP("jqx-grid-menu-item-touch"));e(document.body).append(a);
var c=a.outerHeight();a.remove();return c},_measureElementWidth:function(a){a=e("<span style='visibility: hidden; white-space: nowrap;'>"+a+"</span>");a.addClass(this.toTP("jqx-widget"));a.addClass(this.toTP("jqx-grid"));a.addClass(this.toTP("jqx-grid-column-header"));a.addClass(this.toTP("jqx-widget-header"));e(document.body).append(a);var c=a.outerWidth()+20;a.remove();return c},_getBodyOffset:function(){var a=0,c=0;"0px"!=e("body").css("border-top-width")&&(a=parseInt(e("body").css("border-top-width")),
isNaN(a)&&(a=0));"0px"!=e("body").css("border-left-width")&&(c=parseInt(e("body").css("border-left-width")),isNaN(c)&&(c=0));return{left:c,top:a}},_testmodules:function(){var a="",c=this.that,b=function(){""!=a.length&&(a+=",")};this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(b(),a+=" jqxmenu.js");this.host.jqxScrollBar||(b(),a+=" jqxscrollbar.js");this.host.jqxButton||(b(),a+=" jqxbuttons.js");e.jqx.dataAdapter||(b(),a+=" jqxdata.js");this.pageable&&!this.gotopage&&
(b(),a+="jqxgrid.pager.js");this.filterable&&!this.applyfilters&&(b(),a+=" jqxgrid.filter.js");this.groupable&&!this._initgroupsheader&&(b(),a+=" jqxgrid.grouping.js");this.columnsresize&&!this.autoresizecolumns&&(b(),a+=" jqxgrid.columnsresize.js");this.columnsreorder&&!this.setcolumnindex&&(b(),a+=" jqxgrid.columnsreorder.js");this.sortable&&!this.sortby&&(b(),a+=" jqxgrid.sort.js");this.editable&&!this.begincelledit&&(b(),a+=" jqxgrid.edit.js");this.showaggregates&&!this.getcolumnaggregateddata&&
(b(),a+=" jqxgrid.aggregates.js");this.keyboardnavigation&&!this.selectrow&&(b(),a+=" jqxgrid.selection.js");if(""!=a||this.editable||this.filterable||this.pageable){var d=[],g=function(e){switch(e){case "checkbox":c.host.jqxCheckBox||d.checkbox||(d.checkbox=!0,b(),a+=" jqxcheckbox.js");break;case "numberinput":c.host.jqxNumberInput||d.numberinput||(d.numberinput=!0,b(),a+=" jqxnumberinput.js");break;case "datetimeinput":c.host.jqxDateTimeInput||d.datetimeinput?c.host.jqxCalendar||d.calendar||(b(),
a+=" jqxcalendar.js"):(b(),d.datetimeinput=!0,a+=" jqxdatetimeinput.js(requires: jqxcalendar.js)");break;case "combobox":c.host.jqxComboBox||d.combobox?c.host.jqxListBox||d.listbox||(b(),d.listbox=!0,a+=" jqxlistbox.js"):(b(),d.combobox=!0,a+=" jqxcombobox.js(requires: jqxlistbox.js)");break;case "dropdownlist":c.host.jqxDropDownList||d.dropdownlist?c.host.jqxListBox||d.listbox||(b(),d.listbox=!0,a+=" jqxlistbox.js"):(b(),d.dropdownlist=!0,a+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}};(this.filterable||
this.pageable)&&g("dropdownlist");for(var f=0;f<this.columns.length;f++)if(void 0!=this.columns[f]){var k=this.columns[f].columntype;g(k);this.filterable&&this.showfilterrow&&(k=this.columns[f].filtertype,"checkedlist"!=k&&"bool"!=k||g("checkbox"),"date"==k&&g("datetimeinput"))}if(""!=a)throw Error("jqxGrid: Missing references to the following module(s): "+a);}return!1},focus:function(){try{this.wrapper.focus();var a=this.that;setTimeout(function(){a.wrapper.focus()},25);this.focused=!0}catch(c){}},
hiddenParent:function(){return e.jqx.isHidden(this.host)},resize:function(a,c){this.width=a;this.height=c;this._updatesize(!0,!0)},_updatesize:function(a,c){if(!this._loading){var b=this.that;b._newmax=null;var d=b.host.width(),g=b.host.height();b._oldWidth||(b._oldWidth=d);b._oldHeight||(b._oldHeight=g);b._resizeTimer&&clearTimeout(b._resizeTimer);b._resizeTimer=setTimeout(function(){b.resizingGrid=!0;if(!e.jqx.isHidden(b.host)){b.editcell&&(b.endcelledit(b.editcell.row,b.editcell.column,!0,!0),
b._oldselectedcell=null);if(l!=b._oldHeight||1==c){var g=b.groupable&&0<b.groups.length,k=b.vScrollBar.css("visibility");if(!b.autoheight){b.virtualmode&&(b._pageviews=[]);if(g||b.rowdetails||b.pageable){b._arrange();b.prerenderrequired=!0;l=Math.round(b.host.height())+2*b.rowsheight;realheight=b._gettableheight();var g=Math.round(l/b.rowsheight),h=Math.max(b.dataview.totalrows,b.dataview.totalrecords);b.pageable&&(h=b.pagesize,b.pagesize>Math.max(b.dataview.totalrows,b.dataview.totalrecords)&&b.autoheight?
h=Math.max(b.dataview.totalrows,b.dataview.totalrecords):b.autoheight||b.dataview.totalrows<b.pagesize&&(h=Math.max(b.dataview.totalrows,b.dataview.totalrecords)));b._getpagesize();!b.pageable&&b.autoheight&&(g=h);b.virtualsizeinfo&&(b.virtualsizeinfo.visiblerecords=g);b.rendergridcontent(!0,!1);b._renderrows(b.virtualsizeinfo)}else{b._arrange();b.virtualsizeinfo=b._calculatevirtualheight();var l=Math.round(b.host.height())+2*b.rowsheight;parseInt(l)>=parseInt(b._oldHeight)&&(b.prerenderrequired=
!0);b._renderrows(b.virtualsizeinfo);b.rtl&&(b._updatecolumnwidths(),b.table&&b.table.width(b.columnsheader.width()),b._updatecellwidths())}k!=b.vScrollBar.css("visibility")&&(b.vScrollInstance.setPosition(0),b._arrange(),b._updatecolumnwidths(),b.table&&b.table.width(b.columnsheader.width()),b._updatecellwidths())}}if(d!=b._oldWidth||1==a){k=!1;if(b.editcell&&b.editcell.editor)switch(b.editcell.columntype){case "dropdownlist":if(k=b.editcell.editor.jqxDropDownList("isOpened")||b.editcell.editor.jqxDropDownList("isanimating")&&
!b.editcell.editor.jqxDropDownList("ishiding")){b.editcell.editor.jqxDropDownList({openDelay:0});b.editcell.editor.jqxDropDownList("open");b.editcell.editor.jqxDropDownList({openDelay:250});return}break;case "combobox":if(k=b.editcell.editor.jqxComboBox("isOpened")||b.editcell.editor.jqxComboBox("isanimating")&&!b.editcell.editor.jqxComboBox("ishiding")){b.editcell.editor.jqxComboBox({openDelay:0});b.editcell.editor.jqxComboBox("open");b.editcell.editor.jqxComboBox({openDelay:250});return}break;case "datetimeinput":if(k){b.editcell.editor.jqxDateTimeInput("isOpened")||
b.editcell.editor.jqxDateTimeInput("isanimating")&&b.editcell.editor.jqxDateTimeInput("ishiding");b.editcell.editor.jqxDateTimeInput({openDelay:0});b.editcell.editor.jqxDateTimeInput("open");b.editcell.editor.jqxDateTimeInput({openDelay:250});return}}k=b.hScrollBar.css("visibility");b._arrange();b._updatecolumnwidths();b.table&&b.table.width(b.columnsheader.width());b._updatecellwidths();0==a&&b._oldWidth>d||c&&0!=b.dataview.rows.length||b._renderrows(b.virtualsizeinfo);k!=b.hScrollBar.css("visibility")&&
b.hScrollInstance.setPosition(0)}b._oldWidth=d;b._oldHeight=l;b.resizingGrid=!1}},5)}},getTouches:function(a){return e.jqx.mobile.getTouches(a)},_updateTouchScrolling:function(){var a=this.that;if(a.isTouchDevice()){a.scrollmode="logical";a.vScrollInstance.thumbStep=a.rowsheight;var c=e.jqx.mobile.getTouchEventName("touchstart"),b=e.jqx.mobile.getTouchEventName("touchend"),d=e.jqx.mobile.getTouchEventName("touchmove");a.enablehover=!1;a.gridcontent&&(a.removeHandler(a.gridcontent,c+".touchScroll"),
a.removeHandler(a.gridcontent,d+".touchScroll"),a.removeHandler(a.gridcontent,b+".touchScroll"),a.removeHandler(a.gridcontent,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(a.gridcontent[0],a.vScrollInstance.max,function(b,c){null!=c&&"visible"==a.vScrollBar.css("visibility")&&a.vScrollInstance.setPosition(c);null!=b&&"visible"==a.hScrollBar.css("visibility")&&a.hScrollInstance.setPosition(b);a.vScrollInstance.thumbCapture=!0;a._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),
a._overlayElement&&(a.removeHandler(a._overlayElement,c+".touchScroll"),a.removeHandler(a._overlayElement,d+".touchScroll"),a.removeHandler(a._overlayElement,b+".touchScroll"),a.removeHandler(a._overlayElement,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(a._overlayElement[0],a.vScrollInstance.max,function(b,c){null!=c&&"visible"==a.vScrollBar.css("visibility")&&a.vScrollInstance.setPosition(c);null!=b&&"visible"==a.hScrollBar.css("visibility")&&a.hScrollInstance.setPosition(b);a.vScrollInstance.thumbCapture=
!0;a._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,c,function(){a.editcell?a._overlayElement.css("visibility","hidden"):a._overlayElement.css("visibility","visible")}),this.addHandler(this.host,b,function(){a.editcell?a._overlayElement.css("visibility","hidden"):a._overlayElement.css("visibility","visible")})))}},_rendercelltexts:function(){},isTouchDevice:function(){if(void 0!=this.touchDevice)return this.touchDevice;var a=e.jqx.mobile.isTouchDevice();
this.touchDevice=a;if(1==this.touchmode){if(e.jqx.browser.msie&&9>e.jqx.browser.version)return this.enablehover=!1;a=!0;e.jqx.mobile.setMobileSimulator(this.element);this.touchDevice=a}else 0==this.touchmode&&(a=!1);a&&0!=this.touchModeStyle&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize);
return a},toTP:function(a){return this.toThemeProperty(a)},localizestrings:function(a,c){this._cellscache=[];e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache();if(this._loading)throw Error("jqxGrid: "+this.loadingerrormessage);if(null!=a){for(var b in a)b.toLowerCase()!==b&&(a[b.toLowerCase()]=a[b]);a.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=a.pagergotopagestring);a.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=a.pagershowrowsstring);a.pagerrangestring&&
(this.gridlocalization.pagerrangestring=a.pagerrangestring);a.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=a.pagernextbuttonstring);a.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=a.pagerpreviousbuttonstring);a.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=a.pagerfirstbuttonstring);a.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=a.pagerlastbuttonstring);a.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=
a.groupsheaderstring);a.sortascendingstring&&(this.gridlocalization.sortascendingstring=a.sortascendingstring);a.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=a.sortdescendingstring);a.sortremovestring&&(this.gridlocalization.sortremovestring=a.sortremovestring);a.groupbystring&&(this.gridlocalization.groupbystring=a.groupbystring);a.groupremovestring&&(this.gridlocalization.groupremovestring=a.groupremovestring);a.firstDay&&(this.gridlocalization.firstDay=a.firstDay);a.days&&
(this.gridlocalization.days=a.days);a.months&&(this.gridlocalization.months=a.months);a.AM&&(this.gridlocalization.AM=a.AM);a.PM&&(this.gridlocalization.PM=a.PM);a.patterns&&(this.gridlocalization.patterns=a.patterns);a.percentsymbol&&(this.gridlocalization.percentsymbol=a.percentsymbol);a.currencysymbol&&(this.gridlocalization.currencysymbol=a.currencysymbol);a.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=a.currencysymbolposition);void 0!=a.decimalseparator&&(this.gridlocalization.decimalseparator=
a.decimalseparator);void 0!=a.thousandsseparator&&(this.gridlocalization.thousandsseparator=a.thousandsseparator);a.filterclearstring&&(this.gridlocalization.filterclearstring=a.filterclearstring);a.filterstring&&(this.gridlocalization.filterstring=a.filterstring);a.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=a.filtershowrowstring);a.filtershowrowdatestring&&(this.gridlocalization.filtershowrowdatestring=a.filtershowrowdatestring);a.filterselectallstring&&(this.gridlocalization.filterselectallstring=
a.filterselectallstring);a.filterchoosestring&&(this.gridlocalization.filterchoosestring=a.filterchoosestring);a.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=a.filterorconditionstring);a.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=a.filterandconditionstring);a.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=a.filterstringcomparisonoperators);a.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=
a.filternumericcomparisonoperators);a.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=a.filterdatecomparisonoperators);a.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=a.filterbooleancomparisonoperators);a.emptydatastring&&(this.gridlocalization.emptydatastring=a.emptydatastring);a.filterselectstring&&(this.gridlocalization.filterselectstring=a.filterselectstring);a.todaystring&&(this.gridlocalization.todaystring=a.todaystring);
a.clearstring&&(this.gridlocalization.clearstring=a.clearstring);a.validationstring&&(this.gridlocalization.validationstring=a.validationstring);a.loadtext&&(this.gridlocalization.loadtext=a.loadtext);a.addrowstring&&(this.gridlocalization.addrowstring=a.addrowstring);a.udpaterowstring&&(this.gridlocalization.udpaterowstring=a.udpaterowstring);a.deleterowstring&&(this.gridlocalization.deleterowstring=a.deleterowstring);a.resetrowstring&&(this.gridlocalization.resetrowstring=a.resetrowstring);a.everpresentrowplaceholder&&
(this.gridlocalization.everpresentrowplaceholder=a.everpresentrowplaceholder);if(!1!==c){this._initpager&&this._initpager();this._initgroupsheader&&this._initgroupsheader();this._initmenu&&this._initmenu();this._builddataloadelement();e(this.dataloadelement).css("visibility","hidden");e(this.dataloadelement).css("display","none");if(this.filterable&&this.showfilterrow&&this._updatefilterrow){for(b in this._filterrowcache)e(this._filterrowcache[b]).remove();this._filterrowcache=[];this._updatefilterrow()}this.showaggregates&&
this.refresheaggregates&&this.refresheaggregates();this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},
AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},
percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",
groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filterstring:"Filter",filtershowrowstring:"Show rows where:",filtershowrowdatestring:"Show rows where date:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:"empty;not empty;contains;contains(match case);does not contain;does not contain(match case);starts with;starts with(match case);ends with;ends with(match case);equal;equal(match case);null;not null".split(";"),
filternumericcomparisonoperators:"equal;not equal;less than;less than or equal;greater than;greater than or equal;null;not null".split(";"),filterdatecomparisonoperators:"equal;not equal;less than;less than or equal;greater than;greater than or equal;null;not null".split(";"),filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",
addrowstring:"Add",udpaterowstring:"Update",deleterowstring:"Delete",resetrowstring:"Reset",everpresentrowplaceholder:"Enter "}},_getmenudefaultheight:function(){var a=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(a=3);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(a+=2);var c=this._measureMenuElement(),a=a*c+9;this.filterable&&!this.showfilterrow&&this.showfiltermenuitems&&(a+=190,e.jqx.browser.msie&&8>e.jqx.browser.version&&(a+=20));return a},_initmenu:function(){var a=
this.that;if(this.host.jqxMenu){if(this.gridmenu){if(this._hasOpenedMenu)return;this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel();this.removeHandler(this.gridmenu,"keydown");this.removeHandler(this.gridmenu,"closed");this.removeHandler(this.gridmenu,"itemclick");this.gridmenu.jqxMenu("destroy");this.gridmenu.removeData();this.gridmenu.remove()}this.menuitemsarray=[];var c="";this.isTouchDevice()&&(c="jqx-grid-menu-item-touch");this.gridmenu=e('<div id="gridmenu'+this.element.id+
'" style="z-index: 9999999999999;"></div>');this.host.append(this.gridmenu);var b=e("<ul></ul>"),d=e('<li class="'+c+'"><div class="jqx-grid-sortasc-icon"></div>'+this.gridlocalization.sortascendingstring+"</li>"),g=e('<li class="'+c+'"><div class="jqx-grid-sortdesc-icon"></div>'+this.gridlocalization.sortdescendingstring+"</li>"),f=e('<li class="'+c+'"><div class="jqx-grid-sortremove-icon"></div>'+this.gridlocalization.sortremovestring+"</li>"),k=e('<li class="'+c+'"><div class="jqx-grid-groupby-icon"></div>'+
this.gridlocalization.groupbystring+"</li>"),h=e('<li class="'+c+'"><div class="jqx-grid-groupby-icon"></div>'+this.gridlocalization.groupremovestring+"</li>"),l=e('<li type="separator"></li>'),n=e('<li class="filter '+c+'" style="height: 190px;" ignoretheme="true"><div class="filter"></div></li>'),c=this.gridlocalization.sortascendingstring.length,m=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>c&&(c=this.gridlocalization.sortdescendingstring.length,
m=this.gridlocalization.sortdescendingstring);this.gridlocalization.sortremovestring.length>c&&(c=this.gridlocalization.sortremovestring.length,m=this.gridlocalization.sortremovestring);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>c&&(c=this.gridlocalization.groupbystring.length,m=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>c&&(c=this.gridlocalization.groupremovestring.length,m=this.gridlocalization.groupremovestring));
c=200;m=e.trim(m).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");m=e("<span>"+m+"</span>");m.addClass(this.toThemeProperty("jqx-menu-item"));this.host.append(m);c=m.outerWidth()+60;m.remove();m=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(b.append(d),this.menuitemsarray[0]=d[0],b.append(g),this.menuitemsarray[1]=g[0],b.append(f),this.menuitemsarray[2]=f[0],m=3);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(b.append(k),this.menuitemsarray[3]=k[0],b.append(h),this.menuitemsarray[4]=
h[0],m+=2);var q=this._measureMenuElement(),m=m*q+9,q=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems)if(this._initfilterpanel)this.menuitemsarray[5]=n[0],this.menuitemsarray[6]=n[0],b.append(l),b.append(n),m+=190,e.jqx.browser.msie&&8>e.jqx.browser.version&&(m+=20),this.isTouchDevice()&&(m+=30),l=e(n).find("div:first"),this.excelfilterpanel=e("<div></div>"),this.filterpanel=l,this.filtermenu=e(n),c+=20,this._initfilterpanel(this,l,"",c),this._initfilterpanel(this,this.excelfilterpanel,
"",c,!0),q=!1,this.removeHandler(e(document),"click.menu"+a.element.id,a._closemenuafterclick,a),this.addHandler(e(document),"click.menu"+a.element.id,a._closemenuafterclick,a);else throw Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.gridmenu.append(b);e.jqx.browser.msie&&8>e.jqx.browser.version&&this.filterable&&(e("#listBoxfilter1"+this.element.id).css("z-index",4990),e("#listBoxfilter2"+this.element.id).css("z-index",4990),e("#listBoxfilter3"+this.element.id).css("z-index",4990),
e("#gridmenu"+this.element.id).css("z-index",5E3),this.addHandler(e("#gridmenu"+this.element.id),"initialized",function(){e("#menuWrappergridmenu"+a.element.id).css("z-index",4980)}));void 0==this.menuitemsarray[0]&&(m=65);this.removeHandler(e(window),"orientationchange.jqxgrid"+this.element.id);this.removeHandler(e(window),"orientationchanged.jqxgrid"+this.element.id);this.addHandler(e(window),"orientationchange.jqxgrid"+this.element.id,function(){a.gridmenu.jqxMenu("close")});this.addHandler(e(window),
"orientationchanged.jqxgrid"+this.element.id,function(){a.gridmenu.jqxMenu("close")});this.removeHandler(this.gridmenu,"keydown");this.addHandler(this.gridmenu,"keydown",function(b){if(27==b.keyCode)a.gridmenu.jqxMenu("close");else if(13==b.keyCode&&a.filterable&&a._buildfilter){b="block"==e(e.find("#filter1"+a.element.id)).jqxDropDownList("container").css("display");var c="block"==e(e.find("#filter2"+a.element.id)).jqxDropDownList("container").css("display"),d="block"==e(e.find("#filter3"+a.element.id)).jqxDropDownList("container").css("display");
e(e.find("#filterclearbutton"+a.element.id)).hasClass("jqx-fill-state-focus")?(b=e.data(document.body,"contextmenu"+a.element.id).column,a._clearfilter(a,a.element,b),a.gridmenu.jqxMenu("close")):b||c||d||(b=e.data(document.body,"contextmenu"+a.element.id).column,a.gridmenu.jqxMenu("close"),a._buildfilter(a,n,b))}});"auto"!=this.popupwidth&&(c=this.popupwidth);this.gridmenu.jqxMenu({popupZIndex:999999,width:c,height:m,autoCloseOnClick:q,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,
animationHideDuration:0,animationShowDelay:0});this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",n[0].id,"closeOnClick",!1);if(this.rtl){var p=this.that;e.each(b.find("li"),function(){e(this).addClass(p.toTP("jqx-rtl"))});b=function(a){a=a.find("div");a.css("float","right");a.css("margin-left","4px");a.css("margin-right","-4px")};b(f);b(g);b(d);b(k);b(h)}this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){this.gridmenu||this._initmenu();var a=this.gridlocalization.sortascendingstring.length,
c=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>a&&(a=this.gridlocalization.sortdescendingstring.length,c=this.gridlocalization.sortdescendingstring);this.gridlocalization.sortremovestring.length>a&&(a=this.gridlocalization.sortremovestring.length,c=this.gridlocalization.sortremovestring);this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>a&&(a=this.gridlocalization.groupbystring.length,c=this.gridlocalization.groupbystring),
this.gridlocalization.groupremovestring.length>a&&(c=this.gridlocalization.groupremovestring));c=e.trim(c).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");c=e("<span>"+c+"</span>");c.addClass(this.toThemeProperty("jqx-menu-item"));this.host.append(c);a=c.outerWidth()+60;c.remove();c=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(c=3);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(c+=2);var b=this._measureMenuElement(),c=c*b+9;this.filterable&&this.showfiltermenuitems&&
this._initfilterpanel&&(c+=190,a+=20,e.jqx.browser.msie&&8>e.jqx.browser.version&&(c+=20),this.isTouchDevice()&&(c+=30));void 0==this.menuitemsarray[0]&&(c=65);"auto"!=this.popupwidth&&(a=this.popupwidth);"auto"!=this.popupheight&&(c=this.popupheight);this.gridmenu.jqxMenu({width:a,height:c})},_closemenuafterclick:function(a){var c=null!=a?a.data:this,b=!1;if(void 0==a.target||void 0!=a.target&&void 0==a.target.className.indexOf)c.gridmenu.jqxMenu("close");else if(-1==a.target.className.indexOf("filter")||
-1!=a.target.className.indexOf("jqx-grid-cell-filter"))if(-1!=a.target.className.indexOf("jqx-grid-cell"))c.gridmenu.jqxMenu("close");else if(!c._hasOpenedMenu||!e(a.target).ischildof(c.gridmenu)){c.host.coord();var d=c.gridmenu.coord(),g=a.pageX,f=a.pageY;e.each(e(a.target).parents(),function(){if(null!=this.id&&this.id.indexOf&&-1!=this.id.indexOf("filter")||this.className.indexOf&&-1!=this.className.indexOf("filter")&&-1==this.className.indexOf("jqx-grid-cell-filter"))return b=!0,!1;if(this.className.indexOf&&
-1!=this.className.indexOf("jqx-grid-cell")||this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-column"))return c.gridmenu.jqxMenu("close"),!1});if(!b){try{if("default"===c.filtermode){var k=e(e.find("#filter1"+c.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup,h=new Date;if(100>h-k)return;var l=e(e.find("#filter3"+c.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if(100>h-l||"block"==e(e.find("#filter3"+c.element.id)).jqxDropDownList("container").css("display")||
"block"==e(e.find("#filter1"+c.element.id)).jqxDropDownList("container").css("display")||"block"==e(e.find("#filter2"+c.element.id)).jqxDropDownList("container").css("display")||c._hasdatefilter&&"div"==e(".filtertext1"+c.element.id)[0].nodeName.toLowerCase()&&("block"==e(".filtertext1"+c.element.id).jqxDateTimeInput("container").css("display")||"block"==e(".filtertext2"+c.element.id).jqxDateTimeInput("container").css("display")))return}else{k=e(e.find("#filter1"+c.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup;
h=new Date;if(100>h-k)return;l=e(e.find("#filter1"+c.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup;if(100>h-l)return}}catch(n){}if(!(g>=d.left&&g<=d.left+c.gridmenu.width()&&f>=d.top&&f<=d.top+c.gridmenu.height())){a=!1;if(c.columnmenuclosing&&((a=e.data(document.body,"contextmenu"+c.element.id))||(a={column:{displayfield:null}}),a=c.columnmenuclosing(c.gridmenu,a.column.displayfield,e(c.gridmenu).height()),!1===a))return;c.gridmenu.jqxMenu("close")}}}},_handlemenueevents:function(){var a=
this.that;this.removeHandler(this.gridmenu,"closed");this.addHandler(this.gridmenu,"closed",function(c){a._closemenu()});this.removeHandler(this.gridmenu,"itemclick");this.addHandler(this.gridmenu,"itemclick",function(c){var b=c.args;for(c=0;c<a.menuitemsarray.length;c++)if(b==a.menuitemsarray[c]){if(void 0!=e(b).attr("ignoretheme"))break;var b=e.data(document.body,"contextmenu"+a.element.id),d=b.column;a.filterable&&a.gridmenu.jqxMenu("close");var g=d.displayfield;null==g&&(g=d.datafield);if(null!=
b)switch(c){case 0:a.sortby(g,"ascending",null);break;case 1:a.sortby(g,"descending",null);break;case 2:a.sortby(g,null,null);break;case 3:a.addgroup(g);break;case 4:a.removegroup(g);break;case 5:c=e(a.menuitemsarray[6]),e(c).css("display","block")}break}})},getdatainformation:function(){var a=this.dataview.totalrecords;this.summaryrows&&(a+=this.summaryrows.length);return{rowscount:a,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumn:this.sortcolumn,
sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows();this._updaterowheights();this._updaterowdetails()},_updatehiddenrows:function(){var a=this.that;this.hiddens=[];e.each(this.hiddenboundrows,function(c){void 0!=this.index&&(c=a.getrowvisibleindex(c),a.hiddens[c]=this.hidden)})},_updaterowheights:function(){var a=
this.that;this.heights=[];e.each(this.heightboundrows,function(c){void 0!=this.index&&(c=a.getrowvisibleindex(c),a.heights[c]=this.height)})},_updaterowdetails:function(){var a=this.that;this.details=[];e.each(this.detailboundrows,function(c){void 0!=this.index&&(c=a.getrowvisibleindex(c),a.details[c]=this.details)})},_getmenuitembyindex:function(a){return void 0==a?null:this.menuitemsarray[a]},openmenu:function(a){if(!this._openingmenu){this._openingmenu=!0;this.closemenu();var c=this.getcolumn(a);
if(!c.menu)return!1;this.gridmenu||this._initmenu();var b=c.columnsmenu;e(c.element).trigger("mouseenter");this.menuOwner=c;for(var d=this,c=0;c<d.columns.records.length;c++)d.columns.records[c].datafield!=a&&e(d.columns.records[c].element).trigger("mouseleave");setTimeout(function(){"block"==e(b)[0].style.display&&e(b).trigger("click");d._openingmenu=!1},200)}},closemenu:function(){this._closemenu()},_closemenu:function(){if(this._hasOpenedMenu){var a=!1;if(this.columnmenuclosing){var c=e.data(document.body,
"contextmenu"+this.element.id);c||(c={column:{displayfield:null}});a=this.columnmenuclosing(this.gridmenu,c.column.displayfield,e(this.gridmenu).height());if(!1===a)return}null!=this.gridmenu&&this.gridmenu.jqxMenu("close");c=e.data(document.body,"contextmenu"+this.element.id);null!=c&&this.autoshowcolumnsmenubutton&&(this.enableanimations?(e(c.columnsmenu).animate({"margin-left":0},"fast",function(){e(c.columnsmenu).css("display","none")}),a=this.rtl?0:-32,c.column.iconscontainer.animate({"margin-left":a},
"fast")):(e(c.columnsmenu).css("display","none"),a=this.rtl?0:-32,c.column.iconscontainer.css("margin-left",a)),e.data(document.body,"contextmenu"+this.element.id,null));this._hasOpenedMenu=!1;this.menuOwner=null;var b=this._getmenuitembyindex(5);if(b){var a=e(b).find("#filter1"+this.element.id),d=e(b).find("#filter2"+this.element.id),b=e(b).find("#filter3"+this.element.id);0<a.length&&"default"===this.filtermode&&(a.jqxDropDownList("hideListBox"),0<d.length&&d.jqxDropDownList("hideListBox"),0<b.length&&
b.jqxDropDownList("hideListBox"))}}},scrolloffset:function(a,c){null!=a&&null!=c&&void 0!=a&&void 0!=c&&(this.vScrollBar.jqxScrollBar("setPosition",a),this.hScrollBar.jqxScrollBar("setPosition",c))},scrollleft:function(a){null!=a&&void 0!=a&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",a)},scrolltop:function(a){null!=a&&void 0!=a&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",a)},beginupdate:function(a,c){this._updating=
!0;this._datachanged=!1;!0===a&&(this._batchupdate=!0);!0===c&&(this._stopbindings=!0)},endupdate:function(){this.resumeupdate()},resumeupdate:function(){this._updating=!1;if(this._batchupdate)this._datachanged=this._batchupdate=!1,this._stopbindings?this.updatebounddata():this.render();else if(this._stopbindings)this.updatebounddata("data");else{if(1==this._datachanged){var a=this.vScrollInstance.value;this.render(!0,!0,!1);this._datachanged=!1;0!=a&&a<this.vScrollInstance.max&&this.scrolltop(a)}else this.rendergridcontent(!0),
this._renderrows(this.virtualsizeinfo);this.showaggregates&&this.renderaggregates&&this.renderaggregates();this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo)}},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement());this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height());e(this.dataloadelement).css("visibility","visible");e(this.dataloadelement).css("display",
"block")},hideloadelement:function(){e(this.dataloadelement).css("visibility","hidden");e(this.dataloadelement).css("display","none")},_updatefocusedfilter:function(){var a=this.that;a.focusedfilter&&(a.focusedfilter.focus(),setTimeout(function(){a.focusedfilter.focus();if("input"==a.focusedfilter[0].nodeName.toLowerCase()){var c=a.focusedfilter.val().length;try{if("selectionStart"in a.focusedfilter[0])a.focusedfilter[0].setSelectionRange(c,c);else{var b=a.focusedfilter[0].createTextRange();b.collapse(!0);
b.moveEnd("character",c);b.moveStart("character",c);b.select()}}catch(d){}}},50))},databind:function(a,c){if(!0!==this.loadingstate&&!0!==this._stopbindings){var b=window;"block"==this.host.css("display")&&(this.autoshowloadelement?(e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display",
"none")));!this._initgroupsheader&&0<this.groups.length&&(this.groups=[]);var d=this.that;null==a&&(a={});a.recordstartindex||(a.recordstartindex=0);a.recordendindex||(a.recordendindex=0);if(void 0==a.loadallrecords||null==a.loadallrecords)a.loadallrecords=!0;if(void 0==a.sortcomparer||null==a.sortcomparer)a.sortcomparer=null;if(void 0==a.filter||null==a.filter)a.filter=null;if(void 0==a.sort||null==a.sort)a.sort=null;if(void 0==a.data||null==a.data)a.data=null;var g=null;null!=a&&(g=void 0!=a._source?
a._source.url:a.url);this.dataview=this.dataview||new e.jqx.dataview;e.jqx.dataview.sort&&e.extend(this.dataview,new e.jqx.dataview.sort);e.jqx.dataview.grouping&&e.extend(this.dataview,new e.jqx.dataview.grouping);this.dataview.suspendupdate();this.dataview.pageable=this.pageable;this.dataview.groupable=this.groupable;this.dataview.groups=this.groups;this.dataview.virtualmode=this.virtualmode;this.dataview.grid=this;this.dataview._clearcaches();!this.pageable&&this.virtualmode&&(this.loadondemand=
!0);if(!d.initializedcall){if(a._source&&this.sortable&&(void 0!=a._source.sortcolumn&&(this.sortcolumn=a._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=a._source.sortcolumn,a._source.sortcolumn=null),void 0!=a._source.sortdirection)){var f=this.dataview.sortfielddirection=a._source.sortdirection,k="a"==f||"asc"==f||"ascending"==f||1==f?!0:!1;this.sortdirection=null!=f?{ascending:k,descending:!k}:{ascending:!1,descending:!1}}this.pageable&&a._source&&(void 0!=a._source.pagenum&&
(this.dataview.pagenum=a._source.pagenum),void 0!=a._source.pagesize?(this.pagesize=a._source.pagesize,this.dataview.pagesize=a._source.pagesize):(this.dataview.pagesize=a._source.pagesize,void 0==this.dataview.pagesize&&(this.dataview.pagesize=this.pagesize)));this.sortable&&(a.sortcolumn&&(this.dataview.sortfield=a.sortcolumn),a.sortdirection&&(this.dataview.sortfielddirection=a.sortdirection));this.filterable&&this.columns&&e.each(this.columns,function(){this.filter&&d.dataview.addfilter(this.datafield,
this.filter)})}this._loading=!0;this.dataview.update=function(a){!d.pageable&&d.virtualmode&&(d.loadondemand=!0);d._loading=!1;d.dataview.isupdating()&&d.dataview.resumeupdate(!1);if(d.pageable&&d.pagerrenderer)if(d._initpager)d._initpager();else throw Error("jqxGrid: Missing reference to jqxgrid.pager.js.");if(d.source&&d.source.sortcolumn&&d.sortby&&!d.virtualmode)d.render(),d.source._source.sort||d.sortby(d.source.sortcolumn,d.source.sortdirection,d.source.sortcomparer),d.source.sortcolumn=null,
d._postrender("data");else{var g=d.vScrollInstance.value,f=d.hScrollInstance.value,h=d.source?d.source.datatype:"array";if("local"!=h||"array"!=h){h=null==d.virtualsizeinfo||null!=d.virtualsizeinfo&&0==d.virtualsizeinfo.virtualheight;if("cells"==c){var k=!1;d.filterable&&d._initfilterpanel&&d.dataview.filters.length&&(k=!0);if(0==a){d.vScrollInstance.isScrolling()||d.hScrollInstance.isScrolling()||(d._cellscache=[],d._pagescache=[],d._renderrows(d.virtualsizeinfo),d.showfilterrow&&d.filterable&&d.filterrow&&
d._updatelistfilters(!0),d.showaggregates&&d._updateaggregates&&d._updateaggregates());d.sortcolumn&&d.sortby(d.sortcolumn,d.dataview.sortfielddirection,d.source.sortcomparer);d.autoshowloadelement&&(e(d.dataloadelement).css("visibility","hidden"),e(d.dataloadelement).css("display","none"));d.virtualmode&&!d._loading&&(d.loadondemand=!0,d._renderrows(d.virtualsizeinfo));d._postrender("data");return}k?c="filter":void 0!=d.sortcolumn&&(c="sort")}!d.virtualmode||h||d.virtualmode&&d.pageable?1==d.initializedcall&&
"pagechanged"==c?(g=0,d.groupable&&0<d.groups.length?(d._render(!0,!0,!1,!1,!1),d._updatecolumnwidths(),d._updatecellwidths(),d._renderrows(d.virtualsizeinfo),d._postrender("data")):(d.rendergridcontent(!0),d.pageable&&d.updatepagerdetails&&(d.updatepagerdetails(),d.autoheight?(d._updatepageviews(),d.autorowheight&&d._renderrows(this.virtualsizeinfo)):d.autorowheight&&(d._updatepageviews(),d._renderrows(this.virtualsizeinfo)))),d.showaggregates&&d._updateaggregates&&d._updateaggregates(),d._postrender("data")):
"filter"==c?(d._render(!0,!0,!1,!1,!1),d._updatecolumnwidths(),d._updatecellwidths(),d._renderrows(d.virtualsizeinfo),d._updatefocusedfilter(),d._postrender("data")):"sort"==c?(d.virtualmode?(d.rendergridcontent(!0),d.showaggregates&&d._updateaggregates&&d._updateaggregates()):(d._render(!0,!0,!1,!1,!1),d.sortcolumn&&!d.source.sort&&d.sortby(d.sortcolumn,d.dataview.sortfielddirection,d.source.sortcomparer)),d._postrender("data"),d.source.sort&&d._updatefocusedfilter()):("data"==c?d._render(!0,!0,
!1,!1,!1):"state"==c?d._render(!0,!0,!1,d.menuitemsarray&&0<d.menuitemsarray.length&&!d.virtualmode):d._render(!0,!0,!0,d.menuitemsarray&&0<d.menuitemsarray.length&&!d.virtualmode),d._postrender("data")):(d.virtualmode&&1==a&&!d.pageable?(d._render(!0,!0,!1,!1,!1),d._updatefocusedfilter(),d._updatecolumnwidths(),d._updatecellwidths(),d._renderrows(d.virtualsizeinfo)):d.virtualmode&&!d.pageable&&0==a&&void 0!=c?(d.rendergridcontent(!0),d.showaggregates&&d._updateaggregates&&d._updateaggregates()):
d.virtualmode&&0==d.dataview.totalrecords&&0<d.dataview.filters.length?d._render(!0,!0,!0,d.menuitemsarray&&!d.virtualmode):(d._pagescache=[],d._renderrows(d.virtualsizeinfo)),d._postrender("data"));d.vScrollInstance.value!=g&&g<=d.vScrollInstance.max&&d.vScrollInstance.setPosition(g);d.hScrollInstance.value!=f&&f<=d.hScrollInstance.max&&d.hScrollInstance.setPosition(f)}}d.autoshowloadelement&&(e(d.dataloadelement).css("visibility","hidden"),e(d.dataloadelement).css("display","none"));d.pageable&&
(d.pagerrightbutton&&(d.pagerrightbutton.jqxButton({disabled:!1}),d.pagerleftbutton.jqxButton({disabled:!1}),d.pagershowrowscombo.jqxDropDownList({disabled:!1})),d.pagerfirstbutton&&(d.pagerfirstbutton.jqxButton({disabled:!1}),d.pagerlastbutton.jqxButton({disabled:!1})));d._raiseEvent(11);if(d.initializedcall)d._updateTouchScrolling();else{var p=function(){d._raiseEvent(0);d.initializedcall=!0;d.isInitialized=!0;d.ready&&d.ready();d.renderstatusbar&&d.renderstatusbar(d.statusbar);d.rendertoolbar&&
d.rendertoolbar(d.toolbar);d._rendercelltexts&&d._rendercelltexts();if(d._gridRenderElement){e(d._gridRenderElement).show("slow");var a=6E3+Math.floor(4E3*Math.random()+1),c=String.fromCharCode(83,69,84).toLowerCase()+"-"+String.fromCharCode(84,73,77,69,79,85,84).toLowerCase();b[e.camelCase(c)](function(){e(d._gridRenderElement).hide("slow",function(){e(d._gridRenderElement).remove()})},a)}d.autoloadstate&&d.loadstate&&d.loadstate(null,!0)};e.jqx.isHidden(d.host)?(d.readyInterval&&clearInterval(d.readyInterval),
d.readyInterval=setInterval(function(){!e.jqx.isHidden(d.host)&&d.__isRendered&&(clearInterval(d.readyInterval),d.readyInterval=null,p(),d._initmenu())},200)):p();null!=d.width&&-1!=d.width.toString().indexOf("%")||null!=d.height&&d.height.toString().indexOf("%");"hidden"==d.host.css("visibility")&&("visible"==d.vScrollBar.css("visibility")&&d.vScrollBar.css("visibility","inherit"),d.autowidth||"visible"==d.hScrollBar.css("visibility")&&d.hScrollBar.css("visibility","inherit"),d._intervalTimer=setInterval(function(){"visible"==
d.host.css("visibility")&&(d._updatesize(!0),clearInterval(d._intervalTimer))},100))}};this.dataview.databind(a);this.dataview.isupdating()&&(void 0!=g?this.dataview.suspend=!1:this.dataview.resumeupdate(!1));this._initializeRows()}},scrollto:function(a,c){void 0!=a&&this.hScrollInstance.setPosition(a);void 0!=c&&this.vScrollInstance.setPosition(c)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(a){if(this.autoheight&&!this.pageable)return!0;
var c=this._getpagesize(),b=Math.floor(a/c);this._pageviews[b]||this.pageable||this._updatepageviews();if(this.groupable&&0<this.groups.length)return!0;var d=!1;if(this.pageable&&this.gotopage&&!this.virtualmode&&(b=Math.floor(a/c),this.dataview.pagenum!=b)){if(this.groupable&&0<this.groups.length)return!0;this.gotopage(b);d=!0}var e=this.vScrollInstance.value,f=this._gettableheight()-this.rowsheight,k;k=Math.round(c*(a/c-b));if(this._pageviews[b]){var h=this._pageviews[b].top+k*this.rowsheight;if(this.rowdetails)for(var l=
c*b;l<a;l++)this.details[l]&&0==this.details[l].rowdetailshidden&&(h+=this.details[l].rowdetailsheight);"deferred"==this.scrollmode&&this.vScrollInstance.max<=h+this.rowsheight&&(h=this.vScrollInstance.max);h<e?(this.scrolltop(h),d=!0):h>e+f+2&&(this.scrolltop(h-f),d=!0)}else if(this.pageable){h=k*this.rowsheight;if(this.rowdetails)for(l=c*b;l<c*b+k;l++)this.details[l]&&0==this.details[l].rowdetailshidden&&(h+=this.details[l].rowdetailsheight);if(h<e||h>e+f)this.scrollto(0,h),d=!0}return d},ensurecellvisible:function(a,
c){var b=this.that,d=this.hScrollBar.jqxScrollBar("value"),g=b.hScrollInstance.max;b.rtl&&"visible"!=this.hScrollBar.css("visibility")&&(g=0);var f=this.ensurerowvisible(a),k=0;if(this.columns.records){if("hidden"==this.hScrollBar.css("visibility"))return;var h=this.host.width(),l=0,n="visible"==this.vScrollBar.css("visibility")?20:0,m=!1;e.each(this.columns.records,function(){if(this.hidden)return!0;if(this.datafield==c){var a;a=b.rtl?g-d:d;k+this.width>a+h-n?(a=k+this.width-h+n,b.rtl&&(a=g-a),b.scrollleft(a),
m=!0):k<=a&&(a=k-this.width,b.rtl&&(a=g-a),b.scrollleft(a),m=!0);0==l?(b.rtl?b.scrollleft(g):b.scrollleft(0),m=!0):l==b.columns.records.length-1&&"visible"==b.hScrollBar.css("visibility")&&(b.rtl?b.scrollleft(b.hScrollBar.jqxScrollBar("min")):b.scrollleft(b.hScrollBar.jqxScrollBar("max")),m=!0);return!1}l++;k+=this.width});m||b.scrollleft(d)}return f},setrowheight:function(a,c){if(this._loading)throw Error("jqxGrid: "+this.loadingerrormessage);if(null==a||null==c)return!1;this.heightboundrows[a]=
{index:a,height:c};a=this.getrowvisibleindex(a);if(0>a)return!1;this.rows.records[a]?this.rows.records[a].height=c:(row=new v(this,null),row.height=c,this.rows.replace(a,row));this.heights[a]=c;this.rendergridcontent(!0);return!0},getrowheight:function(a){if(null==a)return null;a=this.getrowvisibleindex(a);if(0>a)return!1;if(this.rows.records[a])return this.rows.records[a].height},setrowdetails:function(a,c,b,d){if(!(void 0==a||null==a||0>a)){var g=a+"_";this._rowdetailscache[g]&&(e(this._rowdetailscache[g].element).remove(),
this._rowdetailscache[g]=null);g=this.dataview.generatekey();this.detailboundrows[a]={index:a,details:{rowdetails:c,rowdetailsheight:b,rowdetailshidden:d,key:g}};a=this.getrowvisibleindex(a);return 0>a?!1:this._setrowdetails(a,c,b,d,g)}},getcolumn:function(a){var c=null;this.columns.records?e.each(this.columns.records,function(){if(this.datafield==a||this.displayfield==a)return c=this,!1}):this.columns&&e.each(this.columns,function(){if(this.datafield==a||this.displayfield==a)return c=this,!1});return c},
_getcolumnindex:function(a){var c=-1;this.columns.records&&e.each(this.columns.records,function(){c++;if(this.datafield==a)return!1});return c},_getcolumnat:function(a){return this.columns.records[a]},_getprevvisiblecolumn:function(a){for(var c=this.that;0<a;){a--;var b=c.getcolumnat(a);if(!b)break;if(!b.hidden)return b}return null},_getnextvisiblecolumn:function(a){for(var c=this.that;a<this.columns.records.length;){a++;var b=c.getcolumnat(a);if(!b)break;if(!b.hidden)return b}return null},getcolumnat:function(a){return isNaN(a)?
null:this.columns.records[a]},_getcolumn:function(a){var c=null;e.each(this._columns,function(){if(this.datafield==a||this.displayfield==a)return c=this,!1});return c},_setcolumnproperty:function(a,c,b){if(null==a||null==c||null==b)return null;c=c.toLowerCase();var d=this.getcolumn(a);if(null!=d){var e=d[c];d[c]=b;a=this._getcolumn(a);null!=a&&(a[c]=b);this._cellscache=[];switch(c){case "filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case "text":this.prerenderrequired=
!0;this._rendercolumnheaders();this._updatecellwidths();this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader();this._renderrows(this.virtualsizeinfo);this.filterable&&this.showfilterrow&&this.refreshfilterrow();break;case "editable":case "resizable":case "draggable":if("editable"==c&&b!=e){null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0);if("checkbox"==d.columntype&&(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this.updating())||
this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case "hidden":case "hideable":case "renderer":case "cellsrenderer":case "align":case "aggregates":case "cellsalign":case "cellsformat":case "pinned":case "contenttype":case "filterable":case "groupable":case "cellclass":case "cellclassname":case "classname":case "class":this.prerenderrequired=!0;"pinned"==c&&(this._initializeColumns(),this._preparecolumngroups());this.rendergridcontent(!0);if(this.updating())return!1;"hidden"==
c&&(this._updatecolumnwidths(),this._updatecellwidths());this._renderrows(this.virtualsizeinfo);this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case "width":case "minwidth":case "maxwidth":if(this.updating())return!1;d._width=null;d._percentagewidth=null;this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo)}}},_getcolumnproperty:function(a,c){if(null==a||null==c)return null;c=c.toLowerCase();return this.getcolumn(a)[c]},setcolumnproperty:function(a,
c,b){this._setcolumnproperty(a,c,b)},getcolumnproperty:function(a,c){return this._getcolumnproperty(a,c)},hidecolumn:function(a){this._setcolumnproperty(a,"hidden",!0)},showcolumn:function(a){this._setcolumnproperty(a,"hidden",!1)},iscolumnvisible:function(a){return!this._getcolumnproperty(a,"hidden")},pincolumn:function(a){this._setcolumnproperty(a,"pinned",!0)},unpincolumn:function(a){this._setcolumnproperty(a,"pinned",!1)},iscolumnpinned:function(a){return this._getcolumnproperty(a,"pinned")},
_setrowdetails:function(a,c,b,d,e){0==b&&(b=100);if(null==a||null==b)return!1;if(null!=e)this.details[a]={rowdetails:c,rowdetailsheight:b,rowdetailshidden:d,detailskey:e};else{e=null!=this.details[a]?this.details[a].detailskey:null;c={rowdetails:c,rowdetailsheight:b,rowdetailshidden:d,detailskey:e};for(b=0;b<this.detailboundrows.length;b++)if(void 0!=this.detailboundrows[b]&&(d=this.detailboundrows[b],d.details.detailskey==e)){d.details.rowdetailsheight=c.rowdetailsheight;d.details.rowdetailshidden=
c.rowdetailshidden;d.details.rowdetails=c.rowdetails;break}this.details[a]=c}if(!this._detailsUpdate)return this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0},getrowdetails:function(a){if(null==a)return!1;a=this.getrowvisibleindex(a);return this._getrowdetails(a)},_getrowdetails:function(a){if(null==a||0>a)return!1;if(this.details[a])return this.details[a];if(this.rowdetailstemplate)return this.rowdetailstemplate},getrecordscount:function(){return this.dataview.totalrecords},
showrowdetails:function(a){if(this._loading)throw Error("jqxGrid: "+this.loadingerrormessage);if(null==a)return!1;this.detailsVisibility||(this.detailsVisibility=[]);this.detailsVisibility[a]=!1;a=this.getrowvisibleindex(a);if(0>a)return!1;var c=this._getrowdetails(a);return this._setrowdetailsvisibility(a,c,!1)},hiderowdetails:function(a){if(this._loading)throw Error("jqxGrid: "+this.loadingerrormessage);this.detailsVisibility||(this.detailsVisibility=[]);this.detailsVisibility[a]=!0;a=this.getrowvisibleindex(a);
if(0>a)return!1;var c=this._getrowdetails(a);return this._setrowdetailsvisibility(a,c,!0)},_togglerowdetails:function(a){this.detailsVisibility||(this.detailsVisibility=[]);var c=a.visibleindex,b=this._getrowdetails(c);if(null!=b){var d=this.vScrollInstance.value,e=!b.rowdetailshidden;a=this.getboundindex(a);void 0!=a&&(this.detailsVisibility[a]=e);c=this._setrowdetailsvisibility(c,b,e);0!==d&&"hidden"!==this.vScrollBar.css("visibility")&&(d<=this.vScrollInstance.max?this.vScrollInstance.setPosition(d):
this.vScrollInstance.setPosition(this.vScrollInstance.max));return c}return!1},_setrowdetailsvisibility:function(a,c,b){if(this.rowdetailstemplate&&(this.details||(this.details=[]),!this.details[a])){this.details[a]={rowdetailshidden:this.rowdetailstemplate.rowdetailshidden,rowdetailsheight:this.rowdetailstemplate.rowdetailsheight,rowdetails:this.rowdetailstemplate.rowdetails};var d=this.dataview.generatekey();this.details[a].detailskey=d;this.detailboundrows[a]={index:a,details:this.details[a]}}if(null!=
c)this.details[a].rowdetailshidden=b;else return!1;c=this.details[a];b?this._raiseEvent(21,{rowindex:a,details:c.rowdetails,height:c.rowdetailsheight}):this._raiseEvent(20,{rowindex:a,details:c.rowdetails,height:c.rowdetailsheight});return this._setrowdetails(a,c.rowdetails,c.rowdetailsheight,c.rowdetailshidden)},getrowvisibleindex:function(a){return void 0==a||null==a||0>a?!1:this.virtualmode?(a=this.dataview.loadedrecords[a],void 0==a?-1:a.visibleindex):this.getrowdisplayindex(a)},hiderow:function(a){if(this._loading)throw Error("jqxGrid: "+
this.loadingerrormessage);if(void 0==a||null==a||0>a||null==a)return!1;this.hiddenboundrows[a]={index:a,hidden:!0};a=this.getrowvisibleindex(a);return this._setrowvisibility(a,!0)},showrow:function(a){if(this._loading)throw Error("jqxGrid: "+this.loadingerrormessage);if(void 0==a||null==a||0>a||null==a)return!1;this.hiddenboundrows[a]={index:a,hidden:!1};a=this.getrowvisibleindex(a);return this._setrowvisibility(a,!1)},isrowhiddenat:function(a){if(null==a)return null;a=this.getrowvisibleindex(a);
if(this.rows.records[a])return this.rows.records[a].hidden},_setrowvisibility:function(a,c,b){if(null==a)return!1;this.hiddens[a]=c;return void 0==b||b?(this.rendergridcontent(!0),!0):!1},_loadrows:function(){if(this._pageviews[this.dataview.pagenum]||this.pageable){var a=this.pageable?0:this._pageviews[this.dataview.pagenum].top;if(!this.pageable&&void 0!=this._pagescache[this.dataview.pagenum])return null;if(this.virtualsizeinfo){var c=this.that,b=[],d=[],e=c.groupable&&0<c.groups.length,f=0;this.rows.beginupdate();
var k=this.dataview.pagesize;this.pageable&&e&&(k=this.dataview.rows.length);for(var h=0;h<k&&!(h>=this.dataview.rows.length);h++){var l=this.dataview.rows[h],n;c.rows.records[l.visibleindex]?(n=c.rows.records[l.visibleindex],n.setdata(l)):n=new v(c,l);n.hidden=this.hiddens[n.visibleindex];this.rowdetailstemplate&&(n.rowdetails=this.rowdetailstemplate.rowdetails,n.rowdetailsheight=this.rowdetailstemplate.rowdetailsheight,n.rowdetailshidden=this.rowdetailstemplate.rowdetailshidden);var m=this.details[n.visibleindex];
m?(n.rowdetails=m.rowdetails,n.rowdetailsheight=m.rowdetailsheight,n.rowdetailshidden=m.rowdetailshidden):this.rowdetailstemplate||(n.rowdetails=null);if(e&&this.pageable&&null!=n.parentbounddata){m=b[n.parentbounddata.uniqueid];if(null!=m){var q=this._findgroupstate(m.uniqueid);this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,n.parentbounddata,!q,!1);n.hidden=this.hiddens[n.visibleindex]}null!=m&&void 0!=m&&(n.parentrow=m,m.subrows[m.subrows.length++]=n)}n.hidden||(l=l.visibleindex,
this.heights[l]||(this.heights[l]=this.rowsheight),n.height=this.heights[l],this.rowdetails&&n.rowdetails&&!n.rowdetailshidden&&(n.height+=n.rowdetailsheight),b[n.uniqueid]=n,d[f++]=n,n.top=a,a+=n.height,c.rows.replace(l,n))}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&0<this._pageviews.length&&(this._pageviews[0].height=a);this.rows.resumeupdate();0<d.length&&(this._pagescache[this.dataview.pagenum]=d)}}},_updateaddnewrowui:function(a){for(var c="bottom"!=this.everpresentrowposition?
this.addnewrowtop:this.addnewrowbottom,b=this.columns.records.length,d=a=0;d<b;d++){var g=this.columns.records[d];g.addnewrowwidget&&g.addnewrowwidget.detach()}for(d=0;d<b;d++){var g=this.columns.records[d],f=g.width;f<g.minwidth&&(f=g.minwidth);f>g.maxwidth&&(f=g.maxwidth);var k=e(c[0].cells[d]);k.css("left",a);k.width();k.width(f);k[0].left=a;g.addnewrowwidget&&(k.html(""),k.append(g.addnewrowwidget));g.hidden&&g.hideable?k.css("display","none"):a+=f}b=this.everpresentrowactions.split(" ");this.addnewrowbutton.show();
this.addnewrowupdatebutton.show();this.addnewrowresetbutton.show();this.addnewrowdeletebutton.show();-1==b.indexOf("add")&&-1==b.indexOf("addBottom")&&this.addnewrowbutton.hide();-1==b.indexOf("update")&&this.addnewrowupdatebutton.hide();-1==b.indexOf("reset")&&this.addnewrowresetbutton.hide();-1==b.indexOf("delete")&&this.addnewrowdeletebutton.hide();c=e(c.children()[0]);c.width(parseInt(a)+2);c.height(this.everpresentrowheight);c.css("max-height",this.everpresentrowheight+"px")},_removeaddnewrow:function(){for(var a=
this.columns.records.length,c=0;c<a;c++){var b=this.columns.records[c];b.addnewrowwidget&&(b.destroyeverpresentrowwidget?b.destroyeverpresentrowwidget(b.addnewrowwidget):b.addnewrowwidget.remove(),b.addnewrowwidget=null)}this.addnewrowbutton&&this.addnewrowbutton.remove();this.addnewrowupdatebutton&&this.addnewrowupdatebutton.remove();this.addnewrowdeletebutton&&this.addnewrowdeletebutton.remove();this.addnewrowresetbutton&&this.addnewrowresetbutton.remove();this.addnewrowpopup&&(this.addnewrowpopup.remove(),
this.addnewrowpopup=null);this.addnewrowtop&&(this.addnewrowtop.remove(),this.addnewrowtop=null);this.addnewrowbottom&&(this.addnewrowbottom.remove(),this.addnewrowbottom=null)},_updateaddnewrow:function(){var a=this,c="bottom"!=a.everpresentrowposition?a.addnewrowtop:a.addnewrowbottom,b=e('<div style="position: relative;" id="row000'+a.element.id+'"></div>'),d=0,g=a.columns.records.length,f=a.toThemeProperty("jqx-grid-cell"),f=f+(" "+a.toThemeProperty("jqx-grid-cell-add-new-row")),f=f+(" "+a.toThemeProperty("jqx-grid-cell-filter-row")),
k=g+10,h=[];c[0].cells=h;b.height(a.everpresentrowheight);a.showfilterrow||"bottom"==a.everpresentrowposition?a.showfilterrow&&"bottom"!=a.everpresentrowposition&&c.css("max-height",a.everpresentrowheight-3+"px"):c.css("max-height",a.everpresentrowheight-1+"px");b.css("max-height",a.everpresentrowheight+"px");c.append(b);var l=e("<div style='border-width: 1px; border-style: solid; padding: 5px; z-index: 99999; display: none; position: absolute;'><div>").appendTo(e(document.body)),n=e("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+
a.gridlocalization.addrowstring+"</button>"),m=e("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+a.gridlocalization.udpaterowstring+"</button>"),q=e("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+a.gridlocalization.deleterowstring+"</button>"),p=e("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+a.gridlocalization.resetrowstring+"</button>");
l.addClass(a.toThemeProperty("jqx-popup"));l.addClass(a.toThemeProperty("jqx-rc-all"));l.addClass(a.toThemeProperty("jqx-fill-state-normal"));l.addClass(a.toThemeProperty("jqx-shadow"));l.append(n);l.append(m);l.append(q);l.append(p);var t=a.everpresentrowactions.split(" ");-1==t.indexOf("add")&&-1==t.indexOf("addBottom")&&n.hide();-1==t.indexOf("update")&&m.hide();-1==t.indexOf("reset")&&p.hide();-1==t.indexOf("delete")&&q.hide();a.addnewrowpopup=l;a.addnewrowbutton=n;a.addnewrowupdatebutton=m;a.addnewrowdeletebutton=
q;a.addnewrowresetbutton=p;n.jqxButton({template:"success",theme:a.theme});q.jqxButton({template:"danger",theme:a.theme});m.jqxButton({template:"primary",theme:a.theme});p.jqxButton({template:"warning",theme:a.theme});m.mousedown(function(b){for(var c={},d={},e=0;e<g;e++){var f=a.columns.records[e];if(f.geteverpresentrowwidgetvalue){var h=f.geteverpresentrowwidgetvalue(f.displayfield,f.addnewrowwidget);d[f.datafield]=h;f.datafield!=f.displayfield&&(d[f.datafield]=h.value,d[f.displayfield]=h.label)}}for(var m=
!1,e=0;e<g;e++)if(f=a.columns.records[e],f.geteverpresentrowwidgetvalue){h=f.geteverpresentrowwidgetvalue(f.displayfield,f.addnewrowwidget);if(f.createeverpresentrowwidget&&f.validateeverpresentrowwidgetvalue){var k=f.validateeverpresentrowwidgetvalue(f.displayfield,h,d),n=a.gridlocalization.validationstring;void 0!=k.message&&(n=k.message);("boolean"==typeof k?k:k.result)?(f.addnewrowwidget.attr("title",""),f.addnewrowwidget.removeClass(a.toThemeProperty("jqx-input-invalid"))):(h="invalid editor state",
f.addnewrowwidget.attr("title",n),f.addnewrowwidget.addClass(a.toThemeProperty("jqx-input-invalid")))}"invalid editor state"===h&&(b.preventDefault(),b.stopPropagation(),m=!0)}if(!m){for(e=0;e<g;e++)f=a.columns.records[e],f.geteverpresentrowwidgetvalue&&(h=f.geteverpresentrowwidgetvalue(f.displayfield,f.addnewrowwidget),c[f.datafield]=h,f.datafield!=f.displayfield&&(c[f.datafield]=h.value,c[f.displayfield]=h.label),f.reseteverpresentrowwidgetvalue&&f.reseteverpresentrowwidgetvalue(f.displayfield,
f.addnewrowwidget));if(0<a.selectedcells.length||0<a.selectedrowindexes.length)b=0<=a.selectionmode.indexOf("cell")?a.getselectedcells()[0].rowindex:a.selectedrowindexes[0],(rowData=a.getrowdata(b))&&a.updaterow(rowData.uid,c)}l.hide();a.focus()});q.mousedown(function(b){if(0<a.selectedcells.length||0<a.selectedrowindexes.length)b=0<=a.selectionmode.indexOf("cell")?a.getselectedcells()[0].rowindex:a.selectedrowindexes[0],(rowData=a.getrowdata(b))&&a.deleterow(rowData.uid);for(b=0;b<g;b++){var c=a.columns.records[b];
c.reseteverpresentrowwidgetvalue&&c.reseteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget)}l.hide();a.focus();a.updateeverpresentrow()});n.mousedown(function(b){for(var c={},d={},e=0;e<g;e++){var f=a.columns.records[e];if(f.geteverpresentrowwidgetvalue){var h=f.geteverpresentrowwidgetvalue(f.displayfield,f.addnewrowwidget);d[f.datafield]=h;f.datafield!=f.displayfield&&(d[f.datafield]=h.value,d[f.displayfield]=h.label);f.datafield!=f.displayfield&&(d[f.datafield]=h.label,d[f.displayfield]=
h.value)}}for(var m=!1,e=0;e<g;e++)if(f=a.columns.records[e],f.geteverpresentrowwidgetvalue){h=f.geteverpresentrowwidgetvalue(f.displayfield,f.addnewrowwidget);if(f.createeverpresentrowwidget&&f.validateeverpresentrowwidgetvalue){var k=f.validateeverpresentrowwidgetvalue(f.displayfield,h,d),n=a.gridlocalization.validationstring;void 0!=k.message&&(n=k.message);("boolean"==typeof k?k:k.result)?(f.addnewrowwidget.attr("title",""),f.addnewrowwidget.removeClass(a.toThemeProperty("jqx-input-invalid"))):
(h="invalid editor state",f.addnewrowwidget.attr("title",n),f.addnewrowwidget.addClass(a.toThemeProperty("jqx-input-invalid")))}"invalid editor state"===h&&(b.preventDefault(),b.stopPropagation(),m=!0)}if(!m){for(e=0;e<g;e++)f=a.columns.records[e],f.geteverpresentrowwidgetvalue&&(h=f.geteverpresentrowwidgetvalue(f.displayfield,f.addnewrowwidget),c[f.datafield]=h,f.datafield!=f.displayfield&&(d[f.datafield]=h.label,d[f.displayfield]=h.value),f.reseteverpresentrowwidgetvalue&&f.reseteverpresentrowwidgetvalue(f.displayfield,
f.addnewrowwidget));b=0<=a.everpresentrowactions.indexOf("addBottom")?"last":"first";a.addrow(null,c,b)}l.hide();a.focus()});p.mousedown(function(b){for(b=0;b<g;b++){var c=a.columns.records[b];c.reseteverpresentrowwidgetvalue&&c.reseteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget);c.addnewrowwidget&&(c.addnewrowwidget.attr("title",""),c.addnewrowwidget.removeClass(a.toThemeProperty("jqx-input-invalid")))}l.hide();a.focus()});for(t=0;t<g;t++){var r=a.columns.records[t],u=r.width;u<r.minwidth&&
(u=r.minwidth);u>r.maxwidth&&(u=r.maxwidth);var A=e('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+f+'"></div>');b.append(A);A.css("left",d);a.rtl?(A.css("z-index",k++),A.css("border-left-width","1px")):A.css("z-index",k--);"auto"==u&&(u=0);A[0].style.width=parseFloat(u)+"px";A[0].left=d;r.hidden&&r.hideable?A.css("display","none"):d+=u;h[h.length]=A[0];if(r.checkboxcolumn)r=a.toThemeProperty("jqx-grid-cell"),r+=" "+a.toThemeProperty("jqx-grid-cell-filter-row"),r+=" "+
a.toThemeProperty("jqx-grid-cell-pinned"),A.removeClass().addClass(r);else{u=!0;if(a.rtl)a.groupable&&(C=a.showrowdetailscolumn&&a.rowdetails?1:0,a.groups.length+C+t>g-1&&(u=!1)),a.showrowdetailscolumn&&a.rowdetails&&t==g-1&&(u=!1);else{if(a.groupable){var C=a.showrowdetailscolumn&&a.rowdetails?1:0;a.groups.length+C>t&&(u=!1)}a.showrowdetailscolumn&&a.rowdetails&&0==t&&(u=!1)}a.updateeverpresentrow=function(){var b=null;if(0<a.selectedcells.length||0<a.selectedrowindexes.length)var c=0<=a.selectionmode.indexOf("cell")?
a.getselectedcells()[0].rowindex:a.selectedrowindexes[0],b=a.getrowdata(c);if(b)for(b=0;b<a.columns.records.length;b++){var d=a.columns.records[b];if(d.seteverpresentrowwidgetvalue){var e=a.getcelltext(c,d.displayfield);d.seteverpresentrowwidgetvalue(d.addnewrowwidget,e)}}};u&&(r.createeverpresentrowwidget?(r.addnewrowwidget=r.createeverpresentrowwidget(r.datafield,A,l,function(){n.trigger("mousedown")}),r.initeverpresentrowwidget&&r.initeverpresentrowwidget(r.datafield,A,l)):(a._measureElement("column"),
u=a.everpresentrowheight/2-a._columnheight/2,0>u&&(u=6),u+="px","addButtonColumn"===r.datafield?(r=e('<div style="padding-bottom: 2px; text-align: center; margin-top: '+u+';"><a href="#">'+a.gridlocalization.addrowstring+"</a></div>"),A.append(r),r.mousedown(function(){n.trigger("mousedown")})):"resetButtonColumn"===r.datafield?(r=e('<div style="padding-bottom: 2px; text-align: center; margin-top: '+u+';"><a href="#">'+a.gridlocalization.resetrowstring+"</a></div>"),A.append(r),r.mousedown(function(){p.trigger("mousedown")})):
function(b,c,d){var f=e('<input style="box-sizing: border-box; padding-right: 4px; padding-left: 4px; border:none;" autocomplete="off" type="textarea"/>');f[0].id=e.jqx.utilities.createId();f.addClass(b.toThemeProperty("jqx-widget"));f.addClass(b.toThemeProperty("jqx-input"));f.addClass(b.toThemeProperty("jqx-widget-content"));f.addClass(b.toThemeProperty("jqx-enableselect"));f.addClass(b.toThemeProperty("jqx-grid-cell-add-new-row"));f.css("text-align",d.cellsalign);b.rtl&&f.css("direction","rtl");
b.disabled&&f.attr("disabled",!0);f.attr("disabled",!1);f.attr("placeholder",b.gridlocalization.everpresentrowplaceholder+d.text);f.appendTo(c);f.css("width","100%");f.css("height",b.everpresentrowheight+"px");f.css("line-height",b.everpresentrowheight+"px");f.css("max-height",b.everpresentrowheight+"px");f.css("margin","0px");f.focus(function(){(0<a.selectedcells.length||0<a.selectedrowindexes.length)&&0<=a.selectionmode.indexOf("cell")&&a.getselectedcells();f.addClass(b.toThemeProperty("jqx-fill-state-focus"));
var c=b.columns.records.indexOf(d);"columns"!==b.everpresentrowactionsmode&&l.css({display:"block",top:f.coord().top+b.everpresentrowheight-1,left:0<c?f.coord().left:f.coord().left-1});c=l.children().width();"right"===d.cellsalign?(c=n.width()+p.width(),l.children().css("left",c-c+"px")):l.children().css("left","0px");b.content[0].scrollLeft=0;b.content[0].scrollTop=0;setTimeout(function(){b.content[0].scrollLeft=0;b.content[0].scrollTop=0},50);return!1});d.addnewrowwidget=f;d.reseteverpresentrowwidgetvalue||
(d.reseteverpresentrowwidgetvalue=function(b,c){c.val("");c.focus();c.blur();c.removeClass(a.toThemeProperty("jqx-input-invalid"));c.attr("title","")});d.seteverpresentrowwidgetvalue||(d.seteverpresentrowwidgetvalue=function(a,b){a.val(b)});d.geteverpresentrowwidgetvalue||(d.geteverpresentrowwidgetvalue=function(b,c,h){b=c.val();if(!1!==h&&d.validateeverpresentrowwidgetvalue){h={};for(c=0;c<g;c++){var m=a.columns.records[c];if(m.geteverpresentrowwidgetvalue){var l=m.geteverpresentrowwidgetvalue(m.displayfield,
m.addnewrowwidget,!1);h[m.datafield]=l;m.datafield!=m.displayfield&&(h[m.datafield]=l.value,h[m.displayfield]=l.label)}}h=d.validateeverpresentrowwidgetvalue(d.displayfield,b,h);c=a.gridlocalization.validationstring;void 0!=h.message&&(c=h.message);if("boolean"==typeof h?h:h.result)f.removeClass(a.toThemeProperty("jqx-input-invalid")),f.attr("title","");else return f.addClass(a.toThemeProperty("jqx-input-invalid")),f.attr("title",c),"invalid editor state"}h="string";if(c=a.source.datafields||(a.source._source?
a.source._source.datafields:null)){var k="";e.each(c,function(){if(this.name==d.displayfield)return this.type&&(k=this.type),!1});k&&(h=k)}return"number"===h&&(c=parseFloat(b),isNaN(c))?null:"date"===h?e.jqx.dataFormat.tryparsedate(b,a.gridlocalization):"bool"===h||"boolean"===h?"true"===b||"1"==b?!0:"false"===b||"0"==b?!1:!0===b||!1===b?b:!1:b});f.keydown(function(b){13===b.keyCode&&(0<=a.everpresentrowactions.indexOf("add")?n.trigger("mousedown"):0<=a.everpresentrowactions.indexOf("update")?m.trigger("mousedown"):
0<=a.everpresentrowactions.indexOf("delete")&&q.trigger("mousedown"))});f.blur(function(){f.removeClass(b.toThemeProperty("jqx-fill-state-focus"));l.css("display","none")});d.initeverpresentrowwidget&&d.initeverpresentrowwidget(d.datafield,c,l)}(this,A,r)))}}e.jqx.browser.msie&&8>e.jqx.browser.version&&b.css("z-index",k--);b.width(parseFloat(d)+2);c.addClass(f);c.css("border-bottom-width","0px");a.showfilterrow?c.css("border-top-width","0px"):c.css("border-top-width","1px");c.css("box-sizing","border-box");
c.css("border-right-width","0px")},_gettableheight:function(){if(void 0!=this.tableheight)return this.tableheight;var a=this.host.height();if(this.columnsheader){var c=this.columnsheader.outerHeight();this.showheader||(c=0)}a-=c;"visible"==this.hScrollBar[0].style.visibility&&(a-=this.hScrollBar.outerHeight());this.pageable&&(a-=this.pager.outerHeight());this._groupsheader()&&(a-=this.groupsheader.outerHeight());this.showtoolbar&&(a-=this.toolbarheight);this.showstatusbar&&(a-=this.statusbarheight);
this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(a-=this.everpresentrowheight);return 0<a?this.tableheight=a:this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var a=Math.round(this.host.height())+2*this.rowsheight;return Math.round(a/this.rowsheight)}return this.autoheight||this.autorowheight?0==this.dataview.totalrows?1:this.dataview.totalrows:100>this.dataview.totalrows&&100>this.dataview.totalrecords&&0<this.dataview.totalrows?
this.dataview.totalrows:100},_calculatevirtualheight:function(){var a=Math.round(this.host.height())+2*this.rowsheight;realheight=this._gettableheight();a=Math.round(a/this.rowsheight);this.heights=[];this.hiddens=[];this.details=[];this.expandedgroups=[];this.hiddenboundrows=[];this.heightboundrows=[];this.detailboundrows=[];var c=Math.max(this.dataview.totalrows,this.dataview.totalrecords);this.pageable&&(c=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&
this.autoheight?c=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(c=Math.max(this.dataview.totalrows,this.dataview.totalrecords)));var b=c*this.rowsheight,d=0,e=0,f=0,k=this._getpagesize(),h=k*this.rowsheight,l=0;!this.pageable&&this.autoheight&&(a=c);if(0<c+k)for(;l<=c+k;){d+=h;if(l-k<c&&l>=c){l-=c;0<l&&(f-=h,this._pageviews[e-1]={top:f,height:h-l*this.rowsheight});break}else this._pageviews[e++]={top:f,height:h};f=d;l+=k}1!=this.resizingGrid&&
this.vScrollBar.jqxScrollBar({value:0});if("hidden"==this.hScrollBar.css("visibility")&&(e=0,this.columns&&this.columns.records)){for(l=0;l<this.columns.records.length;l++)e+=isNaN(this.columns.records[l].width)?this.columns.records[l].minwidth:this.columns.records[l].width;!isNaN(e)&&parseInt(e)>this.host.width()&&(realheight-=30)}b>realheight&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),"deferred"==this.scrollmode?this.vScrollBar.jqxScrollBar({max:b}):this.vScrollBar.jqxScrollBar({max:b-
realheight})):this.vScrollBar.css("visibility","hidden");this.dataview.pagesize=k;this.dataview.updateview();return{visiblerecords:a,virtualheight:b}},_updatepageviews:function(){if(!this.updating()){this._pagescache=[];this._pageviews=[];this.tableheight=null;var a=this.that,c=Math.round(this.host.height())+2*this.rowsheight,c=Math.round(c/this.rowsheight),b=Math.max(this.dataview.totalrows,this.dataview.totalrecords),d=b*this.rowsheight,e=0,f=0,k=0,h=0,l=0,n=this._getpagesize();if(this.pageable)this._updatepagedview&&
(d=this._updatepagedview(b,d,0)),this.autoheight&&this._arrange();else for(var m=0;m<b;m++){var q=this.heights[m],p=this.hiddens[m],t=this.details[m];void 0==this.heights[m]&&(q=this.heights[m]=this.rowsheight);void 0==this.hiddens[m]&&(p=this.hiddens[m]=!1);void 0==this.details[m]&&(this.details[m]=null);q!=a.rowsheight&&(d-=a.rowsheight,d+=q);p?d-=q:(f+=q,p=0,this.rowdetails&&(this.rowdetailstemplate&&!t&&(t=this.rowdetailstemplate),t&&t.rowdetails&&!t.rowdetailshidden&&(p=t.rowdetailsheight,f+=
p,d+=p)),e+=q+p);l++;if(l>=n||m==b-1)this._pageviews[k++]={top:h,height:f},f=0,h=e,l=0}a=this._gettableheight();d>a?(this.pageable&&this.gotopage&&(d=this._pageviews[0].height,0>d&&(d=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(d<=a||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<d-a?"deferred"!=this.scrollmode?(a=d-a,b=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:a}),a!=b&&this.vScrollBar.jqxScrollBar({value:0})):
this.vScrollBar.jqxScrollBar({value:0,max:d}):this.vScrollBar.jqxScrollBar({value:0,max:d})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0}));this._arrange();this.autoheight&&(c=Math.round(this.host.height()/this.rowsheight));this.virtualsizeinfo={visiblerecords:c,virtualheight:d}}},updatebounddata:function(a){"data"==a||"sort"==a||"filter"==a||"cells"==a||"pagechanged"==a||"pagesizechanged"==a||this.virtualmode||(this.virtualsizeinfo=null,this.showfilterrow&&
this.filterable&&this.filterrow?(this.clearfilters&&this.clearfilters(!1),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.filterrow.remove(),this._filterrowcache=[],this.filterrow=null):this.filterable&&this.clearfilters&&this.clearfilters(!1),this.detailsVisibility=[],this.groupsVisibility=[],this.groupable&&(this.dataview.groups=[],this.groups=[]),this.pageable&&(this.pagenum=0,this.dataview.pagenum=0),this.sortable&&(this.sortcolumn=null,this.sortdirection=
"",this.dataview.sortfielddirection="",this.dataview.clearsortdata()));this.databind(this.source,a)},refreshdata:function(){this._refreshdataview();this.render()},_updatevscrollbarmax:function(){if(this._pageviews&&0<this._pageviews.length){var a=this._pageviews[0].height;if(this.virtualmode||!this.pageable)a=this.virtualsizeinfo.virtualheight;var c=this._gettableheight();a>c?(this.pageable&&this.gotopage&&(a=this._pageviews[0].height,0>a&&(a=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&
this.vScrollBar.css("visibility","visible"),(a<=c||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<a-c?this.vScrollBar.jqxScrollBar({max:a-c}):this.vScrollBar.jqxScrollBar({value:0,max:a})):(this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0}))}},_refreshdataview:function(){this.dataview.refresh()},refresh:function(a){1==a||e.jqx.isHidden(this.host)||null==this.virtualsizeinfo||(this._cellscache=[],this._renderrows(this.virtualsizeinfo),this._updatesize())},
render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null);this.render()},_preparecolumngroups:function(){var a=this.columnsheight;if(this.columngroups){this.columnshierarchy=[];if(this.columngroups.length){for(var c=this,a=0;a<this.columngroups.length;a++)this.columngroups[a].parent=null,this.columngroups[a].groups=null;for(a=0;a<this.columns.records.length;a++)this.columns.records[a].parent=
null,this.columns.records[a].groups=null;for(var b=function(a){for(var b=0;b<c.columngroups.length;b++){var d=c.columngroups[b];if(d.name===a)return d}return null},a=0;a<this.columngroups.length;a++){var d=this.columngroups[a];d.groups||(d.groups=null);if(d.parentgroup){var e=b(d.parentgroup);e&&(d.parent=e,e.groups||(e.groups=[]),-1===e.groups.indexOf(d)&&e.groups.push(d))}}for(a=0;a<this.columns.records.length;a++)if(d=this.columns.records[a],d.columngroup&&(e=b(d.columngroup)))e.groups||(e.groups=
[]),d.parent=e,-1===e.groups.indexOf(d)&&e.groups.push(d);for(a=b=0;a<this.columns.records.length;a++){e=d=this.columns.records[a];for(d.level=0;e.parent;)e=e.parent,d.level++;for(var e=d,f=d.level,b=Math.max(b,d.level);e.parent;)if(e=e.parent)e.level=--f}for(var k=function(a){var b=[];a.columngroup&&b.push(a);if(a.groups)for(var c=0;c<a.groups.length;c++)if(a.groups[c].columngroup)b.push(a.groups[c]);else if(a.groups[c].groups)for(var d=k(a.groups[c]),e=0;e<d.length;e++)b.push(d[e]);return b},a=
0;a<this.columngroups.length;a++){d=this.columngroups[a];e=k(d);d.columns=e;for(var d=[],h=f=0;h<e.length;h++)d.push(this.columns.records.indexOf(e[h])),e[h].pinned&&f++;if(0!=f)throw Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");d.sort(function(a,b){a=parseInt(a);b=parseInt(b);return a<b?-1:a>b?1:0});for(e=1;e<d.length;e++)if(d[e]!=d[e-1]+1)throw Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.");
}}this.columngroupslevel=1+b;a=this.columngroupslevel*this.columnsheight}return a},_render:function(a,c,b,d,g){if(null!=this.dataview&&!this._loading&&!this._batchupdate)if(e.jqx.isHidden(this.host)){var f=this;f.___hiddenTimer&&(clearInterval(f.___hiddenTimer),f.___hiddenTimer=null);this.___hiddenTimer=setInterval(function(){e.jqx.isHidden(f.host)||(clearInterval(f.___hiddenTimer),f.render())},300)}else{null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,
!0,!1);this.validationpopup=null;this._removeHandlers();this._addHandlers();this._initializeRows();this._requiresupdate=void 0!=c?c:!0;this._newmax=null;if(b)if(this._requiresupdate||0!=d&&this._initmenu(),null==this.columns)this.columns=new e.jqx.collection(this.element);else{var k=this;this.columns&&"observableArray"===this.columns.name&&(this.columns.notifier=function(a){switch(a.type){case "add":k.columns=k._columns;k.render();break;case "update":if("index"===a.name){k.beginupdate();for(var b in a.newValue)k.setcolumnproperty(a.newValue.datafield,
b,a.newValue[b]);k.endupdate()}else b=a.path.split("."),k.setcolumnproperty(k.columns[b[0]].datafield,a.name,a.newValue);break;case "delete":k.columns=k._columns,k.render()}});this.columngroups&&"observableArray"===this.columngroups.name&&(this.columngroups.notifier=function(a){k.render()});this._initializeColumns()}this.tableheight=null;this._pagescache=[];this._pageviews=[];this.visiblerows=[];this.hittestinfo=[];this._requiresupdate&&(this._clearcaches(),1==d&&this._initmenu());this.virtualsizeinfo=
null;this.prerenderrequired=!0;(this.groupable&&0<this.groups.length&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=[],this._rowdetailselementscache=[],this.detailboundrows=[],this.details=[],e.jqx.utilities.html(this.gridcontent,""),this.gridcontent=null);this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors();b?(this.filterrow&&this.filterrow.detach(),e.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||e('<div style="overflow: hidden;"></div>'),
this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&e.jqx.utilities.html(this.gridcontent,"");this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none");this.gridcontent=this.gridcontent||e('<div style="width: 100%; overflow: hidden; position: absolute;"></div>');this.gridcontent.remove();a=this.columnsheight;a=this._preparecolumngroups();
this.showfilterrow&&this.filterable?(this.columnsheader.height(a+this.filterrowheight),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&this.columnsheader.height(a+this.filterrowheight+this.everpresentrowheight)):this.showeverpresentrow&&"bottom"!==this.everpresentrowposition?this.columnsheader.height(a+this.everpresentrowheight):this.columnsheader.height(a);this.content.append(this.columnsheader);this.content.append(this.gridcontent);this._arrange();this._initgroupsheader&&this._initgroupsheader();
this.selectionarea=this.selectionarea||e("<div style='z-index: 99999; visibility: hidden; position: absolute;'></div>");this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea"));this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this.content.append(this.selectionarea);this.tableheight=null;this.rendergridcontent(!1,b);0<this.groups.length&&this.groupable&&(a=this.vScrollBar[0].style.visibility,this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?
this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.vScrollBar[0].style.visibility!=a&&(this._updatecolumnwidths(),this._updatecellwidths()),this.suspendgroupevents=!1);this.pageable&&this.updatepagerdetails&&(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo)));this.showaggregates&&this._updateaggregates&&this._updateaggregates();
this._addoverlayelement();"deferred"==this.scrollmode&&this._addscrollelement();this.showfilterrow&&this.filterable&&this.filterrow&&(void 0==g||1==g)&&this._updatelistfilters(!b);this.rendered&&this.rendered("full");this.__isRendered=!0}},_addoverlayelement:function(){var a=e.jqx.utilities.getBrowser();if("msie"==a.browser&&9>parseInt(a.version)||this.isTouchDevice())if(this._overlayElement&&this._overlayElement.remove(),this._overlayElement=e("<div class='jqxgrid-overlay' style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),
this._overlayElement.css("background","white"),this._overlayElement.css("z-index",18E3),this._overlayElement.css("opacity",.001),this.isTouchDevice())if("hidden"!==this.vScrollBar.css("visibility")||"hidden"!==this.hScrollBar.css("visibility")){a=0;"checkbox"==this.selectionmode&&(a+=30);(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0)));var c=this._overlayElement.css("left");this._overlayElement.css("left",c+a)}else this._overlayElement&&
this._overlayElement.remove();else this.content.prepend(this._overlayElement);this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove();this._scrollelementoverlay&&this._scrollelementoverlay.remove();this._scrollelementoverlay=e("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>");this._scrollelementoverlay.css("background","black");this._scrollelementoverlay.css("z-index",18E3);this._scrollelementoverlay.css("opacity",
.1);this._scrollelement=e("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'></span>");this._scrollelement.css("z-index",18005);this._scrollelement.addClass(this.toThemeProperty("jqx-button"));this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal"));this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all"));this._scrollelement.addClass(this.toThemeProperty("jqx-shadow"));this.content.prepend(this._scrollelement);this.content.prepend(this._scrollelementoverlay)},
_postrender:function(a){if(("filter"==a||"sort"==a||"group"==a)&&this.rowdetails&&this.detailsVisibility&&0<this.detailsVisibility.length){this._detailsUpdate=!0;for(var c=0;c<this.details.length;c++)this.details[c]&&(this.details[c].rowdetailshidden=!0);for(c=0;c<this.detailsVisibility.length;c++)!1===this.detailsVisibility[c]?this.showrowdetails(c):!0===this.detailsVisibility[c]&&this.hiderowdetails(c);this._detailsUpdate=!1;this.rendergridcontent(!0);this._updatecolumnwidths();this._updatecellwidths();
this._renderrows(this.virtualsizeinfo)}if(this.groupable&&0<this.groups.length)if("filter"==a||"sort"==a)for(c=0;c<this.dataview.loadedgroups.length;c++){a=this.dataview.loadedgroups[c];var b=0,d;for(d in this.groupsVisibility)d==a.group&&this.groupsVisibility[d]&&(suspendgroupevents=!0,this._setgroupstate(a,!0,!1),b++);0<b&&(suspendgroupevents=!1,a=this.vScrollBar[0].style.visibility,this.rendergridcontent(!0,!1),a!=this.vScrollBar[0].style.visibility||this._hiddencolumns)&&(this._updatecolumnwidths(),
this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))}else"group"==a&&(this.groupsVisibility=[])},rendergridcontent:function(a,c){if(this.updating())return!1;if(void 0==a||null==a)a=!1;this._requiresupdate=a;var b=this.prerenderrequired;this.prerenderrequired&&this._arrange();var d=this.that;if(null==c||void 0==c)c=!0;this.tableheight=null;d.virtualsizeinfo=d.virtualsizeinfo||d._calculatevirtualheight();d.pageable&&!d.autoheight&&d.dataview.totalrows<d.pagesize&&(d._requiresupdate=!0);
c?d._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn());d._renderrows(d.virtualsizeinfo);this.gridcontent&&(0!=this.gridcontent[0].scrollTop&&(this.gridcontent[0].scrollTop=0),0!=this.gridcontent[0].scrollLeft&&(this.gridcontent[0].scrollLeft=0));b&&(b=this.tableheight,this._arrange(),b!=this.tableheight&&this.autoheight&&d._renderrows(d.virtualsizeinfo));this.rtl&&this._renderhorizontalscroll();this.autosavestate&&null!=this.initializedcall&&
this.savestate&&this.savestate();return!0},_updatecolumnwidths:function(){var a=this.host.width(),c=a,b="";if(void 0!=this.columns&&void 0!=this.columns.records){var d=this.that,g=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;e.each(this.columns.records,function(e,f){if(!this.hidden||!this.hideable)if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth){var h="hidden"==d.vScrollBar[0].style.visibility?
0:d.scrollbarsize+5;if(d.scrollbarautoshow||0==d.scrollbarsize)h=0;var m=c;f=parseFloat(this.width)*m/100;h+=g;void 0!=this._percentagewidth&&(f=parseFloat(this._percentagewidth)*(m-h)/100);f<this.minwidth&&"auto"!=this.minwidth&&(f=this.minwidth);f>this.maxwidth&&"auto"!=this.maxwidth&&(f=this.maxwidth);a-=f}else"auto"==this.width||this._width?b+=this.text:a-=this.width});var f=this._gettableheight();if(!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>f)if(this.groupable&&
0<this.groups.length)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var k=this.dataview.loadedrootgroups.length*this.rowsheight;if(this.pageable)for(var h=0;h<this.dataview.rows.length;h++)this.dataview.rows[h].group&&0===this.dataview.rows[h].level&&(k+=this.rowsheight);k>f?(a-=this.scrollbarsize+5,c-=this.scrollbarsize+5):"visible"==this.vScrollBar.css("visibility")&&(a-=this.scrollbarsize+5,c-=this.scrollbarsize+5)}else a-=this.scrollbarsize+5,c-=this.scrollbarsize+
5;else"hidden"!=this.vScrollBar.css("visibility")&&0<this.scrollbarsize&&(a-=this.scrollbarsize+5,c-=this.scrollbarsize+5);g=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;c-=g;if(this.columnsheader&&(f=this.columnsheader.find("#columntable"+this.element.id),0!=f.length)){var l=0,n=this,m=0;e.each(this.columns.records,function(d,g){var f=e(this.element);this.hidden||"none"!==this.element.style.display||(this.element.style.display=
"block");var h=!1,k=this.width;if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth)k=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*c/100:parseFloat(this.width)*c/100,h=!0;"auto"==this.width||this._width||h?h?(k<this.minwidth&&"auto"!=this.minwidth&&(this.width=k=this.minwidth),k>this.maxwidth&&"auto"!=this.maxwidth&&(this.width=k=this.maxwidth),parseInt(f[0].style.width)!=k&&(f.width(k),this.width=k)):(h=Math.floor(this.text.length/b.length*a),m+=h,3>a-m&&a!=
m?h+=2:d==n.columns.records.length-1&&m<a&&(h+=a-m),isNaN(h)&&(h=this.minwidth),Infinity==h&&(h=0),0>h&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),h=10+$element.width(),$element.remove()),h<this.minwidth&&(h=this.minwidth),h>this.maxwidth&&(h=this.maxwidth),this._width="auto",this.width=h,f.width(this.width)):parseInt(f[0].style.width)!=this.width&&f.width(this.width);parseInt(f[0].style.left)!=l&&f.css("left",l);this.hidden&&this.hideable||(l+=this.width);this._requirewidthupdate=
!0});this.columnsheader.width(2+l);f.width(this.columnsheader.width());this.columnsheader[0].style.visibility=0==l?"hidden":"inherit";this._resizecolumngroups();this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui());this.showeverpresentrow&&("bottom"!==this.everpresentrowposition?this.addnewrowtop.width(this.columnsheader.width()):this.addnewrowbottom.width(this.columnsheader.width()),this._updateaddnewrowui());this.autowidth&&this._arrange()}}},
_rendercolumnheaders:function(){var a=this.that;if(this.prerenderrequired){this._columnsbydatafield=[];this.columnsheader.find("#columntable"+this.element.id).remove();var c=e('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');c[0].cells=[];var b=0,d=0,g="",f=this.host.width(),k=f,h=[],l=[],n=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;e.each(this.columns.records,function(b,
c){if(!this.hidden||!this.hideable)if("auto"==this.width||this._width)g+=this.text;else if(this.width<this.minwidth&&"auto"!=this.minwidth)f-=this.minwidth;else if(this.width>this.maxwidth&&"auto"!=this.maxwidth)f-=this.maxwidth;else if(-1!=this.width.toString().indexOf("%")){var d="hidden"==a.vScrollBar[0].style.visibility?0:a.scrollbarsize+5,d=d+n;c=parseFloat(this.width)*(k-d)/100;c<this.minwidth&&"auto"!=this.minwidth&&(c=this.minwidth);c>this.maxwidth&&"auto"!=this.maxwidth&&(c=this.maxwidth);
f-=c}else"string"==typeof this.width&&(this.width=parseInt(this.width)),f-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(a._haspinned&&(this.pinned=!0),h[h.length]=this):l[l.length]=this});if(this.rtl){var m=0;h.reverse();for(q=this.columns.records.length-1;q>=this.columns.records.length-h.length;q--)this.columns.replace(q,h[m++]);for(m=0;m<l.length;m++)this.columns.replace(m,l[m])}else{for(var q=0;q<h.length;q++)this.columns.replace(q,h[q]);for(m=0;m<l.length;m++)this.columns.replace(h.length+
m,l[m])}var p=this.headerZIndex,t=a.groupable?a.groups.length:0;this.rowdetails&&this.showrowdetailscolumn&&t++;var r=a.columnsheader.height();this.showfilterrow&&(r=this.columngroups?r-this.filterrowheight:this.columnsheight);this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&(r-=this.everpresentrowheight);m=this._gettableheight();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>m&&!this.scrollbarautoshow)if(this.groupable&&0<this.groups.length)if(this.dataview&&this.dataview.loadedrootgroups&&
!this.groupsexpandedbydefault){q=0;if(!this.pageable)q=this.dataview.loadedrootgroups.length*this.rowsheight;else if(this.pageable)for(var u=0;u<this.dataview.rows.length;u++)this.dataview.rows[u].group&&0===this.dataview.rows[u].level&&(q+=this.rowsheight);q>m&&(f-=this.scrollbarsize+5,k-=this.scrollbarsize+5)}else f-=this.scrollbarsize+5,k-=this.scrollbarsize+5;else!this.autoheight&&0<this.scrollbarsize&&(f-=this.scrollbarsize+5,k-=this.scrollbarsize+5);var k=k-n,A=function(b,c){var d=a.columngroupslevel*
a.columnsheight;return d-=c.level*a.columnsheight},C=document.createDocumentFragment(),K=0;e.each(this.columns.records,function(h,m){this.height=a.columnsheight;a.columngroups&&a.columngroups.length&&(r=this.height=A(this.datafield,this));var l=a.toTP("jqx-grid-column-header")+" "+a.toTP("jqx-widget-header");a.rtl&&(l+=" "+a.toTP("jqx-grid-column-header-rtl"));var n=a.rtl?150+p+1:150+p-1,q=a.rtl?p++:p--,u=e('<div role="columnheader" style="z-index: '+q+';position: absolute; height: 100%;" class="'+
l+'"><div style="height: 100%; width: 100%;"></div></div>');a.columngroups&&(u[0].style.height=r+"px",u[0].style.bottom="0px",this.pinned&&(u[0].style.zIndex=n));this.uielement=u;""!=this.classname&&this.classname&&u.addClass(this.classname);l=this.width;n=!1;null===this.width&&(this.width="auto");if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth)l=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*k/100:parseFloat(this.width)*k/100,n=!0;if("auto"==this.width||
this._width||n)if(n){l<this.minwidth&&"auto"!=this.minwidth&&(l=this.minwidth);l>this.maxwidth&&"auto"!=this.maxwidth&&(l=this.maxwidth);if(void 0==this._percentagewidth||-1!=this.width.toString().indexOf("%"))this._percentagewidth=this.width;u.width(l);this.width=l}else this.hidden||(l=Math.floor(this.text.length/g.length*f),K+=l,3>f-K&&f!=K?l+=2:h==a.columns.records.length-1&&K<f&&(l+=f-K),isNaN(l)&&(l=this.minwidth),0>l&&($element=e("<span>"+this.text+"</span>"),e(document.body).append($element),
l=10+$element.width(),$element.remove()),l<this.minwidth&&(l=this.minwidth),l>this.maxwidth&&(l=this.maxwidth),this._width="auto",l=this.width=l,u.width(this.width));else l<this.minwidth&&"auto"!=this.minwidth&&(this.width=l=this.minwidth),l>this.maxwidth&&"auto"!=this.maxwidth&&(this.width=l=this.maxwidth),u[0].style.width=parseInt(l)+"px";this.hidden&&this.hideable&&u.css("display","none");var x=e(u.children()[0]),n=a.rtl?a.toTP("jqx-grid-column-menubutton")+" "+a.toTP("jqx-grid-column-menubutton-rtl"):
a.toTP("jqx-grid-column-menubutton"),n=n+(" "+a.toTP("jqx-icon-arrow-down")),n=e('<div style="height: '+r+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+n+'" style="width: 100%; height:100%;"></div></div>');a.enableanimations||n.css("margin-left",-16);a.rtl&&n.css("left","0px");this.columnsmenu=n[0];c[0].cells[h]=u[0];n[0].style.width=parseInt(a.columnsmenuwidth)+"px";var q=a.columnsmenu,H=!1,F=!1,y=a.groupable&&0<t&&b<t||a.rowdetails&&b<t;a.rtl&&(y=a.groupable&&0<t&&
b<t||a.rowdetails&&b<t,y&=h>a.columns.records.length-1-t);if(y)b++,q&=0,this.editable=this.sortable=!1,F=!0;else{var w=null!=this.renderer?this.renderer(this.text,this.align,r):a._rendercolumnheader(this.text,this.align,r,a);null==w&&(w=a._rendercolumnheader(this.text,this.align,r,a));null!=this.renderer&&(w=e(w));q&=1;H=!0}a.WinJS?MSApp.execUnsafeLocalFunction(function(){x.append(e(w))}):this.renderer?x.append(e(w)):w&&(x[0].innerHTML=w);if(null!=w){var z=e('<div class="iconscontainer" style="height: '+
r+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+a.toTP("jqx-widget-header")+'" style="height: '+r+'px; float: right; display: none; width: 16px;"><div class="'+a.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+a.toTP("jqx-widget-header")+'" style="height: '+r+'px; float: right; display: none; width: 16px;"><div class="'+a.toTP("jqx-grid-column-sortascbutton")+" "+
a.toTP("jqx-icon-arrow-up")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+a.toTP("jqx-widget-header")+'" style="height: '+r+'px; float: right; display: none; width: 16px;"><div class="'+a.toTP("jqx-grid-column-sortdescbutton")+" "+a.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div></div>');n.addClass(a.toTP("jqx-widget-header"));x.append(z);y=z.children();this.sortasc=y[1];this.sortdesc=y[2];this.filtericon=y[0];this.iconscontainer=z;a.rtl&&(z.css("margin-left",
"0px"),z.css("left","0px"),e(this.sortasc).css("float","left"),e(this.filtericon).css("float","left"),e(this.sortdesc).css("float","left"));!a.autoshowfiltericon&&this.filterable&&e(this.filtericon).css("display","block")}this.element=u[0];q&&(a._handlecolumnsmenu(a,x,u,n,this),this.menu||n.hide());C.appendChild(u[0]);if(a.groupable&&H)if(u[0].id=a.dataview.generatekey(),a._handlecolumnstogroupsdragdrop)a._handlecolumnstogroupsdragdrop(this,u);else throw Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");
a.columnsreorder&&this.draggable&&a._handlecolumnsdragreorder&&a._handlecolumnsdragreorder(this,u);var v=this;a.addHandler(u,"click",function(b){if(v.checkboxcolumn)return!0;if(0<a.sorttogglestates&&a._togglesort&&!a._loading){if(a.suspendClick)return!0;a._togglesort(v)}b.preventDefault();a._raiseEvent(7,{column:v.getcolumnproperties(),datafield:v.datafield,originalEvent:b})});if(v.resizable&&a.columnsresize&&!F){var D=!1,n="mousemove";a.isTouchDevice()&&!0!==a.touchmode&&(D=!0,n=e.jqx.mobile.getTouchEventName("touchstart"));
a.addHandler(u,n,function(b){var c=parseInt(b.pageX),d=parseInt(u.coord().left);a.hasTransform&&(d=e.jqx.utilities.getOffset(u).left);if(a.resizing)return!0;if(a._handlecolumnsresize){if(D)return c=a.getTouches(b)[0].pageX,c>=d+v.width-40?(a.resizablecolumn={columnelement:u,column:v},u.css("cursor","col-resize")):(u.css("cursor",""),a.resizablecolumn=null),!0;b=v.width;a.rtl&&(b=0);if(c>=d+b-5){if(c<=d+b+5)return a.resizablecolumn={columnelement:u,column:v},u.css("cursor","col-resize"),!1;u.css("cursor",
"")}else u.css("cursor",""),c<d+b-5&&(v._animating||v._menuvisible||u.mouseenter());a.resizablecolumn=null}})}u.css("left",d);this.hidden&&this.hideable||(d+=l);v.rendered&&v.rendered(e(x[0].firstChild),v.align,r)&&null!=z&&z.hide();if(v.checkboxcolumn){z&&z.hide();if(!a.host.jqxCheckBox)throw Error("jqxGrid: Missing reference to jqxcheckbox.js");x.html('<div style="cursor: pointer; margin-left: 5px; top: 50%; margin-top: -8px; position: relative;"></div>');var L=x.find("div:first");L.jqxCheckBox({_canFocus:!1,
disabled:a.disabled,disabledContainer:!0,theme:a.theme,enableContainerClick:!1,width:16,height:16,animationShowDelay:0,animationHideDelay:0});v.checkboxelement=L;z=L.data().jqxCheckBox.instance;a._checkboxcolumn=v;z.updated=function(b,c,d){a._checkboxcolumnupdating=!0;a.disabled&&(L.jqxCheckBox({disabled:a.disabled}),c=d);c?a.selectallrows():a.unselectallrows();a._checkboxcolumnupdating=!1}}});0<d?this.columnsheader.width(2+d):this.columnsheader.width(d);c[0].appendChild(C);this.columnsrow=c;a.columnsheader.append(c);
this.showfilterrow&&this._updatefilterrow&&(this.columngroups?c.height(this.columngroupslevel*this.columnsheight):c.height(this.columnsheight),this.filterrow||(m=e("<div style='position: relative !important; '></div>"),m[0].id="filterrow."+this.element.id,m.height(this.filterrowheight),this.filterrow=m),this.filterrow.width(2+d),this.columnsheader.append(this.filterrow),this._updatefilterrow());this.showeverpresentrow&&"bottom"!==this.everpresentrowposition?(this.columngroups?c.height(this.columngroupslevel*
this.columnsheight):c.height(this.columnsheight),this.addnewrowtop||(m=e("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>"),m[0].id="addnewrowtop."+this.element.id,m.height(this.everpresentrowheight),this.addnewrowtop=m),this.addnewrowtop.width(2+d),"topAboveFilterRow"==this.everpresentrowposition?this.filterrow?this.addnewrowtop.insertBefore(this.filterrow):this.columnsheader.append(this.addnewrowtop):this.columnsheader.append(this.addnewrowtop),this._updateaddnewrow()):
this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(this.addnewrowbottom||(m=e("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>"),m[0].id="addnewrowbottom."+this.element.id,m.height(this.everpresentrowheight),this.addnewrowbottom=m),this.addnewrowbottom.width(2+d),this.addnewrow.append(this.addnewrowbottom),this._updateaddnewrow());c[0].style.visibility=0==d?"hidden":"inherit";c.width(d);this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop();this._handlecolumnsreorder&&
this._handlecolumnsreorder();this._rendersortcolumn&&this._rendersortcolumn();this._renderfiltercolumn&&this._renderfiltercolumn();this._handlecolumnsresize&&this._handlecolumnsresize();this.columngroups&&this._rendercolumngroups();this._updatecheckboxselection&&this._updatecheckboxselection()}else this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),
this.showeverpresentrow&&("bottom"!==this.everpresentrowposition?this.addnewrowtop.width(this.columnsheader.width()):this.addnewrowbottom.width(this.columnsheader.width()),this._updateaddnewrowui())},_rendercolumngroups:function(){if(this.columngroups){for(var a=0,c=0;c<this.columns.records.length;c++)this.columns.records[c].pinned&&a++;var a=this.headerZIndex-a+this.columns.records.length,c=this.that,b=c.toTP("jqx-grid-column-header")+" "+c.toTP("jqx-grid-columngroup-header")+" "+c.toTP("jqx-widget-header");
c.rtl&&(b+=" "+c.toTP("jqx-grid-columngroup-header-rtl"));var d=this.columnsheader.find("#columntable"+this.element.id);d.find("jqx-grid-columngroup-header").remove();for(var g=0;g<this.columngroupslevel-1;g++)for(c=0;c<this.columngroups.length;c++){var f=this.columngroups[c],k=f.level;if(k===g){var k=k*this.columnsheight,h=99999;if(f.groups){var l=function(a){for(var b=0,c=0;c<a.groups.length;c++){var d=a.groups[c];d.groups?b+=l(d):d.hidden||(b+=d.width,h=Math.min(parseFloat(d.element.style.left),
h))}return b};f.width=l(f);f.left=h;var n=this.columnsheight,m=a--,m=e('<div role="columnheader" style="z-index: '+m+';position: absolute;" class="'+b+'"></div>'),q=e(this._rendercolumnheader(f.text,f.align,this.columnsheight,this));if(f.renderer){var q=e("<div style='height: 100%; width: 100%;'></div>"),p=f.renderer(f.text,f.align,n);q.html(p)}m.append(q);m[0].style.left=h+"px";0===h&&(m[0].style.borderLeftColor="transparent");m[0].style.top=k+"px";m[0].style.height=n+"px";m[0].style.width=-1+f.width+
"px";d.append(m);f.element=m;f.rendered&&f.rendered(q,f.align,n)}}}}},_resizecolumngroups:function(){if(this.columngroups)for(var a=0;a<this.columngroups.length;a++){var c=this.columngroups[a],b=c.level*this.columnsheight,d=99999;if(c.groups){var e=function(a){for(var b=0,c=0;c<a.groups.length;c++){var g=a.groups[c];g.groups?b+=e(g):g.hidden||(b+=g.width,d=Math.min(parseFloat(g.element.style.left),d))}return b};c.width=e(c);c.left=d;var f=this.columnsheight,k=c.element;k[0].style.left=d+"px";k[0].style.top=
b+"px";k[0].style.height=f+"px";k[0].style.width=-1+c.width+"px"}}},_handlecolumnsmenu:function(a,c,b,d,g){a.dragmousedown=null;d[0].id=a.dataview.generatekey();c.append(d);b[0].columnsmenu=d[0];g.element=b[0];var f=this.columnsmenuwidth+1,k=function(){if(!g.menu)return!1;if(!a.resizing){if(g._menuvisible&&a._hasOpenedMenu)return!1;g._animating=!0;if(a.menuitemsarray&&0<a.menuitemsarray.length)if(a.enableanimations)d.css("display","block"),d.stop(),g.iconscontainer.stop(),a.rtl?(d.css("margin-left",
-f),d.animate({"margin-left":"0px"},"fast",function(){d.css("display","block");g._animating=!1;g._menuvisible=!0})):(d.css("margin-left","0px"),d.animate({"margin-left":-f},"fast",function(){d.css("display","block");g._animating=!1;g._menuvisible=!0})),b=a.rtl?f:-(32+f),g.iconscontainer.animate({"margin-left":b},"fast");else{d.css("display","block");var b=a.rtl?16:-48;g.iconscontainer.css("margin-left",b+"px");g._animating=!1;g._menuvisible=!0}}};c="mouseenter";a.isTouchDevice()&&(c="touchstart");
a.addHandler(b,c,function(c){c=parseInt(c.pageX);var d=a.columnsresize&&g.resizable?3:0,f=parseInt(b.coord().left);a.hasTransform&&(f=e.jqx.utilities.getOffset(b).left);var h=g.width;a.rtl&&(h=0);if(0!=d&&c>=f+h-d&&c<=f+h+d)return!1;c=a.vScrollInstance.isScrolling();g.menu&&a.autoshowcolumnsmenubutton&&!c&&!a.disabled&&k()});a.autoshowcolumnsmenubutton||(d.css("display","block"),g.iconscontainer.css("margin-left",(a.rtl?16:-48)+"px"),a.rtl?d.css({"margin-left":"0px"}):d.css({"margin-left":-f}));a.addHandler(b,
"mouseleave",function(b){a.menuitemsarray&&0<a.menuitemsarray.length&&g.menu&&(b=e.data(document.body,"contextmenu"+a.element.id),void 0!=b&&d[0].id==b.columnsmenu.id||!a.autoshowcolumnsmenubutton||(a.enableanimations?(a.rtl?d.css("margin-left","0px"):d.css("margin-left",-f),d.stop(),g.iconscontainer.stop(),a.rtl?d.animate({"margin-left":-f},"fast",function(){d.css("display","none");g._menuvisible=!1}):d.animate({"margin-left":0},"fast",function(){d.css("display","none");g._menuvisible=!1}),b=a.rtl?
0:-32,g.iconscontainer.animate({"margin-left":b},"fast")):(d.css("display","none"),b=a.rtl?0:-32,g.iconscontainer.css("margin-left",b+"px"),g._menuvisible=!1)))});var h=!0,l="";c=e(g.filtericon);a.addHandler(d,"mousedown",function(b){a.gridmenu||a._initmenu();h=!e.data(a.gridmenu[0],"contextMenuOpened"+a.gridmenu[0].id);l=e.data(document.body,"contextmenu"+a.element.id);null!=l&&(l=l.column.datafield)});a.addHandler(c,"mousedown",function(b){a.gridmenu||a._initmenu();h=!e.data(a.gridmenu[0],"contextMenuOpened"+
a.gridmenu[0].id);l=e.data(document.body,"contextmenu"+a.element.id);null!=l&&(l=l.column.datafield)});var n=function(){if(!g.menu)return!1;a.gridmenu||a._initmenu();if(a.disabled)return!1;for(var b=0;b<a.columns.records.length;b++)a.columns.records[b].datafield!=g.datafield&&(a.columns.records[b]._menuvisible=!1);var b=d.coord(!0),c=d.height();if(!h&&(h=!0,l==g.datafield))return a._closemenu(),!1;var f=a.host.coord(!0);a.hasTransform&&(f=e.jqx.utilities.getOffset(a.host),b=e.jqx.utilities.getOffset(d));
f.left+a.host.width()>parseInt(b.left)+a.gridmenu.width()?a.gridmenu.jqxMenu("open",b.left,b.top+c):a.gridmenu.jqxMenu("open",d.width()+b.left-a.gridmenu.width(),b.top+c);100>a.gridmenu.width()&&a._arrangemenu();a._hasOpenedMenu=!0;var c=a._getmenuitembyindex(0),f=a._getmenuitembyindex(1),k=a._getmenuitembyindex(2),n=a._getmenuitembyindex(3),u=a._getmenuitembyindex(4),b=a._getmenuitembyindex(5);if(null!=c&&null!=f&&null!=k){var A=g.sortable&&a.sortable;a.gridmenu.jqxMenu("disable",c.id,!A);a.gridmenu.jqxMenu("disable",
f.id,!A);a.gridmenu.jqxMenu("disable",k.id,!A);void 0!=g.displayfield&&(a.sortcolumn==g.displayfield?(k=a.getsortinformation(),A&&(k.sortdirection.ascending?a.gridmenu.jqxMenu("disable",c.id,!0):a.gridmenu.jqxMenu("disable",f.id,!0))):a.gridmenu.jqxMenu("disable",k.id,!0))}null!=n&&null!=u&&(a.groupable&&g.groupable?a.groups&&-1!=a.groups.indexOf(g.datafield)?(a.gridmenu.jqxMenu("disable",n.id,!0),a.gridmenu.jqxMenu("disable",u.id,!1)):(a.gridmenu.jqxMenu("disable",n.id,!1),a.gridmenu.jqxMenu("disable",
u.id,!0)):(a.gridmenu.jqxMenu("disable",u.id,!0),a.gridmenu.jqxMenu("disable",n.id,!0)));null!=b&&(a.menuOwner=g,a._updatefilterpanel(a,b,g),c=0,a.sortable&&a._togglesort&&a.showsortmenuitems&&(c+=3),a.groupable&&a.addgroup&&a.showgroupmenuitems&&(c+=2),f=a._measureMenuElement(),c=c*f+14,e.jqx.browser.msie&&8>e.jqx.browser.version&&(c+=20,e(b).height(190)),a.isTouchDevice()&&(c+=10),a.filterable&&a.showfiltermenuitems&&(g.filterable?(a.gridmenu.height(c+190),e(b).css("display","block")):(a.gridmenu.height(c),
e(b).css("display","none"))));a.columnmenuopening&&!1===a.columnmenuopening(a.gridmenu,g.displayfield,a.gridmenu.height())&&a._closemenu();e.data(document.body,"contextmenu"+a.element.id,{column:g,columnsmenu:d[0]})};a.addHandler(c,"click",function(c){if(!g.menu)return!1;a.showfilterrow||("block"!=d[0].style.display&&b.trigger("mouseenter"),setTimeout(function(){"block"!=d[0].style.display&&b.trigger("mouseenter");n()},200));return!1});a.addHandler(d,"click",function(a){if(!g.menu)return!1;n();return!1});
a.isTouchDevice()&&a.addHandler(d,e.jqx.mobile.getTouchEventName("touchstart"),function(b){if(!g.menu)return!1;a._hasOpenedMenu?a._closemenu():n();return!1})},_removecolumnhandlers:function(a){var c=this.that,b=e(a.element);0<b.length&&(c.removeHandler(b,"mouseenter"),c.removeHandler(b,"mouseleave"),a=e(a.filtericon),c.removeHandler(a,"mousedown"),c.removeHandler(a,"click"),c.removeHandler(b,"click"),c.removeHandler(b,"mousemove"),c.columnsreorder&&(c.removeHandler(b,"mousedown.drag"),c.removeHandler(b,
"mousemove.drag")),c.removeHandler(b,"dragstart"),b[0].columnsmenu&&(b=e(b[0].columnsmenu),c.removeHandler(b,"click"),c.removeHandler(b,"mousedown"),c.removeHandler(b,e.jqx.mobile.getTouchEventName("touchstart"))))},_rendercolumnheader:function(a,c,b,d){var e="7px";d.columngroups?(e=b/2-this._columnheight/2,0>e&&(e=6),e+="px"):30!=this.columnsheight&&(e=this.columnsheight/2-this._columnheight/2,0>e&&(e=6),e+="px");return this.enableellipsis?"left"==c?'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+
c+"; margin-left: 4px; margin-right: 2px; margin-bottom: "+e+"; margin-top: "+e+';"><span style="text-overflow: ellipsis; cursor: default;">'+a+"</span></div>":'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+c+"; margin-left: 2px; margin-right: 4px; margin-bottom: "+e+"; margin-top: "+e+';"><span style="text-overflow: ellipsis; cursor: default;">'+a+"</span></div>":"center"==c||"middle"==c?'<div style="padding-bottom: 2px; text-align: center; margin-top: '+
e+';"><a href="#">'+a+"</a></div>":'<a style="margin-top: '+e+"; float: "+c+';" href="#">'+a+"</a>"},_renderrows:function(a,c,b){var d=this.that;(this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length<this.dataview.rows.length&&(d.prerenderrequired=!0);this.pageable||!this.autoheight&&!this.autorowheight||!this.virtualmode&&!this.unboundmode||(b=this.source.totalrecords,isNaN(b)||null==this.table||null==this.table[0].rows||
this.table[0].rows.length==b||(d.prerenderrequired=!0));(this.autoheight||this.autorowheight)&&!d.prerenderrequired&&this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?d.prerenderrequired=!0:this.pageable||(d.prerenderrequired=!0)),this.table[0].rows.length<this.dataview.cachedrecords.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?d.prerenderrequired=!0:this.pageable||(d.prerenderrequired=
!0)));d._prerenderrows(a);d._requiresupdate&&(d._requiresupdate=!1,d._updatepageviews());var g=function(){d._loading||(d.WinJS?MSApp.execUnsafeLocalFunction(function(){d._rendervisualrows()}):d._rendervisualrows(),d.virtualmode&&d.showaggregates&&d._updateaggregates&&d.refreshaggregates())};a=e.jqx.browser.msie&&10>e.jqx.browser.version;if(this.virtualmode)b=function(){if(d.rendergridrows){var a=d._startboundindex;void 0==a&&(a=0);var b=a+1+d.dataview.pagesize;if(null!=a&&null!=b){var e=d.source._source?
!0:!1;if((e?d.source._source.recordstartindex:d.source.recordstartindex)!=a||1==c){if(e){if(b>=d.source._source.totalrecords&&(b=d.source._source.totalrecords,a=b-d.dataview.pagesize-1,0>a&&(a=0),d.source._source.recordendindex==b&&d.source._source.recordstartindex==a))return;d.source._source.recordstartindex=a;d.source._source.recordendindex=b}else d.source.recordstartindex=a,d.source.recordendindex=b;d.updatebounddata("cells")}}}},this.loadondemand&&(g(),b(),this.loadondemand=!1),b=void 0==this._browser?
this._isIE10():this._browser,this.editable&&this.editcell&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()?g():this.autoheight?g():b||a||navigator&&-1!=navigator.userAgent.indexOf("Safari")?(null!=this._scrolltimer&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout(function(){g()},5)):g();else{if("deferred"==this.scrollmode&&(this.hScrollInstance.isScrolling()||this.vScrollInstance.isScrolling())){null!=this._scrolltimer&&clearInterval(this._scrolltimer);var f=
this._getfirstvisualrow();null!=f&&(a=function(a){if(null==f)return"";a="<table>";var b=d.deferreddatafields;null==b&&0<d.columns.records.length&&(b=[],b.push(d.columns.records[0].displayfield));for(var c=0;c<b.length;c++){var g=d._getcolumnbydatafield(b[c]);if(g){var h=d._getcellvalue(g,f);""!=g.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(h)?h=e.jqx.dataFormat.formatdate(h,g.cellsformat,d.gridlocalization):e.jqx.dataFormat.isNumber(h)&&(h=e.jqx.dataFormat.formatnumber(h,g.cellsformat,
d.gridlocalization)));a+="<tr><td>"+h+"</td></tr>"}}return a+"</table>"},a=this.scrollfeedback?this.scrollfeedback(f.bounddata):a(f.bounddata),a!=this._scrollelementcontent&&(this._scrollelementcontent=this._scrollelement[0].innerHTML=a));this._scrollelement.css("visibility","visible");this._scrollelementoverlay.css("visibility","visible");this._scrollelement.css("margin-top",-this._scrollelement.height()/2);this._scrolltimer=setInterval(function(){d.hScrollInstance.isScrolling()||d.vScrollInstance.isScrolling()||
(g(),d._scrollelement.css("visibility","hidden"),d._scrollelementoverlay.css("visibility","hidden"),clearInterval(d._scrolltimer),f&&d.ensurerowvisible(f.visibleindex))},100);return}navigator&&-1==navigator.userAgent.indexOf("Chrome")&&-1!=navigator.userAgent.indexOf("Safari")&&(this._updatedelay=1);void 0!=this.touchDevice&&1==this.touchDevice&&(this._updatedelay=5);if((b=void 0==this._browser?this._isIE10():this._browser)||a)this._updatedelay=5;if(b&&this.hScrollInstance.isScrolling()){g();return}e.jqx.browser.mozilla&&
0==this._updatedelay&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this._updatedelay=0);this.isTouchDevice()&&(this._updatedelay=0);null!=this.updatedelay&&(this._updatedelay=this.updatedelay);0==this._updatedelay?g():(a=this._jqxgridrendertimer,null!=a&&clearTimeout(a),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?(this._updatedelay?a=setTimeout(function(){g()},this._updatedelay):(a=null,g()),this._jqxgridrendertimer=a):(this._jqxgridrendertimer=
a,g()))}if(d.autorowheight&&!d.autoheight&&0<this._pageviews.length){b=this._gettableheight();a=this._pageviews[0].height;if(a>b)if(this.pageable&&this.gotopage&&(a=this._pageviews[0].height,0>a&&(a=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(a<=b||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<a-b){if("deferred"!=this.scrollmode){b=a-b;var k=this.vScrollInstance.max;this.vScrollBar.jqxScrollBar({max:b});Math.round(b)!=
Math.round(k)&&this.vScrollBar.jqxScrollBar("value")>b&&this.vScrollBar.jqxScrollBar({value:0})}}else this.vScrollBar.jqxScrollBar({value:0,max:a});else this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0});this._arrange();this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=a)}},scrolling:function(){var a=this.vScrollInstance.isScrolling(),c=this.hScrollInstance.isScrolling();return{vertical:a,horizontal:c}},_renderhorizontalscroll:function(){var a=
this.hScrollInstance,c=a.value;"hidden"===this.hScrollBar.css("visibility")&&(c=a.value=0);var b=parseInt(c);if(null!=this.table){var d=this.table[0].rows.length,e=this.columnsrow,f=this.groupable&&0<this.groups.length?this.groups.length:0,k=this.columns.records.length-f,h=this.columns.records,l=0==this.dataview.rows.length;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(b=a.max-b);if(l&&!this._haspinned){for(a=0;a<d;a++)for(var l=this.table[0].rows[a],n=0;n<f+k;n++){var m=l.cells[n];if(void 0!=
m){var q=h[n];q.pinned&&(m.style.marginLeft=b+"px",0==a&&(m=e[0].cells[n],m.style.marginLeft=b+"px"))}}this.table[0].style.marginLeft=-b+"px";e[0].style.marginLeft=-b+"px"}else if(this._haspinned||void 0==this._haspinned){for(a=0;a<d;a++)for(l=this.table[0].rows[a],n=0;n<f+k;n++)if(m=l.cells[n],void 0!=m&&(q=h[n],q.pinned&&(0!=b||""!=m.style.marginLeft))){var p=q=null,t=null;this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(t=this.addnewrowtop[0].cells[n]);this.showfilterrow&&
this.filterrow&&this.filterrow[0].cells&&(p=this.filterrow[0].cells[n]);this.showaggregates&&this.statusbar[0].cells&&(q=this.statusbar[0].cells[n]);this.rtl?(m.style.marginLeft=-parseInt(c)+"px",0==a&&(m=e[0].cells[n],m.style.marginLeft=-parseInt(c)+"px",q&&(q.style.marginLeft=-parseInt(c)+"px"),p&&(p.style.marginLeft=-parseInt(c)+"px"),t&&(t.style.marginLeft=-parseInt(c)+"px"))):(m.style.marginLeft=b+"px",0==a&&(m=e[0].cells[n],m.style.marginLeft=b+"px",q&&(q.style.marginLeft=b+"px"),p&&(p.style.marginLeft=
b+"px"),t&&(t.style.marginLeft=b+"px")))}this.table[0].style.marginLeft=-b+"px";e[0].style.marginLeft=-b+"px"}else 0==this._haspinned&&(this.table[0].style.marginLeft=-b+"px",e[0].style.marginLeft=-b+"px");this.showaggregates&&this.statusbar[0].cells&&(c=0,this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&"hidden"!=this.hScrollBar.css("visibility")&&(c=2+parseInt(this.hScrollBar.css("left"))),this.statusbar[0].style.marginLeft=-b+c+"px");this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&
(this.filterrow[0].style.marginLeft=-b+"px");this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(this.addnewrowtop[0].style.marginLeft=-b+"px")}},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var a=0;a<this._rowdetailselementscache.length;a++)e(this._rowdetailselementscache[a]).css("display","none")},_getvisualcolumnsindexes:function(a,c,b,d,e,f){if(this.rowdetails||this.rtl||this.editcell||this.width&&0<=this.width.toString().indexOf("%")||this.exporting)return{start:0,
end:b+d};var g=0,h=-1,l=b+d,n=!1;if(this.autorowheight)return{start:0,end:b+d};if(!e)for(e=0;e<b+d;e++)if(n||this.columns.records[e].pinned&&f&&(n=!0),this.columns.records[e].hidden||(g+=this.columns.records[e].width),g>=a&&-1==h&&(h=e),g>c+a){l=e;break}l++;l>b+d&&(l=b+d);if(-1==h||n)h=0;return{start:h,end:l}},_getvirtualcolumnsindexes:function(a,c,b,d,e){if(this.rtl||this.editcell||this.exporting)return{start:0,end:b+d};var f=0,g=-1,h=b+d;if(this.autorowheight)return{start:0,end:b+d};if(!e)for(e=
0;e<b+d;e++)if(this.columns.records[e].hidden||(f+=this.columns.records[e].width),f>=a&&-1==g&&(g=e),f>c+a){h=e;break}h++;h>b+d&&(h=b+d);-1==g&&(g=0);return{start:g,end:h}},_getfirstvisualrow:function(){var a=parseInt(this.vScrollInstance.value);0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows());"visible"!=this.vScrollBar[0].style.visibility&&(a=0);if(!this.pageable){var c=this._findvisiblerow(a,this._pageviews);if(-1==c)return null;c!=this.dataview.pagenum?(this.dataview.pagenum=
c,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}a=this._findvisiblerow(a,this._pagescache[this.dataview.pagenum]);if((c=this._pagescache[this.dataview.pagenum])&&c[0])return c[a]},_rendervisualrows:function(){if(this.virtualsizeinfo){var a=this.vScrollInstance,c=this.hScrollInstance,b=c.value,d=parseInt(a.value),g=parseInt(b),f=this._gettableheight(),k=void 0!=this._hostwidth?this._hostwidth:this.host.width();"visible"==this.hScrollBar[0].style.visibility&&
(f+=29);"deferred"==this.scrollmode&&0!=this._newmax&&d>this._newmax&&null!=this._newmax&&(d=this._newmax);var h=a.isScrolling()||c.isScrolling()||this._keydown,l=this.groupable&&0<this.groups.length;this.visiblerows=[];this.hittestinfo=[];this.editcell&&void 0==this.editrow&&this._hidecelleditor(!1);void 0!=this.editrow&&this._hideeditors();this.virtualmode&&!this.pageable&&(this._pagescache=[]);0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows());"hidden"==this.vScrollBar[0].style.visibility&&
(d=0);if(!this.pageable){c=this._findvisiblerow(d,this._pageviews);if(-1==c){this._clearvisualrows();this._renderemptyrow();this._updaterowdetailsvisibility();return}c!=this.dataview.pagenum?(this.dataview.pagenum=c,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var n=this.groupable&&0<this.groups.length?this.groups.length:0;if(this.columns.records){var m=this.columns.records.length-n,c=this._findvisiblerow(d,this._pagescache[this.dataview.pagenum]),
q=this._pagescache[this.dataview.pagenum],p=c;0>p&&(p=0);var t=0,r=0,u=0,A=0,C=this.virtualsizeinfo.visiblerecords,v=this.groupable?this.groups.length:0,H=this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");this.rtl&&(H+=" "+this.toTP("jqx-grid-cell-rtl"));(this.autoheight||this.autorowheight)&&this.pageable&&(!this.groupable||this.groupable&&0===this.groups.length)&&(C=this.dataview.pagesize);l&&(H=" "+this.toTP("jqx-grid-group-cell"));this.isTouchDevice()&&(H+=" "+this.toTP("jqx-touch"));this.autorowheight&&
(H+=" jqx-grid-cell-wrap");var F=this.rowsheight,D=this._rendercell,b=this._getvisualcolumnsindexes(g,k,n,m,l,!0),c=b.start,b=b.end,B=this._getvirtualcolumnsindexes(g,k,n,m,l),I=B.start,J=B.end;(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height);this.autorowheight&&(p=0);if(0<=p){this._updaterowdetailsvisibility();this._startboundindex=null!=q?q[p].bounddata.boundindex:0;this._startvisibleindex=null!=q?q[p].bounddata.visibleindex:
0;var x=this.table[0].rows;if(10<this.columns.records.length&&this.enablecolumnsvirtualization)for(var G=function(a){return a.parentNode&&"#document-fragment"!=a.parentNode.nodeName?!0:!1},E=0;E<x.length;E++){for(var B=x[E],y=0;y<I;y++){var w=y;if(!this.columns.records[w].pinned&&null!=this.columns.records[w].datafield){var z=B.cells[w];G(z)&&z.parentNode.removeChild(z);z=this.columns.records[w].element;this.columns.records[w]._rendered=!1;G(z)&&this.columnsrow[0].removeChild(z);this.filterrow&&G(this.filterrow[0].cells[w])&&
this.columns.records[w].filterable&&this.filterrow[0].cells[w].parentNode.removeChild(this.filterrow[0].cells[w])}}for(y=J;y<this.columns.records.length;y++)w=y,this.columns.records[w].pinned||null==this.columns.records[w].datafield||(z=B.cells[w],G(z)&&z.parentNode.removeChild(z),z=this.columns.records[w].element,this.columns.records[w]._rendered=!1,G(z)&&this.columnsrow[0].removeChild(z),this.filterrow&&G(this.filterrow[0].cells[w])&&this.columns.records[w].filterable&&this.filterrow[0].cells[w].parentNode.removeChild(this.filterrow[0].cells[w]));
for(y=I;y<J;y++)w=y,z=B.cells[w],G(z)||B.appendChild(z),z=this.columns.records[w].element,this.columns.records[w]._rendered=!0,G(z)||this.columnsrow[0].appendChild(z),this.filterrow&&!G(this.filterrow[0].cells[w])&&this.columns.records[w].filterable&&this.filterrow[0].firstChild.appendChild(this.filterrow[0].cells[w])}for(E=0;E<C&&r<C;E++){x=void 0!=q?q[p+E]:null;if(null==x){p=-E;if(this._pagescache[this.dataview.pagenum+1])q=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{B=
this._pageviews.length;do if(this.dataview.pagenum<this._pageviews.length-1)this.dataview.pagenum++,q=void 0,0<this._pageviews[this.dataview.pagenum].height&&(this.dataview.updateview(),this._loadrows(),q=this._pagescache[this.dataview.pagenum]);else{q=void 0;break}while(void 0==q&&this.dataview.pagenum<B)}void 0!=q&&(x=q[p+E])}if(null!=x){if(x.hidden)continue;this._endboundindex=this._startboundindex+E;this._endvisibleindex=this._startvisibleindex+E;0==E&&(B=Math.abs(d-x.top),this.table[0].style.top=
-B+"px",A=-B);B=this.table[0].rows[r];if(!B)continue;parseInt(B.style.height)!=x.height&&(B.style.height=parseInt(x.height)+"px");u+=x.height;I=this.rowdetails&&x.rowdetails;J=!x.rowdetailshidden;I&&J&&(B.style.height=parseInt(x.height-x.rowdetailsheight)+"px",C++);G=this._isrowselected(!0,x);for(y=c;y<b;y++)w=y,this._rendervisualcell(D,H,G,I,J,l,v,B,x,w,r,h);void 0!=x.group&&this._rendergroup&&this._rendergroup(v,B,x,n,m,r,k);if(this.autorowheight&&(this.autoheight||this.pageable)){F=this.rowsheight;
for(y=c;y<b;y++)this.editable&&this.editcell&&this.editcell.column==this.columns.records[y].datafield&&this.editcell.row==this.getboundindex(x)&&this.editcell.editor?F=Math.max(F,this.editcell.editor.height()):B.cells[y].firstChild&&(F=Math.max(F,8+parseInt(B.cells[y].firstChild.offsetHeight)));B.style.height=parseInt(F)+"px";this.heights[this._startboundindex+E]=F;I&&J&&(F+=x.rowdetailsheight);x.height=F}this.visiblerows[this.visiblerows.length]=x;this.hittestinfo[this.hittestinfo.length]={row:x,
visualrow:B,details:!1};I&&J&&(r++,B=this.table[0].rows[r],this._renderrowdetails(H,B,x,n,m,r),this.visiblerows[this.visiblerows.length]=x,this.hittestinfo[this.hittestinfo.length]={row:x,visualrow:B,details:!0});if(!this.autorowheight&&u+A>=f)break}else cansetheight=!0,this._clearvisualrow(g,l,r,n,m),u+t+A<=f&&(t+=F);r++}this._horizontalvalue=g;0<t&&"visible"==this.vScrollBar[0].style.visibility&&(parseInt(this.table.css("top")),g=this._pageviews[this._pageviews.length-1],d=a.max,f=g.top+g.height-
f,"visible"==this.hScrollBar.css("visibility")&&(f+=this.scrollbarsize+20),d!=f&&!this.autorowheight&&0<=f&&("deferred"!=this.scrollmode?(a.max=f,a.setPosition(a.max)):this._newmax!=f&&(this._newmax=f,this._rendervisualrows())))}if((this.autoheight||this.pageable)&&this.autorowheight){this._pagescache=[];for(E=f=a=0;E<this.visiblerows.length;E++)for(d=this.visiblerows[E],d.top=a,a+=d.height,f+=d.height,I=this.rowdetails&&d.rowdetails,J=!d.rowdetailshidden,B=this.table[0].rows[E],I&&J&&E++,y=c;y<b;y++)g=
this.columns.records[y],g.hidden||g.cellsrenderer||(k=B.cells[y],h=0,k.firstChild?(h=(d.height-parseInt(k.firstChild.offsetHeight)-8)/2,I&&J&&(h=(d.height-d.rowdetailsheight-e(k.firstChild).height()-8)/2)):h=(d.height-parseInt(e(k).height())-8)/2,0<=h&&(h=parseInt(h)+4,!k.firstChild||-1!=k.firstChild.className.indexOf("jqx-grid-groups-row")||"checkbox"==g.columntype||"button"==g.columntype||this.editable&&this.editcell&&this.editcell.column==g.datafield&&this.editcell.row==this.getboundindex(d)||
(k.firstChild.style.marginTop=h+"px")));this._pageviews[0]&&(this._pageviews[0].height=f);this._arrange()}this._renderemptyrow();this.toCompile&&0<this.toCompile.length&&e.each(this.toCompile,function(a,b){if(this.compiled)return!0;var c=this.cell;if(!c)return!0;e.jqx.angularCompile&&e.jqx.angularCompile(c,"<div>"+this.value+"</div>");this.compiled=!0})}}},_hideemptyrow:function(){if(this.showemptyrow&&this.table&&this.table[0].rows){var a=this.table[0].rows[0];if(a)for(var c=!1,b=0;b<a.cells.length;b++){var d=
e(a.cells[b]);"none"==d.css("display")||c||d.width()!=this.host.width()&&d.text()!=this.gridlocalization.emptydatastring||(d[0].checkbox=null,d[0].button=null,c=!0,d[0].innerHTML="")}}},_renderemptyrow:function(){if(!this._loading&&0==this.dataview.records.length&&this.showemptyrow){var a=!1,c=this.toTP("jqx-grid-cell");if(this.table&&0<this.table.length&&this.table[0].rows&&0<this.table[0].rows.length){var b=this.table[0].rows[0];this.table[0].style.top="0px";for(var d=0;d<b.cells.length;d++){var g=
e(b.cells[d]);if("none"!=g.css("display")&&!a){g[0].checkbox=null;g[0].button=null;g[0].className=c;a=!0;g[0].innerHTML="";var f=e("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>");f.text(this.gridlocalization.emptydatastring);g.append(f);var k=0;this.oldhscroll||(k=parseInt(this.table[0].style.marginLeft),this.rtl&&(g.css("z-index",999),g.css("overflow","visible")));f.css("left",-k-f.width()/2);f.css("top",this._gettableheight()/2-f.height()/2);e.jqx.browser.msie&&
8>e.jqx.browser.version&&(f.css("margin-left","0px"),f.css("left",this.host.width()/2-f.width()/2));f=Math.abs(parseInt(this.table[0].style.top));isNaN(f)&&(f=0);e(b).height(this._gettableheight()+f);g.css("margin-left","0px");g.width(this.host.width());this.table.width()<this.host.width()&&this.table.width(this.host.width())}g.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},_clearvisualrows:function(){var a=this.virtualsizeinfo.visiblerecords,c=parseInt(this.hScrollInstance.value),b=this.groupable&&
0<this.groups.length;if(this.columns.records)for(var d=0;d<a;d++)this._clearvisualrow(c,b,d,0,this.columns.records.length)},_iscellselected:function(a,c,b){var d=!1,e=0;this.virtualmode&&this.pageable&&this.groupable&&0<this.groups.length&&(e=this.dataview.pagesize*this.dataview.pagenum);if(0<this.groups.length&&this.pageable&&this.groupable){a=this.getrowboundindexbyid(c.bounddata.uid);if(-1!=a){for(var f in this.selectedcells)f==a+"_"+b&&(d=!0);return d}return!1}if(a&&null!=c.bounddata)if("singlerow"!=
this.selectionmode)if(0<this.dataview.filters.length)if(this.virtualmode||void 0==c.bounddata.dataindex)for(f in this.selectedcells)f==e+c.bounddata.boundindex+"_"+b&&(d=!0);else for(f in this.selectedcells)f==e+c.bounddata.dataindex+"_"+b&&(d=!0);else for(f in this.selectedcells){if(f==e+c.bounddata.boundindex+"_"+b){d=!0;break}}else if(0<this.dataview.filters.length)if(!this.virtualmode&&void 0!=c.bounddata.dataindex)for(f in this.selectedcells){if(f==e+c.bounddata.dataindex+"_"+b){d=!0;break}}else for(f in this.selectedcells){if(f==
e+c.bounddata.boundindex+"_"+b){d=!0;break}}else for(f in this.selectedcells)if(f==e+c.bounddata.boundindex==this.selectedrowindex){d=!0;break}return d},_isrowselected:function(a,c){var b=!1,d=0;this.virtualmode&&this.pageable&&this.groupable&&0<this.groups.length&&(d=this.dataview.pagesize*this.dataview.pagenum);if(this.groupable&&0<this.groups.length&&this.pageable){d=this.getrowboundindexbyid(c.bounddata.uid);if(void 0==d||-1==d)return!1;-1!=this.selectedrowindexes.indexOf(d)&&(b=!0);b||(b=d==
this.selectedrowindex&&-1!=this.selectedrowindex);return b}a&&null!=c.bounddata&&("singlerow"!=this.selectionmode?0<this.dataview.filters.length?this.virtualmode||void 0==c.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(d+c.bounddata.boundindex)&&(b=!0):-1!=this.selectedrowindexes.indexOf(d+c.bounddata.dataindex)&&(b=!0):-1!=this.selectedrowindexes.indexOf(d+c.bounddata.boundindex)&&(b=!0):0<this.dataview.filters.length?this.virtualmode||void 0==c.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(d+
c.bounddata.boundindex)&&(b=!0):-1!=this.selectedrowindexes.indexOf(d+c.bounddata.dataindex)&&(b=!0):d+c.bounddata.boundindex==this.selectedrowindex&&(b=!0));return b},_rendervisualcell:function(a,c,b,d,g,f,k,h,l,n,m,q){var p=this.columns.records[n];if(p.hidden)m=h.cells[n],m.innerHTML="";else{cellvalue=this._getcellvalue(p,l);m=h.cells[n];-1!=this.selectionmode.indexOf("cell")&&(b=0<this.dataview.filters.length?this.selectedcells[l.bounddata.dataindex+"_"+p.datafield]?!0:!1:this.selectedcells[l.boundindex+
"_"+p.datafield]?!0:!1,this.editcell&&this.editcell.row===l.boundindex&&this.editcell.column===p.datafield&&"checkbox"!==p.columntype&&(b=!1),this.virtualmode||this.groupable&&0<this.groups.length&&this.pageable)&&(b=this._iscellselected(!0,l,p.datafield));if(""!=p.cellclassname&&p.cellclassname)if("string"==typeof p.cellclassname)c+=" "+p.cellclassname;else{var t=p.cellclassname(this.getboundindex(l),p.datafield,cellvalue,l.bounddata);t&&(c+=" "+t)}(t=this.showsortcolumnbackground&&this.sortcolumn&&
p.displayfield==this.sortcolumn)&&(c+=" "+this.toTP("jqx-grid-cell-sort"));p.filter&&this.showfiltercolumnbackground&&(c+=" "+this.toTP("jqx-grid-cell-filter"));if(p.pinned&&this.showpinnedcolumnbackground||p.grouped)c+=" "+this.toTP("jqx-grid-cell-pinned");if(this.altrows&&void 0==l.group){var r=l.visibleindex;r>=this.altstart&&0==(this.altstart+r)%(1+this.altstep)&&(c=t?c+(" "+this.toTP("jqx-grid-cell-sort-alt")):c+(" "+this.toTP("jqx-grid-cell-alt")),p.filter&&this.showfiltercolumnbackground&&
(c+=" "+this.toTP("jqx-grid-cell-filter-alt")),p.pinned&&this.showpinnedcolumnbackground&&(c+=" "+this.toTP("jqx-grid-cell-pinned-alt")))}if(n<=k){if(f||this.rowdetails||this.pageable&&this.virtualmode)t=e(m),r=this.columns.records[n].width,m.style.width!=parseInt(r)+"px"&&t.width(r)}else(f||this.rowdetails)&&this._hiddencolumns&&(t=e(m),r=this.columns.records[n].width,parseInt(m.style.width)!=r&&t.width(r));if(this.rowdetails&&d&&(g&&!f?c+=" "+this.toTP("jqx-grid-details-cell"):f&&(c+=" "+this.toTP("jqx-grid-group-details-cell")),
this.showrowdetailscolumn))if(!this.rtl){if(void 0==l.group&&n==k){a=this.toThemeProperty("jqx-icon-arrow-down");g?c+=" "+this.toTP("jqx-grid-group-expand"):(c+=" "+this.toTP("jqx-grid-group-collapse"),a=this.toThemeProperty("jqx-icon-arrow-right"));c+=" "+a;m.title="";m.innerHTML="";m.className!=c&&(m.className=c);return}}else if(void 0==l.group&&n==h.cells.length-k-1){a=this.toThemeProperty("jqx-icon-arrow-down");g?c+=" "+this.toTP("jqx-grid-group-expand-rtl"):(c+=" "+this.toTP("jqx-grid-group-collapse-rtl"),
a=this.toThemeProperty("jqx-icon-arrow-left"));c+=" "+a;m.title="";m.innerHTML="";m.className!=c&&(m.className=c);return}b&&n>=k&&(c+=" "+this.toTP("jqx-grid-cell-selected"),c+=" "+this.toTP("jqx-fill-state-pressed"));m.className!=c&&(m.className=c);void 0!=l.group?(cellvalue="",m.title="",m.innerHTML=""):a(this,p,l,cellvalue,m,q)}},_rendercell:function(a,c,b,d,g,f){var k=d+"_"+c.visibleindex;if("number"==c.columntype||null!=c.cellsrenderer)k=b.uniqueid+"_"+c.visibleindex;"number"==c.columntype&&
(d=b.visibleindex);if(a.editcell&&void 0==a.editrow)if("selectedrow"==a.editmode&&c.editable&&a.editable){if(a.editcell.row==a.getboundindex(b)&&a._showcelleditor){a.hScrollInstance.isScrolling()||a.vScrollInstance.isScrolling()?a._showcelleditor(a.editcell.row,c,g,!1,!1):a._showcelleditor(a.editcell.row,c,g,a.editcell.init);return}}else if(a.editcell.row==a.getboundindex(b)&&a.editcell.column==c.datafield&&(a.editcell.element=g,a.editcell.editing&&a._showcelleditor)){a.hScrollInstance.isScrolling()||
a.vScrollInstance.isScrolling()?a._showcelleditor(a.editcell.row,c,a.editcell.element,a.editcell.init,!1):a._showcelleditor(a.editcell.row,c,a.editcell.element,a.editcell.init);return}var h=a._defaultcellsrenderer(d,c),l=a._cellscache[k];if(l){if("checkbox"==c.columntype){if(a.host.jqxCheckBox){""===d&&(d=null);k=0==g.innerHTML.toString().length;!g.checkbox||a.groupable||k?a._rendercheckboxcell(a,g,c,b,d):(g.checkboxrow=a.getboundindex(b),""==d&&(d=!1),"1"==d&&(d=!0),"0"==d&&(d=!1),1==d&&(d=!0),0==
d&&(d=!1),"true"==d&&(d=!0),"false"==d&&(d=!1),null!=d||c.threestatecheckbox||(d=!1),c.checkboxcolumn&&(d=!1,0<a.dataview.filters.length&&!a.virtualmode&&void 0!=b.bounddata.dataindex?-1!=a.selectedrowindexes.indexOf(b.bounddata.dataindex)&&(d=!0):-1!=a.selectedrowindexes.indexOf(b.bounddata.boundindex)&&(d=!0)),a.disabled||(g.checkboxinstance?g.checkboxinstance._setState(d):g.checkbox.jqxCheckBox("_setState",d)));null!=c.cellsrenderer&&(a=c.cellsrenderer(a.getboundindex(b),c.datafield,d,h,c.getcolumnproperties(),
b.bounddata),void 0!=a&&(g.innerHTML=a));return}}else if("button"==c.columntype&&a.host.jqxButton){""==d&&(d=!1);null!=c.cellsrenderer&&(d=c.cellsrenderer(a.getboundindex(b),c.datafield,d,h,c.getcolumnproperties(),b.bounddata));""==g.innerHTML&&(g.buttonrow=a.getboundindex(b),g.button=null,a._renderbuttoncell(a,g,c,b,d));g.button&&!a.groupable?(g.buttonrow=a.getboundindex(b),g.button.val(d)):a._renderbuttoncell(a,g,c,b,d);return}if(c.createwidget)if(""==g.innerHTML&&(g.widgetrow=a.getboundindex(b),
g.widget=null,a._renderwidgetcell(a,g,c,b,d)),g.widget&&!a.groupable)if(g.widgetrow=a.getboundindex(b),c.initwidget)c.initwidget(a.getboundindex(b),c.datafield,d,g.firstChild);else throw Error("jqxGrid: 'initwidget' column function is not implemented. Please, implement 'initwidget'");else a._renderwidgetcell(a,g,c,b,d);else{var n=l.element;null!=c.cellsrenderer||g.childNodes&&0==g.childNodes.length||a.groupable||a.rowdetails?g.innerHTML!=n&&(g.innerHTML=n):0<=g.innerHTML.indexOf("editor")?g.innerHTML=
n:f?(d=n.indexOf(">"),h=n.indexOf("</"),h=n.substring(d+1,h),d=g.childNodes[0],0<=h.indexOf(">")?g.innerHTML=n:d.childNodes[0]?h!=d.childNodes[0].nodeValue&&(0<=h.indexOf("&")?g.innerHTML=n:d.childNodes[0].nodeValue=h):(n=document.createTextNode(h),d.appendChild(n))):g.innerHTML!=n&&(g.innerHTML=n);a.enabletooltips&&c.enabletooltips&&(g.title=l.title)}}else if("checkbox"==c.columntype)a._rendercheckboxcell(a,g,c,b,d),a._cellscache[k]={element:"",title:d},a.enabletooltips&&c.enabletooltips&&(g.title=
""+d);else if("button"==c.columntype)null!=c.cellsrenderer&&(d=c.cellsrenderer(a.getboundindex(b),c.datafield,d,h,c.getcolumnproperties(),b.bounddata)),a._renderbuttoncell(a,g,c,b,d),a._cellscache[k]={element:"",title:d},a.enabletooltips&&c.enabletooltips&&(g.title=""+d);else if("number"==c.columntype&&(d=b.visibleindex),c.createwidget)null!=c.cellsrenderer&&(d=c.cellsrenderer(a.getboundindex(b),c.datafield,d,h,c.getcolumnproperties(),b.bounddata)),a._renderwidgetcell(a,g,c,b,d),a._cellscache[k]=
{element:"",title:d},a.enabletooltips&&c.enabletooltips&&(g.title=d);else{if(null!=c.cellsrenderer){if((n=c.cellsrenderer(a.getboundindex(b),c.datafield,d,h,c.getcolumnproperties(),b.bounddata))&&(0<=n.indexOf("<jqx-")||0<=n.indexOf(" ng-"))){a.toCompile&&a.toCompile.push({cell:g,value:n,row:a.getboundindex(b)});return}}else n=h;null==n&&(n=h);l=d;a.enabletooltips&&c.enabletooltips&&(""!=c.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(d)?l=e.jqx.dataFormat.formatdate(l,c.cellsformat,a.gridlocalization):
e.jqx.dataFormat.isNumber(d)&&(l=e.jqx.dataFormat.formatnumber(l,c.cellsformat,a.gridlocalization))),g.title=l);a.WinJS?e(g).html(n):(b=g.innerHTML,0<=b.indexOf("editor")||null!=c.cellsrenderer||a.groupable||a.virtualmode?g.innerHTML=n:0<b.length?(d=n.indexOf(">"),h=n.indexOf("</"),h=n.substring(d+1,h),d=g.childNodes[0],0<=h.indexOf(">")?g.innerHTML=n:d.childNodes[0]?h!=d.childNodes[0].nodeValue&&(0<=h.indexOf("&")||0<=b.indexOf("span")?g.innerHTML=n:d.childNodes[0].nodeValue=h):(n=document.createTextNode(h),
d.appendChild(n))):b!=n&&(g.innerHTML=n));a._cellscache[k]={element:g.innerHTML,title:l};return!0}},_isIE10:function(){if(void 0==this._browser){var a=e.jqx.utilities.getBrowser();"msie"==a.browser&&9<parseInt(a.version)?this._browser=!0:(this._browser=!1,"msie"==a.browser&&(a="Browser CodeName: "+navigator.appCodeName+"",a+="Browser Name: "+navigator.appName+"",a+="Browser Version: "+navigator.appVersion+"",a+="Platform: "+navigator.platform+"",a+="User-agent header: "+navigator.userAgent+"",-1!=
a.indexOf("Zune 4.7")&&(this._browser=!0)))}return this._browser},_renderinlinecell:function(a,c,b,d,g){e(c);c.innerHTML='<div style="position: absolute;"></div>'},_rendercheckboxcell:function(a,c,b,d,g){if(a.host.jqxCheckBox){var f=e(c);""===g&&(g=b.threestatecheckbox?null:!1);null!==g||b.threestatecheckbox||(g=!1);"1"==g&&(g=!0);"0"==g&&(g=!1);1==g&&(g=!0);0==g&&(g=!1);"true"==g&&(g=!0);"false"==g&&(g=!1);if(b.checkboxcolumn){g=!1;var k=this.getboundindex(d);-1!=this.selectedrowindexes.indexOf(k)&&
(g=!0)}0==f.find(".jqx-checkbox").length?(c.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>',e(c.firstChild).jqxCheckBox({disabled:a.disabled,_canFocus:!1,hasInput:!1,hasThreeStates:b.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,locked:!0,theme:a.theme,checked:g}),this.editable&&b.editable&&e(c.firstChild).jqxCheckBox({locked:!1}),b.checkboxcolumn&&e(c.firstChild).jqxCheckBox({locked:!1}),c.checkbox=
e(c.firstChild),c.checkboxinstance=c.checkbox.data().jqxCheckBox.instance,c.checkboxrow=this.getboundindex(d),e.data(c.firstChild,"jqxCheckBox").instance.updated=function(d,f,g){if(a.disabled){f=g;d=a.table[0].rows.length;for(var h=a._getcolumnindex(b.datafield),k=0;k<d;k++){var l=a.table[0].rows[k].cells[h].firstChild;l&&e(l).jqxCheckBox({disabled:a.disabled})}}if(b.editable&&!a.disabled){if(d=a.table[0].rows.length,h=a._getcolumnindex(b.datafield),void 0==a.editrow)if(b.cellbeginedit&&0==b.cellbeginedit(c.checkboxrow,
b.datafield,b.columntype,!f))a.setcellvalue(c.checkboxrow,b.datafield,!f,!0);else{b.cellvaluechanging&&(k=b.cellvaluechanging(c.checkboxrow,b.datafield,b.columntype,g,f),void 0!=k&&(f=k));if("selectedrow"!==a.editmode)for(k=0;k<d;k++)(l=a.table[0].rows[k].cells[h].firstChild)&&e(l).jqxCheckBox("destroy");a.editcell&&0==a.editcell.validated?a.setcellvalue(c.checkboxrow,b.datafield,!f,!0):"selectedrow"!==a.editmode||null==a.editcell?(d=a.getrowdata(c.checkboxrow),a._raiseEvent(17,{rowindex:c.checkboxrow,
row:d,datafield:b.datafield,value:g,columntype:b.columntype}),a.setcellvalue(c.checkboxrow,b.datafield,f,!0),a._raiseEvent(18,{rowindex:c.checkboxrow,row:d,datafield:b.datafield,oldvalue:g,value:f,columntype:b.columntype})):a.setcellvalue(c.checkboxrow,b.datafield,f,!1,!1);b.cellendedit&&b.cellendedit(c.checkboxrow,b.datafield,b.columntype,f)}}else b.checkboxcolumn&&(a.editcell&&a.endcelledit(a.editcell.row,a.editcell.column,!1,!0),a.disabled||(f?a.selectrow(c.checkboxrow):a.unselectrow(c.checkboxrow),
a.autosavestate&&a.savestate&&a.savestate()))}):(c.checkboxrow=this.getboundindex(d),e(c.firstChild).jqxCheckBox("_setState",g,!(this.editable&&b.editable)&&!b.checkboxcolumn))}},_renderwidgetcell:function(a,c,b,d,g){0==e(c).find(".jqx-grid-widget").length?(c.innerHTML='<div class="jqx-grid-widget" style="opacity: 0.99; position: absolute; width: 100%; height:100%; top: 0%; left: 0%; padding: 0px;"></div>',b.createwidget(d,b.datafield,g,c.firstChild),e(c.firstChild).attr("hideFocus","true"),e(c.firstChild).children().addClass("jqx-grid-widget"),
c.widget=e(c.firstChild),c.widgetrow=a.getboundindex(d)):(b.initwidget(a.getboundindex(d),b.datafield,g,c.firstChild),c.widgetrow=a.getboundindex(d),e(c.firstChild).val(g))},_renderbuttoncell:function(a,c,b,d,g){if(a.host.jqxButton){var f=e(c);""==g&&(g=!1);0==f.find(".jqx-button").length?(c.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',e(c.firstChild).val(g),e(c.firstChild).attr("hideFocus","true"),
e(c.firstChild).jqxButton({disabled:a.disabled,theme:a.theme,height:a.rowsheight-4,width:b.width-4}),c.button=e(c.firstChild),c.buttonrow=a.getboundindex(d),this.isTouchDevice()?(d=e.jqx.mobile.getTouchEventName("touchend"),a.addHandler(e(c.firstChild),d,function(a){b.buttonclick&&b.buttonclick(c.buttonrow,a)})):a.addHandler(e(c.firstChild),"click",function(a){b.buttonclick&&b.buttonclick(c.buttonrow,a)})):(c.buttonrow=a.getboundindex(d),e(c.firstChild).val(g))}},_clearvisualrow:function(a,c,b,d,
g){var f=this.toTP("jqx-grid-cell");c&&(f=" "+this.toTP("jqx-grid-group-cell"));f+=" "+this.toTP("jqx-grid-cleared-cell");c=this.table[0].rows;for(var k=0;k<d+g;k++)if(c[b]){var h=c[b].cells[k];h.className!=f&&(h.className=f);var l=this.columns.records[k];this._horizontalvalue==a||l.pinned||1!=this.oldhscroll||(h.style.marginLeft=-a+"px");var n=l.width;n<l.minwidth&&(n=l.minwidth);n>l.maxwidth&&(n=l.maxwidth);parseInt(h.style.width)!=n&&("auto"!=n?e(h)[0].style.width=n+"px":e(h)[0].style.width=n);
""!=h.title&&(h.title="");""!=h.innerHTML&&(h.innerHTML="")}c[b]&&parseInt(c[b].style.height)!=this.rowsheight&&(c[b].style.height=parseInt(this.rowsheight)+"px")},_findgroupstate:function(a){a=this._findgroup(a);return null==a?!1:a.expanded},_findgroup:function(a){return this.expandedgroups[a]?this.expandedgroups[a]:null},_clearcaches:function(){this._columnsbydatafield=[];this._pagescache=[];this._pageviews=[];this._cellscache=[];this.heights=[];this.hiddens=[];this.hiddenboundrows=[];this.heightboundrows=
[];this.detailboundrows=[];this.details=[];this.expandedgroups=[];this._rowdetailscache=[];this._rowdetailselementscache=[];e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache();this.tableheight=null},_getColumnText:function(a){void 0==this._columnsbydatafield&&(this._columnsbydatafield=[]);if(this._columnsbydatafield[a])return this._columnsbydatafield[a];var c=a,b=null;e.each(this.columns.records,function(){if(this.datafield==a||this.displayfield==a)return c=this.text,b=this,!1});this._columnsbydatafield[a]=
{label:c,column:b};return this._columnsbydatafield[a]},_getcolumnbydatafield:function(a){void 0==this.__columnsbydatafield&&(this.__columnsbydatafield=[]);if(this.__columnsbydatafield[a])return this.__columnsbydatafield[a];var c=null;e.each(this.columns.records,function(){if(this.datafield==a||this.displayfield==a)return c=this,!1});this.__columnsbydatafield[a]=c;return this.__columnsbydatafield[a]},isscrollingvertically:function(){return this.vScrollBar.jqxScrollBar("isScrolling")},_renderrowdetails:function(a,
c,b,d,g,f){if(void 0!=c){var k=e(c);f=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&0<this.groups.length)for(var h=0;h<=g;h++){var l=e(c.cells[h]);l[0].innerHTML="";l[0].className="jqx-grid-details-cell"}l=e(c.cells[0]);if("none"==l[0].style.display){l=c.cells[0];for(h=2;void 0!=l&&"none"==l.style.display&&10>h;)l=c.cells[0+h-1],h++;l=e(l)}if(this.rtl)for(;d<g;d++)c.cells[d].innerHTML="",c.cells[d].className=
"jqx-grid-details-cell";l.css("width","100%");k.height(b.rowdetailsheight);l[0].className=a;a=this.getboundindex(b);g=a+"_";this._rowdetailscache[g]?(c=this._rowdetailscache[g].html,this.initrowdetails?this._rowdetailscache[g].element&&(c=this._rowdetailscache[g].element,l=l.coord(),d=this.gridcontent.coord(),b=parseInt(l.top)-parseInt(d.top),l=parseInt(l.left)-parseInt(d.left),this.rtl&&(l=0),e(c).css("top",b),e(c).css("left",l),e(c).css("display","block"),e(c).width(this.host.width()-f),this.layoutrowdetails&&
this.layoutrowdetails(a,c,this.element,this.getrowdata(a))):l[0].innerHTML=c):(l[0].innerHTML="",this.enablerowdetailsindent||(f=0),d='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+f+'px;">'+b.rowdetails+"</div>",this.rtl&&(d='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+f+'px;">'+b.rowdetails+"</div>"),this._rowdetailscache[g]=
{id:c.id,html:d},this.initrowdetails?(c=e(d)[0],e(this.gridcontent).prepend(e(c)),e(c).css("position","absolute"),e(c).width(this.host.width()-f),e(c).height(l.height()),l.coord(),e(c).css("z-index",9999),this.isTouchDevice()&&e(c).css("z-index",99999),e(c).addClass(this.toThemeProperty("jqx-widget-content")),l=l.coord(),d=this.gridcontent.coord(),b=parseInt(l.top)-parseInt(d.top),l=parseInt(l.left)-parseInt(d.left),e(c).css("top",b),e(c).css("left",l),this.content[0].scrollTop=0,this.content[0].scrollLeft=
0,f=e(e(c).children()[0]),""!=f[0].id&&(f[0].id+=a),this.initrowdetails(a,c,this.element,this.getrowdata(a)),this._rowdetailscache[g].element=c,this._rowdetailselementscache[a]=c):l[0].innerHTML=d)}},_escapeHtml:function(a){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return"string"===typeof a?a.replace(/[&<>"']/g,function(a){return c[a]}):a},_defaultcellsrenderer:function(a,c){""!=c.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(a)?a=e.jqx.dataFormat.formatdate(a,
c.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(a)&&(a=e.jqx.dataFormat.formatnumber(a,c.cellsformat,this.gridlocalization)));a=this._escapeHtml(a);var b="6px";28!=this.rowsheight&&(b=this.rowsheight/2-this._cellheight/2,0>b&&(b=4),b+="px");if(this.enableellipsis){if("center"==c.cellsalign||"middle"==c.cellsalign)return'<div class="jqx-grid-cell-middle-align" style="margin-top: '+b+';">'+a+"</div>";if("left"==c.cellsalign)return'<div class="jqx-grid-cell-left-align" style="margin-top: '+
b+';">'+a+"</div>";if("right"==c.cellsalign)return'<div class="jqx-grid-cell-right-align" style="margin-top: '+b+';">'+a+"</div>"}return"center"==c.cellsalign||"middle"==c.cellsalign?'<div style="text-align: center; margin-top: '+b+';">'+a+"</div>":'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+b+"; float: "+c.cellsalign+';">'+a+"</span>"},getcelltext:function(a,c){if(null==a||null==c)return null;var b=this.getcellvalue(a,c),d=this.getcolumn(c);d&&""!=d.cellsformat&&e.jqx.dataFormat&&
(e.jqx.dataFormat.isDate(b)?b=e.jqx.dataFormat.formatdate(b,d.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(b)&&(b=e.jqx.dataFormat.formatnumber(b,d.cellsformat,this.gridlocalization)));return b},getcelltextbyid:function(a,c){if(null==a||null==c)return null;var b=this.getcellvaluebyid(a,c),d=this.getcolumn(c);d&&""!=d.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(b)?b=e.jqx.dataFormat.formatdate(b,d.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(b)&&(b=e.jqx.dataFormat.formatnumber(b,
d.cellsformat,this.gridlocalization)));return b},_getcellvalue:function(a,c){var b;b=c.bounddata[a.datafield];null!=a.displayfield&&(b=c.bounddata[a.displayfield]);null==b&&(b="");return b},getcell:function(a,c){if(null==a||null==c)return null;var b=parseInt(a),d=a,e="";isNaN(b)||(d=this.getrowdata(b));null!=d&&(e=d[c]);return this._getcellresult(e,a,c)},getrenderedcell:function(a,c){if(null==a||null==c)return null;var b=parseInt(a),d=a,e="";isNaN(b)||(d=this.getrenderedrowdata(b));null!=d&&(e=d[c]);
return this._getcellresult(e,a,c)},_getcellresult:function(a,c,b){var d=this.getcolumn(b);if(null==d||void 0==d)return null;var e=d.getcolumnproperties(),d=e.hidden,f=e.width,k=e.pinned,h=e.cellsalign,e=e.cellsformat,l=this.getrowheight(c);return 0==l?null:{value:a,row:c,column:b,datafield:b,width:f,height:l,hidden:d,pinned:k,align:h,format:e}},setcellvaluebyid:function(a,c,b,d,e){a=this.getrowboundindexbyid(a);return this.setcellvalue(a,c,b,d,e)},getcellvaluebyid:function(a,c){var b=this.getrowboundindexbyid(a);
return this.getcellvalue(b,c)},setcellvalue:function(a,c,b,d,g){if(null==a||null==c)return!1;var f=parseInt(a),k=a;isNaN(f)||(k=this.getrowdata(f));var h=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(h=!0);this.virtualmode&&(this._pagescache=[]);this.sortcache&&(this.sortcache={});var l="",n="";if(null!=k&&k[c]!==b){if(null===k[c]&&""===b)return;var m=this._getcolumnbydatafield(c),q="string",p=this.source.datafields||(this.source._source?this.source._source.datafields:
null);if(p){var t="";e.each(p,function(){if(this.name==m.displayfield)return this.type&&(t=this.type),!1});t&&(q=t);n=k[m.displayfield]}l=k[c];if(!m.nullable||null!=b&&""!==b&&m.nullable&&void 0===b.label)if(e.jqx.dataFormat.isNumber(l)||"number"==q||"float"==q||"int"==q||"decimal"==q&&"date"!=q?(this.gridlocalization&&","==this.gridlocalization.decimalseparator&&b&&b.indexOf&&0<=b.indexOf(",")&&(b=b.replace(",",".")),b=new Number(b),b=parseFloat(b),isNaN(b)&&(b=0)):!e.jqx.dataFormat.isDate(l)&&"date"!=
q||""==b||(p=new Date(b),"Invalid Date"!=p&&null!=p?b=p:"Invalid Date"==p&&(b=p=new Date)),k[c]===b){this._updating||0==d||this._renderrows(this.virtualsizeinfo);return}p=this.source&&this.source._source.localdata&&"observableArray"===this.source._source.localdata.name;k[c]=b;if(p){var r=this.source._source.localdata;r._updating||(r._updating=!0,r[a][c]=b,r._updating=!1)}q=this.getrenderedrowdata(f,!0);if(!q)return;q[c]=b;null!=b&&null!=b.label&&(m=this._getcolumnbydatafield(c),k[m.displayfield]=
b.label,q[m.displayfield]=b.label,k[c]=b.value,q[c]=b.value,p&&!r._updating&&(r._updating=!0,r[a][c]=b.value,r[a][m.displayfield]=b.label,r._updating=!1));h&&void 0!=k.dataindex&&(this.dataview.cachedrecords[k.dataindex][c]=b,null!=b&&void 0!=b.label&&(this.dataview.cachedrecords[k.dataindex][c]=b.value,this.dataview.cachedrecords[k.dataindex][m.displayfield]=b.label))}else return this._updating||0==d||this._renderrows(this.virtualsizeinfo),!1;if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&
this.autokoupdates&&this.source._source._localdata){r=f;h&&void 0!=k.dataindex&&(r=k.dataindex);r=this.source._source._localdata()[r];this.source.suspendKO=!0;if(r[c]&&r[c].subscribe)if(null!=b&&null!=b.label)r[m.displayfield](b.label),r[c](b.value);else r[c](b);else{var p=this.source._source.datafields,u=null;p&&e.each(p,function(){if(this.name==c)return u=this.map,!1});if(null==u)null!=b&&null!=b.label?(r[c]=b.value,r[m.displayfield]=b.label):r[c]=b;else if(p=u.split(this.source.mapChar),0<p.length){for(var q=
r,A=0;A<p.length-1;A++)q=q[p[A]];q[p[p.length-1]]=b}this.source._source._localdata.replace(r,e.extend({},r))}this.source.suspendKO=!1}this.sortcolumn&&this.dataview.sortby&&!this._updating?(r=this.getsortinformation(),this.sortcolumn==c&&(this.dataview.clearsortdata(),this.dataview.sortby(r.sortcolumn,r.sortdirection.ascending))):this._updating||this.dataview.sortby&&this.dataview.sortcache[c]&&(this.dataview.sortcache[c]=null);this._cellscache=[];this._pagescache=[];if(this.source.updaterow&&(void 0==
g||1==g)){g=!1;var C=this.that,r=function(b){0==b&&(C.setcellvalue(a,c,l,!0,!1),l!=n&&C.setcellvalue(a,C.getcolumn(c).displayfield,n,!0,!1))};try{var v=this.getrowid(f);g=this.source.updaterow(v,k,r);void 0==g&&(g=!0)}catch(H){g=!1;C.setcellvalue(a,c,l,!0,!1);l!=n&&C.setcellvalue(a,C.getcolumn(c).displayfield,n,!0,!1);return}}f=this.vScrollInstance.value;this._updating&&1!=d&&(d=!1);if(1==d||void 0==d)if(C=this.that,d=function(){C.pageable&&C.updatepagerdetails&&(C.updatepagerdetails(),(C.autoheight||
C.autorowheight)&&C._updatepageviews())},k=this.groupable&&0<this.groups.length,h&&!k){if(this.autoheight||this.autorowheight)this.prerenderrequired=!0;this.dataview.refresh(null,{skipFilters:!0});this.rendergridcontent(!0,!1);d();this._renderrows(this.virtualsizeinfo)}else if(this.sortcolumn&&!k){if(this.autoheight||this.autorowheight)this.prerenderrequired=!0;this.dataview.reloaddata();this.rendergridcontent(!0,!1);d();this._renderrows(this.virtualsizeinfo)}else if(this.groupable&&0<this.groups.length){if(this.autoheight||
this.autorowheight)this.prerenderrequired=!0;this.pageable?-1!=this.groups.indexOf(c)?(this._pagescache=[],this._cellscache=[],this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=[],this._cellscache=[],this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)):(this._pagescache=[],this._cellscache=[],this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))}else this.dataview.updateview(),this._renderrows(this.virtualsizeinfo);this.vScrollInstance.setPosition(f);
this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates();this.showfilterrow&&this.filterable&&this.filterrow&&(h=this.getcolumn(c).filtertype,"list"!=h&&"checkedlist"!=h||this._updatelistfilters(!0));this._raiseEvent(19,{rowindex:a,datafield:c,newvalue:b,value:b,oldvalue:l});return!0},getcellvalue:function(a,c){if(null==a||null==c)return null;var b=parseInt(a),d=a;isNaN(b)||(d=this.getrowdata(b));return null!=d?d[c]:null},getrows:function(){var a=this.dataview.records.length;
if(this.virtualmode){for(var c=[],b=0;b<this.dataview.records.length;b++)(a=this.dataview.records[b])&&c.push(a);void 0===this.dataview.records.length&&e.each(this.dataview.records,function(){this&&c.push(this)});b=0;this.pageable&&(b=this.dataview.pagenum*this.dataview.pagesize);return c.length>this.source._source.totalrecords-b?c.slice(0,this.source._source.totalrecords-b):c}if(this.dataview.sortdata){c=[];for(b=0;b<a;b++){var d={},d=e.extend({},this.dataview.sortdata[b].value);c[b]=d}return c}return this.dataview.records},
getrowboundindexbyid:function(a){var c=this.dataview.recordsbyid["id"+a];if(c&&c.boundindex)return this.getboundindex(c);for(var c=this.getboundrows(),b=0;b<c.length;b++)if(c[b]&&c[b].uid==a)return b;return-1},getrowdatabyid:function(a){var c=this.dataview.recordsbyid["id"+a];if(c)return c;a=this.getrowboundindexbyid(a);return this.getboundrows()[a]},getrowdata:function(a){void 0==a&&(a=0);return this.virtualmode?this.dataview.records[a]:this.getboundrows()[a]},getrenderedrowdata:function(a,c){void 0==
a&&(a=0);if(this.virtualmode){var b=this.getrowvisibleindex(a);return b=this.dataview.loadedrecords[b]}b=this.getrowvisibleindex(a);return 0<=b?(this.groupable&&0<this.groups.length?b=this.dataview.loadedrecords[b]:(b=this.dataview.loadedrecords[b],!this.pageable||void 0!=c&&0!=c||(b=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+a])),b):null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(a){for(var c=this.getdisplayrows(),b=0;b<
c.length;b++)if(c[b])if(void 0!==c[b].dataindex){if(c[b].dataindex==a)return c[b].visibleindex}else if(c[b].boundindex==a)return c[b].visibleindex;return-1},getboundindex:function(a){var c=a.boundindex;this.groupable&&0<this.groups.length&&this.pageable&&a.bounddata&&(c=this.getrowboundindexbyid(a.bounddata.uid));0<this.dataview.filters.length&&(a.bounddata?void 0!==a.bounddata.dataindex&&(c=a.bounddata.dataindex):void 0!==a.dataindex&&(c=a.dataindex));return c},getrowboundindex:function(a){return(a=
this.getdisplayrows()[a])?void 0!==a.dataindex?a.dataindex:a.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(a){var c=this.getvisiblerows();return c?c[a]:null},getloadedrowdata:function(a){var c=this.getloadedrows();return c?c[a]:null},getvisiblerows:function(){if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){for(var a=[],c=0;c<this.dataview.pagesize;c++){var b=this.dataview.loadedrecords[c+
this.dataview.pagesize*this.dataview.pagenum];if(void 0==b)break;a.push(b)}return a}if(void 0!=this._startboundindex&&void 0!=this._endboundindex){a=[];for(c=this._startvisibleindex;c<=this._endvisibleindex;c++){b=this.dataview.loadedrecords[c];if(void 0==b)break;a.push(b)}return a}return this.dataview.loadedrecords},getrowid:function(a){void 0==a&&(a=0);if(this.virtualmode){var c=this.getrowvisibleindex(a);if(c=this.dataview.loadedrecords[c])return c.uid}else if(c=0<this.dataview.filters.length,
0<=a&&a<this.dataview.bounditems.length&&!c&&(c=this.getrowvisibleindex(a),c=this.dataview.loadedrecords[c])||0<this.dataview.filters.length&&(c=this.getboundrows()[a])&&null!=c.uid)return c.uid;return null},_updateGridData:function(a){var c=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(c=!0);c?(this.dataview.refresh(),"updaterow"==a?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&0<this.groups.length?(this.dataview.reloaddata(),
this.render()):(this._cellscache=[],this._pagescache=[],this._renderrows(this.virtualsizeinfo));this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(a,c,b){if(void 0!=a&&void 0!=c){var d=this.that,g=!1;d._datachanged=!0;var f=function(a,c,d){if(a._loading)throw Error("jqxGrid: "+a.loadingerrormessage);var f=!1;e.isArray(c)?(e.each(c,function(b,c){f=a.dataview.updaterow(this,d[b],!1)}),a._cellscache=[],a._pagescache=[],a.dataview.refresh()):f=a.dataview.updaterow(c,
d);var g=a.vScrollInstance.value;if(void 0==b||1==b)void 0!=a._updating&&0!=a._updating||a._updateGridData("updaterow");a.showaggregates&&a._updatecolumnsaggregates&&a._updatecolumnsaggregates();if(a.source&&a.source._knockoutdatasource&&!a._updateFromAdapter&&a.autokoupdates&&a.source._source._localdata){var h=a.dataview.recordsbyid["id"+c],k=a.dataview.records.indexOf(h),k=a.source._source._localdata()[k];a.source.suspendKO=!0;a.source._source._localdata.replace(k,e.extend({},h));a.source.suspendKO=
!1}a.source&&a.source._source.localdata&&"observableArray"===a.source._source.localdata.name&&!a.source._source.localdata._updating&&(a.source._source.localdata._updating=!0,c=a.getrowboundindexbyid(c),a.source._source.localdata.set(c,d),a.source._source.localdata._updating=!1);a.vScrollInstance.setPosition(g);return f};if(this.source.updaterow){var k=function(b){1==b||void 0==b?f(d,a,c):g=!1};try{g=this.source.updaterow(a,c,k),void 0==g&&(g=!0)}catch(h){g=!1}}else g=f(d,a,c);return g}return!1},deleterow:function(a,
c){if(void 0!=a){this._datachanged=!0;var b=!1,d=this.that,g=this.getrowboundindexbyid(a),f=[];if(void 0!=g&&(0<=this.selectedrowindexes.indexOf(g)&&this.selectedrowindexes.splice(this.selectedrowindexes.indexOf(g),1),this.selectedrowindex==g&&(this.selectedrowindex=-1),!this.virtualmode))if(0<=d.selectionmode.indexOf("row"))e.each(this.selectedrowindexes,function(){var a=d.getrowid(this);f.push(a)}),this.selectedrowindexes=[],this.selectedrowindex=-1;else if(0<=d.selectionmode.indexOf("cell"))for(var k in d.selectedcells){var h=
d.selectedcells[k],l=d.getrowid(h.rowindex);h.rowid=l}var n=function(a,b){if(a._loading)throw Error("jqxGrid: "+a.loadingerrormessage);var d=!1,h=a.vScrollInstance.value;e.isArray(b)?(e.each(b,function(){d=a.dataview.deleterow(this,!1)}),a._cellscache=[],a._pagescache=[],a.dataview.refresh()):d=a.dataview.deleterow(b);if(!a.virtualmode)if(0<=a.selectionmode.indexOf("row"))e.each(f,function(){var b=a.getrowboundindexbyid(this);-1!=b&&a.selectrow(b,!1)});else{var k=[],l;for(l in a.selectedcells){var n=
a.selectedcells[l],m=a.getrowboundindexbyid(n.rowid);-1!=m&&(n.rowindex=m,k[m+"_"+n.datafield]=n)}a.selectedcells=k}if(void 0==a._updating||0==a._updating)void 0!=c&&1!=c||setTimeout(function(){a._render(!0,!0,!1,!1);"visible"!=a.vScrollBar.css("visibility")&&(a._arrange(),a._updatecolumnwidths(),a._updatecellwidths(),a._renderrows(a.virtualsizeinfo))});a.source&&a.source._knockoutdatasource&&!a._updateFromAdapter&&a.autokoupdates&&a.source._source._localdata&&(a.source.suspendKO=!0,a.source._source._localdata.pop(rowdata),
a.source.suspendKO=!1);a.source&&a.source._source.localdata&&"observableArray"===a.source._source.localdata.name&&!a.source._source.localdata._updating&&(a.source._source.localdata._updating=!0,a.source._source.localdata.splice(g,1),a.source._source.localdata._updating=!1);a.dataview.sortby&&(k=a.getsortinformation(),k.sortcolumn&&(a.dataview.clearsortdata(),a.dataview.sortby(k.sortcolumn,k.sortdirection?k.sortdirection.ascending:null)));a.vScrollInstance.setPosition(h);return d};if(this.source.deleterow){k=
function(b){1!=b&&void 0!=b||n(d,a)};try{this.source.deleterow(a,k),void 0==b&&(b=!0)}catch(m){b=!1}}else b=n(d,a);return b}return!1},addrow:function(a,c,b){if(void 0!=c){this._datachanged=!0;void 0==b&&(b="last");var d=!1,g=this.that;if(null==a){var f=this.dataview.filters&&0<this.dataview.filters.length?this.dataview.cachedrecords.length:this.dataview.totalrecords;if(e.isArray(c)){var k=[];e.each(c,function(a,b){var d=g.dataview.getid(g.dataview.source.id,c[a],f+a);k.push(d)});a=k}else for(a=this.dataview.getid(this.dataview.source.id,
c,f);null!=this.dataview.recordsbyid["id"+a];)a++}var h=function(a,b,c,d){if(a._loading)throw Error("jqxGrid: "+a.loadingerrormessage);var f=a.vScrollInstance.value,g=!1;e.isArray(c)?(e.each(c,function(c,e){void 0!=this.dataindex&&delete this.dataindex;var f=null;null!=b&&null!=b[c]&&(f=b[c]);g=a.dataview.addrow(f,this,d,!1)}),a._cellscache=[],a._pagescache=[],a.dataview.refresh()):(void 0!=c&&void 0!=c.dataindex&&delete c.dataindex,g=a.dataview.addrow(b,c,d));void 0!=a._updating&&0!=a._updating||
setTimeout(function(){a._render(!0,!0,!1,!1);a.invalidate()});a.source&&a.source._knockoutdatasource&&!a._updateFromAdapter&&a.autokoupdates&&a.source._source._localdata&&(a.source.suspendKO=!0,a.source._source._localdata.push(c),a.source.suspendKO=!1);if(a.source&&a.source._source.localdata&&"observableArray"===a.source._source.localdata.name&&!a.source._source.localdata._updating){a.source._source.localdata._updating=!0;var h=a.getrowboundindexbyid(b);a.source._source.localdata.set(h,c);a.source._source.localdata._updating=
!1}"deferred"!=a.scrollmode?a.vScrollInstance.setPosition(f):a.vScrollInstance.setPosition(0);return g};if(this.source.addrow){var l=function(d,e){if(1==d||void 0==d)void 0!=e&&(a=e),h(g,a,c,b)};try{d=this.source.addrow(a,c,b,l),void 0==d&&(d=!0)}catch(n){d=!1}if(0==d)return!1}else h(this,a,c,b);return d}return!1},_findvisiblerow:function(a,c){void 0==a&&(a=parseInt(this.vScrollInstance.value));var b=0;if(void 0==c||null==c)c=this.rows.records;for(var d=c.length;b<=d;){mid=parseInt((b+d)/2);var e=
c[mid];if(void 0==e)break;if(e.top>a&&e.top+e.height>a)d=mid-1;else if(e.top<a&&e.top+e.height<a)b=mid+1;else return mid}return-1},_updatecellwidths:function(){var a=this.virtualsizeinfo;if(a){var c=this.that;if(void 0!=c.gridcontent){void 0==c.table&&(c.table=c.gridcontent.find("#contenttable"+c.element.id));var b=c.groupable&&0<c.groups.length,d=0,a=a.visiblerecords;c.pageable&&(c.autoheight||c.autorowheight)&&(a=c.dataview.pagesize,c.groupable&&(c.dataview.updateview(),a=c.dataview.rows.length));
c.groupable||c.pageable||!c.autoheight&&!c.autorowheight||(a=c.dataview.totalrecords);c.rowdetails&&(a+=c.dataview.pagesize);if(c.columns.records){for(var e=c.columns.records.length,f=c.table[0].rows,k=0;k<a;k++){var h=f[k];if(!h)break;for(var h=h.cells,l=0,n=0;n<e;n++){var m=c.columns.records[n],q=m.width,p=h[n];parseInt(p.style.left)!=l&&(p.style.left=l+"px");parseInt(p.style.width)!=q&&(p.style.width=q+"px");m.hidden&&m.hideable?p.style.display="none":l+=parseFloat(q)}0==d&&(c.table.width(parseFloat(l)+
2),d=l)}c.showaggregates&&c._updateaggregates&&c._updateaggregates();c.showfilterrow&&c.filterable&&c._updatefilterrowui&&c._updatefilterrowui();c.showeverpresentrow&&c._updateaddnewrowui();c._updatescrollbarsafterrowsprerender();b&&c._renderrows(c.virtualsizeinfo)}}}},_updatescrollbarsafterrowsprerender:function(){var a=this.that,c=a.hScrollBar[0].style.visibility,b=0,d=a.vScrollBar[0].style.visibility;"visible"==d&&(b=a.scrollbarsize+3);0==a.scrollbarsize&&(b=0);a.scrollbarautoshow&&(b=0);var e=
a.element.style.width,e=0<=e.toString().indexOf("%")?a.host.width():parseInt(e);parseInt(a.table[0].style.width)-2>e-b?("visible"!=c&&(a.autowidth||(a.hScrollBar[0].style.visibility="visible"),a._arrange()),"visible"==d?"deferred"==a.scrollmode||a.virtualmode?a._updatevscrollbarmax():a.virtualsizeinfo&&(d=a.virtualsizeinfo.virtualheight-a._gettableheight(),!isNaN(d)&&0<d&&("hidden"!=c?a.vScrollBar.jqxScrollBar("max",d+a.scrollbarsize+4):a.vScrollBar.jqxScrollBar("max",d))):b=-2,a.hScrollBar.jqxScrollBar("max",
b+a.table.width()-a.host.width())):"hidden"!=c&&(a.hScrollBar.css("visibility","hidden"),a._arrange());a._renderhorizontalscroll()},_prerenderrows:function(a){var c=this.that;if(1==c.prerenderrequired&&(c.prerenderrequired=!1,c.editable&&c._destroyeditors&&c._destroyeditors(),void 0!=c.gridcontent)){c.gridcontent.find("#contenttable"+c.element.id).remove();null!=c.table&&(c.table.remove(),c.table=null);c.table=e('<div id="contenttable'+c.element.id+'" style="overflow: hidden; position: relative;"></div>');
c.gridcontent.addClass(c.toTP("jqx-grid-content"));c.gridcontent.addClass(c.toTP("jqx-widget-content"));c.gridcontent.append(c.table);var b=c.groupable&&0<c.groups.length,d=0;c.table[0].rows=[];var g=c.toTP("jqx-grid-cell");b&&(g=" "+c.toTP("jqx-grid-group-cell"));a=a.visiblerecords;c.pageable&&(c.autoheight||c.autorowheight)&&(a=c.dataview.pagesize,c.groupable&&(c.dataview.updateview(),a=c.dataview.rows.length,a<c.dataview.pagesize&&(a=c.dataview.pagesize)));c.pageable||!c.autoheight&&!c.autorowheight||
(a=c.dataview.totalrecords);c.groupable&&0<c.groups.length&&(c.autoheight||c.autorowheight)&&!c.pageable&&(a=c.dataview.rows.length);c.rowdetails&&(a=c.autoheight||c.autorowheight?a+c.dataview.pagesize:a+a);if(c.columns.records){b=c.columns.records.length;e.jqx.browser.msie&&8<e.jqx.browser.version&&c.table.css("opacity","0.99");-1!=navigator.userAgent.indexOf("Safari")&&c.table.css("opacity","0.99");var f=e.jqx.browser.msie&&8>e.jqx.browser.version;f&&c.host.attr("hideFocus","true");var k=c.tableZIndex;
a*b>k&&(k=a*b);c.isTouchDevice();var h="";c._hiddencolumns=!1;for(var l=0;l<a;l++){var n='<div role="row" style="position: relative; height:'+c.rowsheight+'px;" id="row'+l+c.element.id+'">';f&&(n='<div role="row" style="position: relative; z-index: '+k+"; height:"+c.rowsheight+'px;" id="row'+l+c.element.id+'">',k--);for(var m=0,q=0;q<b;q++){var p=c.columns.records[q],t=p.width;t<p.minwidth&&(t=p.minwidth);t>p.maxwidth&&(t=p.maxwidth);if(c.rtl){var r='<div role="gridcell" style="left: '+m+"px; z-index: "+
(k-b+2*q)+"; width:"+t+"px;";k--}else r='<div role="gridcell" style="left: '+m+"px; z-index: "+k--+"; width:"+t+"px;";p.hidden&&p.hideable?(r+="display: none;",c._hiddencolumns=!0,k++):m+=t;r+='" class="'+g+'">';p=this._defaultcellsrenderer("",p);r+=p;r+="</div>";n+=r}0==d&&(c.table.width(parseInt(m)+2),d=m);n+="</div>";h+=n}c.WinJS?MSApp.execUnsafeLocalFunction(function(){c.table.html(h)}):c.table[0].innerHTML=h;c.table[0].rows=[];d=c.table.children();for(l=0;l<a;l++)for(f=d[l],c.table[0].rows.push(f),
f.cells=[],m=e(f).children(),q=0;q<b;q++)f.cells.push(m[q]);if(0==a){m=0;c.showemptyrow&&(n=e('<div style="position: relative;" id="row0'+c.element.id+'"></div>'),c.table.append(n),n.height(c.rowsheight),c.table[0].rows[0]=n[0],c.table[0].rows[0].cells=[]);for(q=0;q<b;q++)p=c.columns.records[q],t=p.width,c.showemptyrow&&(r=e('<div style="position: absolute; height: 100%; left: '+m+"px; z-index: "+k--+"; width:"+t+'px;" class="'+g+'"></div>'),r.height(c.rowsheight),n.append(r),c.table[0].rows[0].cells[q]=
r[0]),t<p.minwidth&&(t=p.minwidth),t>p.maxwidth&&(t=p.maxwidth),p.hidden&&p.hideable||(m+=t);c.table.width(parseInt(m)+2);d=m}c._updatescrollbarsafterrowsprerender();c.rendered&&c.rendered("rows");c.toCompile=[];c._addoverlayelement()}}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var a=null,c=null;this.tableheight=null;var b=this.that,d=!1,e=!1;null!=b.width&&-1!=b.width.toString().indexOf("px")?a=b.width:void 0==b.width||isNaN(b.width)||(a=b.width);
null!=b.width&&-1!=b.width.toString().indexOf("%")&&(a=b.width,d=!0);b.scrollbarautoshow&&(b.vScrollBar[0].style.display="none",b.hScrollBar[0].style.display="none",b.vScrollBar[0].style.zIndex=b.tableZIndex+b.headerZIndex,b.hScrollBar[0].style.zIndex=b.tableZIndex+b.headerZIndex);if(b.autowidth){for(var f=a=0;f<b.columns.records.length;f++){var k=b.columns.records[f].width;"auto"==k&&(k=b._measureElementWidth(b.columns.records[f].text));a+=k}"hidden"!=b.vScrollBar.css("visibility")&&(a+=b.scrollbarsize+
4);b.width=a}null!=b.height&&-1!=b.height.toString().indexOf("px")?c=b.height:void 0==b.height||isNaN(b.height)||(c=b.height);null!=b.height&&-1!=b.height.toString().indexOf("%")&&(c=b.height,e=!0);f=function(){var a=0,c=b.showheader?null!=b.columnsheader?b.columnsheader.height()+2:0:0,a=a+c;b.pageable&&(a+=b.pagerheight);b._groupsheader()&&(a+=b.groupsheaderheight);b.showtoolbar&&(a+=b.toolbarheight);b.showstatusbar&&(a+=b.statusbarheight);b.showeverpresentrow&&"bottom"===b.everpresentrowposition&&
(a+=b.everpresentrowheight);"visible"==b.hScrollBar[0].style.visibility&&(a+=20);return a};b.autoheight&&b.virtualsizeinfo?b.pageable&&b.gotopage?(c=0+(b._pageviews[0]?b._pageviews[0].height:0),c+=f(),b.showemptyrow&&0==b.dataview.totalrecords&&(c+=b.rowsheight)):(c=b.host.height()-b._gettableheight(),0<b._pageviews.length?(c=c+b._pageviews[b._pageviews.length-1].height+b._pageviews[b._pageviews.length-1].top,b.vScrollBar[0].style.visibility="hidden"):(c=f(),b.showemptyrow&&(c+=b.rowsheight))):b.autoheight&&
(c=b.dataview.totalrecords*b.rowsheight,b.pageable&&b.gotopage&&(c=b.pagesize*b.rowsheight),b._loading&&(c=250,b.dataloadelement.height(c)),c+=f(),1E4<c&&(c=1E4));null!=a?(a=parseInt(a),d?b.element.style.width=b.width:b.element.style.width!=parseInt(b.width)+"px"&&(b.element.style.width=parseInt(b.width)+"px"),d&&(a=b.host.width(),2>=a&&(a=600,b.host.width(a)),b._oldWidth||(b._oldWidth=a))):b.host.width(250);null!=c?(e||(c=parseInt(c)),e?b.element.style.height=b.height:b.element.style.height!=parseInt(c)+
"px"&&(b.element.style.height=parseInt(c)+"px"),e&&!b.autoheight&&(c=b.host.height(),0==c&&(c=400,b.host.height(c)),b._oldHeight||(b._oldHeight=c))):b.host.height(250);b.autoheight&&(b.tableheight=null,b._gettableheight());d=0;b.showtoolbar?(b.toolbar.width(a),b.toolbar.height(b.toolbarheight-1),b.toolbar.css("top",0),d+=b.toolbarheight,c-=parseInt(b.toolbarheight)):b.toolbar[0].style.height="0px";b.showstatusbar?(b.showaggregates?b.statusbar.width(b.table?Math.max(a,b.table.width()):a):b.statusbar.width(a),
b.statusbar.height(b.statusbarheight)):b.statusbar[0].style.height="0px";b.showeverpresentrow&&"bottom"===b.everpresentrowposition?(b.addnewrow.width(a),b.addnewrow.height(b.everpresentrowheight)):b.addnewrow[0].style.height="0px";b._groupsheader()?(b.groupsheader.width(a),b.groupsheader.height(b.groupsheaderheight),b.groupsheader.css("top",d),e=b.groupsheader.height()+1,d+=e,c>e&&(c-=parseInt(e))):(b.groupsheader[0].style.width!=a+"px"&&(b.groupsheader[0].style.width=parseInt(a)+"px"),b.groupsheader[0].style.height=
"0px",b.groupsheader[0].style.top!=d+"px"&&b.groupsheader.css("top",d),e=b.showgroupsheader&&b.groupable?b.groupsheaderheight:0,b.content[0].style.top!=d+e+"px"&&b.content.css("top",d+b.groupsheaderheight));var h=b.scrollbarsize;isNaN(h)&&(h=parseInt(h),h=isNaN(h)?"17px":h+"px");h=parseInt(h);k=2;e=0;"visible"==b.vScrollBar[0].style.visibility&&(e=h+4);"visible"==b.hScrollBar[0].style.visibility&&(k=h+4+2);0==h&&(k=e=0);f=0;b.pageable&&(f=b.pagerheight,k+=b.pagerheight);b.showstatusbar&&(k+=b.statusbarheight,
f+=b.statusbarheight);b.showeverpresentrow&&"bottom"===b.everpresentrowposition&&(k+=b.everpresentrowheight,f+=b.everpresentrowheight);b.hScrollBar[0].style.height!=h+"px"&&(b.hScrollBar[0].style.height=parseInt(h)+"px");b.hScrollBar[0].style.top==d+c-4-h-f+"px"&&"0px"==b.hScrollBar[0].style.left||b.hScrollBar.css({top:d+c-4-h-f+"px",left:"0px"});var l=b.hScrollBar[0].style.width,n=!1,m=!1;0==e?l!=a-2+"px"&&(b.hScrollBar.width(a-2),n=!0):l!=a-h-4+"px"&&(b.hScrollBar.width(a-h-4+"px"),n=!0);b.autoheight||
(b.vScrollBar[0].style.width!=h+"px"&&(b.vScrollBar.width(h),m=!0),b.vScrollBar[0].style.height!=parseInt(c)-k+"px"&&(b.vScrollBar.height(parseInt(c)-k+"px"),m=!0),b.vScrollBar[0].style.left==parseInt(a)-parseInt(h)-4+"px"&&b.vScrollBar[0].style.top==d+"px"||b.vScrollBar.css({left:parseInt(a)-parseInt(h)-4+"px",top:d}));b.rtl&&(b.vScrollBar.css({left:"0px",top:d}),"hidden"!=b.vScrollBar.css("visibility")&&b.hScrollBar.css({left:h+2}));l=b.vScrollInstance;l.disabled=b.disabled;b.autoheight||m&&l.refresh();
m=b.hScrollInstance;m.disabled=b.disabled;n&&m.refresh();b.autowidth&&(b.hScrollBar[0].style.visibility="hidden");b.statusbarheight=parseInt(b.statusbarheight);b.toolbarheight=parseInt(b.toolbarheight);n=function(a){if("visible"==a.vScrollBar[0].style.visibility&&"visible"==a.hScrollBar[0].style.visibility){a.bottomRight[0].style.visibility="visible";a.bottomRight.css({left:1+parseInt(a.vScrollBar.css("left")),top:parseInt(a.hScrollBar.css("top"))});a.rtl&&a.bottomRight.css("left","0px");a.bottomRight.width(parseInt(h)+
3);a.bottomRight.height(parseInt(h)+4);var b=a.showeverpresentrow&&"bottom"==a.everpresentrowposition?a.everpresentrowheight:0;0<b&&!a.showaggregates&&(a.bottomRight.css("z-index",99),a.bottomRight.height(parseInt(h)+4+b),a.bottomRight.css({top:parseInt(a.hScrollBar.css("top"))-b}));a.showaggregates&&(a.bottomRight.css("z-index",99),a.bottomRight.height(parseInt(h)+4+a.statusbarheight+b),a.bottomRight.css({top:parseInt(a.hScrollBar.css("top"))-a.statusbarheight-b}))}else a.bottomRight[0].style.visibility=
"hidden"};n(this);b.content[0].style.width!=a-e+"px"&&b.content.width(a-e);b.content[0].style.height!=c-k+3+"px"&&b.content.height(c-k+3);b.scrollbarautoshow&&(b.content[0].style.width!=a+"px"&&b.content.width(a),b.content[0].style.height!=c+"px"&&b.content.height(c));b.content[0].style.top!=d+"px"&&b.content.css("top",d);b.rtl&&(b.content.css("left",e),b.scrollbarautoshow&&b.content.css("left","0px"),b.table&&(k=b.table.width(),k<a-e&&b.content.css("left",a-k)));b.showstatusbar&&(b.statusbar.css("top",
d+c-b.statusbarheight-(b.pageable?b.pagerheight:0)),b.showaggregates&&("visible"==b.hScrollBar.css("visibility")&&(b.hScrollBar.css({top:d+c-4-h-f+b.statusbarheight+"px"}),b.statusbar.css("top",1+d+c-h-5-b.statusbarheight-(b.pageable?b.pagerheight:0))),n(this)),b.rtl&&("visible"!=b.hScrollBar.css("visibility")?b.statusbar.css("left",b.content.css("left")):b.statusbar.css("left","0px")));b.showeverpresentrow&&"bottom"===b.everpresentrowposition&&(b.addnewrow.css("top",d+c-(b.showstatusbar?b.statusbarheight:
0)-(b.pageable?b.pagerheight:0)-b.everpresentrowheight),b.rtl&&("visible"!=b.hScrollBar.css("visibility")?b.addnewrow.css("left",b.content.css("left")):b.addnewrow.css("left","0px")));b.pageable?(b.pager.width(a),b.pager.height(b.pagerheight),b.pager.css("top",d+c-b.pagerheight-1)):b.pager[0].style.height="0px";null!=b.table&&(d=-2,"visible"==b.vScrollBar[0].style.visibility&&(d=b.scrollbarsize+3),"visible"==b.hScrollBar[0].style.visibility&&(d=d+b.table.width()-b.host.width(),0<=d&&b.hScrollBar.jqxScrollBar("max",
d),"visible"==b.hScrollBar[0].style.visibility&&0==d&&(b.hScrollBar[0].style.visibility="hidden",b._arrange())));a!=parseInt(b.dataloadelement[0].style.width)&&(b.dataloadelement[0].style.width=b.element.style.width);c!=parseInt(b.dataloadelement[0].style.height)&&(b.dataloadelement[0].style.height=b.element.style.height);b._hostwidth=a},destroy:function(){delete e.jqx.dataFormat.datescache;delete this.gridlocalization;e.jqx.utilities.resize(this.host,null,!0);(""!=document.referrer||window.frameElement)&&
null!=window.top&&window.top!=window.self&&this.removeHandler(e(window.top.document),"mouseup.grid"+this.element.id);if(this.table&&this.table[0]){for(var a=this.table[0].rows.length,c=0;c<a;c++){for(var b=this.table[0].rows[c],d=b.cells.length,g=0;g<d;g++)e(b.cells[g]).remove(),b.cells[g]=null,delete b.cells[g];b.cells=null;b.cells&&delete b.cells;e(this.table[0].rows[c]).remove();this.table[0].rows[c]=null}try{delete this.table[0].rows}catch(f){}this.table.remove();delete this.table}if(this.columns&&
this.columns.records){for(c=0;c<this.columns.records.length;c++)a=this.columns.records[c],a.addnewrowwidget&&a.destroyeverpresentrowwidget&&a.destroyeverpresentrowwidget(a.addnewrowwidget),this._removecolumnhandlers(this.columns.records[c]),a.element&&(e(a.element).remove(),e(a.sortasc).remove(),e(a.sortdesc).remove(),e(a.filtericon).remove(),e(a.menu).remove(),a.element=null,a.uielement=null,a.sortasc=null,a.sortdesc=null,a.filtericon=null,a.menu=null,delete a.element,delete a.uielement,delete a.sortasc,
delete a.sortdesc,delete a.filtericon,delete a.menu,delete this.columnsrow[0].cells[c]);try{delete this.columnsrow[0].cells}catch(f){}delete this.columnsrow}e.removeData(document.body,"contextmenu"+this.element.id);this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel();this.editable&&this._destroyeditors&&this._destroyeditors();this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters();this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(e(document),
"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null);this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null);this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),
this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null);this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(e(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null);this.removeHandler(e(document),"selectstart."+this.element.id);this.removeHandler(e(document),"mousedown.resize"+this.element.id);
this.removeHandler(e(document),"mouseup.resize"+this.element.id);this.removeHandler(e(document),"mousemove.resize"+this.element.id);this.isTouchDevice()&&(c=e.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,a=e.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,b=e.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id,this.removeHandler(e(document),c),this.removeHandler(e(document),a),this.removeHandler(e(document),b));this.removeHandler(e(document),
"mousedown.reorder"+this.element.id);this.removeHandler(e(document),"mouseup.reorder"+this.element.id);this.removeHandler(e(document),"mousemove.reorder"+this.element.id);this.isTouchDevice()&&(c=e.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,a=e.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,b=e.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id,this.removeHandler(e(document),c),this.removeHandler(e(document),a),this.removeHandler(e(document),
b));this.removeHandler(e(window),"resize."+this.element.id);this.resizeline&&this.resizeline.remove();this.resizestartline&&this.resizestartline.remove();this.groupable&&(c="mousemove.grouping"+this.element.id,a="mousedown.grouping"+this.element.id,b="mouseup.grouping"+this.element.id,this.removeHandler(e(document),c),this.removeHandler(e(document),a),this.removeHandler(e(document),b));this.columnsreorder&&(c="mousemove.reorder"+this.element.id,a="mousedown.reorder"+this.element.id,b="mouseup.reorder"+
this.element.id,this.removeHandler(e(document),c),this.removeHandler(e(document),a),this.removeHandler(e(document),b),delete this.columnsbounds);this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll"));this._removeHandlers();this.hScrollInstance.destroy();this.vScrollInstance.destroy();this.hScrollBar.remove();this.vScrollBar.remove();this._clearcaches();delete this.hScrollInstance;delete this.vScrollInstance;delete this.visiblerows;delete this.hittestinfo;
delete this.rows;delete this.columns;delete this.columnsbydatafield;delete this.pagescache;delete this.pageviews;delete this.cellscache;delete this.heights;delete this.hiddens;delete this.hiddenboundrows;delete this.heightboundrows;delete this.detailboundrows;delete this.details;delete this.expandedgroups;delete this._rowdetailscache;delete this._rowdetailselementscache;delete this.columnsmenu;this.columnsheader&&(this.columnsheader.remove(),delete this.columnsheader);this.selectionarea&&(this.selectionarea.remove(),
delete this.selectionarea);if(this.menuitemsarray&&this.menuitemsarray.length)for(a=this.menuitemsarray.length,c=0;c<a;c++)e(this.menuitemsarray[c]).remove();delete this.menuitemsarray;this.dataview._clearcaches();this.content.removeClass();this.content.remove();this.content=null;delete this.content;this.hScrollBar=this.vScrollBar=null;delete this.hScrollBar;delete this.hScrollBar;this.gridcontent&&(this.gridcontent.remove(),delete this.gridcontent);this.gridmenu&&(this.gridmenu=null,delete this.gridmenu);
delete this._mousemovefunc;delete this._mousewheelfunc;this.dataview.destroy();delete this.dataview;this.bottomRight.remove();delete this.bottomRight;this.wrapper.remove();delete this.wrapper;this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv);this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput);this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto);this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows);this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),
delete this.pagerfirstbutton);this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton);this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons);this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails);this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput);this.pager.remove();delete this.pager;this.groupsheader.remove();delete this.groupsheader;this.dataloadelement.remove();delete this.dataloadelement;this.toolbar.remove();
delete this.toolbar;this.statusbar.remove();delete this.statusbar;this.host.removeData();this.host.removeClass();this.host.remove();this.host=null;delete this.host;delete this.element;delete this.set;delete this.get;delete this.that;delete this.call},_initializeColumns:function(){var a=this.source?this.source.datafields:null;null==a&&this.source&&this.source._source&&(a=this.source._source.datafields);var c=a?0<a.length:!1;if(this.autogeneratecolumns){var b=[];if(a)e.each(a,function(){b.push({datafield:this.name,
text:this.text||this.name,cellsformat:this.format||""})});else if(0<this.source.records.length)for(obj in a=this.source.records[0],a)"uid"!=obj&&(a={width:100,datafield:obj,text:obj},b.push(a));this.columns=b}if(this.columns&&this.columns.records)for(a=0;a<this.columns.records.length;a++)this._removecolumnhandlers(this.columns.records[a]);var d=this.that,g=new e.jqx.collection(this.element),f=0;this._haspinned=!1;this._columns?this.columns=this._columns:this._columns=this.columns;this.groupable&&
e.each(this.groups,function(a){a=new D(d,this);a.visibleindex=f++;a.width=d.groupindentwidth;g.add(a);a.grouped=!0;a.filterable=!1;a.sortable=!1;a.editable=!1;a.resizable=!1;a.draggable=!1});this.rowdetails&&this.showrowdetailscolumn&&(a=new D(d,this),a.visibleindex=f++,a.width=d.groupindentwidth,a.pinned=!0,a.editable=!1,a.filterable=!1,a.draggable=!1,a.groupable=!1,a.resizable=!1,g.add(a),d._haspinned=!0);"checkbox"==this.selectionmode&&(a=new D(d,null),a.visibleindex=f++,a.width=d.groupindentwidth,
a.checkboxcolumn=!0,a.editable=!1,a.columntype="checkbox",a.groupable=!1,a.draggable=!1,a.filterable=!1,a.resizable=!1,a.datafield="_checkboxcolumn",g.add(a));var k=[];e.each(this.columns,function(a){if(void 0!=d.columns[a]){var b=new D(d,this);b.visibleindex=f++;void 0!=this.dataField&&(this.datafield=this.dataField);this.pinned&&(d._haspinned=!0);!d.showeverpresentrow||"addButtonColumn"!==this.datafield&&"resetButtonColumn"!==this.datafield&&"updateButtonColumn"!==this.datafield&&"deleteButtonColumn"!==
this.datafield||(b.editable=!1,b.groupable=!1,b.draggable=!1,b.filterable=!1,b.resizable=!1,b.menu=!1);if(null==this.datafield)d.source&&d.source._source&&"array"==d.source._source.datatype&&(c||(d.source._source.datafields||(d.source._source.datafields=[]),d.source._source.datafields.push({name:a.toString()})),this.datafield=a.toString(),this.displayfield=a.toString(),b.datafield=this.datafield,b.displayfield=this.displayfield);else{if(k[this.datafield])throw Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");
k[this.datafield]=!0}g.add(b)}});this.rtl&&g.records.reverse();this.columns=g},_initializeRows:function(){var a=new e.jqx.collection(this.element);this.rows&&this.rows.clear();this.rows=a},_raiseEvent:function(a,c){void 0==c&&(c={owner:null});if(!1!==this._trigger){var b=this.events[a];this._camelCase||(b=b.toLowerCase());if((2==a||15==a)&&this.showeverpresentrow&&(0<=this.everpresentrowactions.indexOf("delete")||0<=this.everpresentrowactions.indexOf("update"))){if(this.updateeverpresentrow)var d=
this;setTimeout(function(){d.updateeverpresentrow()},50)}args=c;args.owner=this;b=new e.Event(b);b.owner=this;b.args=args;var g=this.host.trigger(b);c=b.args;return g}},wheel:function(a,c){if(c.autoheight&&"visible"!=c.hScrollBar.css("visibility"))return a.returnValue=!0;var b=0;a||(a=window.event);a.originalEvent&&a.originalEvent.wheelDelta&&(a.wheelDelta=a.originalEvent.wheelDelta);a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3);if(b){if(b=c._handleDelta(b))a.preventDefault&&a.preventDefault(),
null!=a.originalEvent&&(a.originalEvent.mouseHandled=!0),void 0!=a.stopPropagation&&a.stopPropagation();return b?(b=!1,a.returnValue=b):!1}a.preventDefault&&a.preventDefault();a.returnValue=!1},_handleDelta:function(a){if("hidden"!=this.vScrollBar.css("visibility")){var c=this.vScrollInstance.value;0>a?this.scrollDown():this.scrollUp();a=this.vScrollInstance.value;if(c!=a)return!0}else if("hidden"!=this.hScrollBar.css("visibility")&&(c=this.hScrollInstance.value,0<a?this.hScrollInstance.value>2*this.horizontalscrollbarstep?
this.hScrollInstance.setPosition(this.hScrollInstance.value-2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(this.hScrollInstance.max),a=this.hScrollInstance.value,c!=a))return!0;return!1},scrollDown:function(){if("hidden"!=this.vScrollBar.css("visibility")){var a=this.vScrollInstance;a.value+this.rowsheight<=
a.max?a.setPosition(parseInt(a.value)+this.rowsheight):a.setPosition(a.max)}},scrollUp:function(){if("hidden"!=this.vScrollBar.css("visibility")){var a=this.vScrollInstance;a.value-this.rowsheight>=a.min?a.setPosition(parseInt(a.value)-this.rowsheight):a.setPosition(a.min)}},_removeHandlers:function(){var a=this.that;a.removeHandler(e(window),"orientationchange.jqxgrid"+a.element.id);a.removeHandler(e(window),"orientationchanged.jqxgrid"+a.element.id);a.removeHandler(a.vScrollBar,"valueChanged");
a.removeHandler(a.hScrollBar,"valueChanged");a.vScrollInstance.valueChanged=null;a.hScrollInstance.valueChanged=null;var c="mousedown.jqxgrid";a.isTouchDevice()&&(c=e.jqx.mobile.getTouchEventName("touchend"));a.removeHandler(a.host,"dblclick.jqxgrid");a.removeHandler(a.host,c);a.removeHandler(a.content,"mousemove",a._mousemovefunc);a.removeHandler(a.host,"mouseleave.jqxgrid");a.removeHandler(a.content,"mouseenter");a.removeHandler(a.content,"mouseleave");a.removeHandler(a.content,"mousedown");a.removeHandler(a.content,
"scroll");a.removeHandler(a.content,"selectstart."+a.element.id);a.removeHandler(a.host,"dragstart."+a.element.id);a.removeHandler(a.host,"keydown.edit"+a.element.id);a.removeHandler(e(document),"keydown.edit"+a.element.id);a.removeHandler(e(document),"keyup.edit"+a.element.id);a._mousemovedocumentfunc&&a.removeHandler(e(document),"mousemove.selection"+a.element.id,a._mousemovedocumentfunc);a.removeHandler(e(document),"mouseup.selection"+a.element.id);a._mousewheelfunc&&a.removeHandler(a.host,"mousewheel",
a._mousewheelfunc);a.editable&&a.removeHandler(e(document),"mousedown.gridedit"+a.element.id);a.host.off&&(a.content.off("mousemove"),a.host.off("mousewheel"))},_addHandlers:function(){var a=this.that,c=a.isTouchDevice();c||a.addHandler(a.host,"dragstart."+a.element.id,function(a){return!1});a.scrollbarautoshow&&(a.addHandler(a.host,"mouseenter.gridscroll"+a.element.id,function(b){a.vScrollBar.fadeIn("fast");a.hScrollBar.fadeIn("fast")}),a.addHandler(a.host,"mouseleave.gridscroll"+a.element.id,function(b){a.vScrollInstance.isScrolling()||
a.hScrollInstance.isScrolling()||(a.vScrollBar.fadeOut("fast"),a.hScrollBar.fadeOut("fast"))}));a.editable&&a.addHandler(e(document),"mousedown.gridedit"+a.element.id,function(b){if(a.editable&&a.begincelledit&&a.editcell&&!a.vScrollInstance.isScrolling()&&!a.vScrollInstance.isScrolling()){var c=a.host.coord(),d=a.host.width(),e=a.host.height(),h=!1,l=!1;if(b.pageY<c.top||b.pageY>c.top+e)l=h=!0;if(b.pageX<c.left||b.pageX>c.left+d)h=!0;if(h){if(a.editcell&&a.editcell.editor)switch(a.editcell.columntype){case "datetimeinput":if(a.editcell.editor.jqxDateTimeInput&&
a.editcell.editor.jqxDateTimeInput("container")&&"block"==a.editcell.editor.jqxDateTimeInput("container")[0].style.display)if(c=a.editcell.editor.jqxDateTimeInput("container").coord().top,d=a.editcell.editor.jqxDateTimeInput("container").coord().top+a.editcell.editor.jqxDateTimeInput("container").height(),l&&(b.pageY<c||b.pageY>d))a.editcell.editor.jqxDateTimeInput("close");else return;break;case "combobox":if(a.editcell.editor.jqxComboBox&&a.editcell.editor.jqxComboBox("container")&&"block"==a.editcell.editor.jqxComboBox("container")[0].style.display)if(c=
a.editcell.editor.jqxComboBox("container").coord().top,d=a.editcell.editor.jqxComboBox("container").coord().top+a.editcell.editor.jqxComboBox("container").height(),l&&(b.pageY<c||b.pageY>d))a.editcell.editor.jqxComboBox("close");else return;break;case "dropdownlist":if(a.editcell.editor.jqxDropDownList&&a.editcell.editor.jqxDropDownList("container")&&"block"==a.editcell.editor.jqxDropDownList("container")[0].style.display)if(c=a.editcell.editor.jqxDropDownList("container").coord().top,d=a.editcell.editor.jqxDropDownList("container").coord().top+
a.editcell.editor.jqxDropDownList("container").height(),l&&(b.pageY<c||b.pageY>d))a.editcell.editor.jqxDropDownList("close");else return;break;case "template":case "custom":for(c=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],d=0;d<c.length;d++){e=c[d];h=a.editcell.editor.data();if(h[e]&&h[e].instance.container&&"block"==h[e].instance.container[0].style.display){var e=h[e].instance,h=e.container.coord().top,n=e.container.coord().top+e.container.height();l&&(b.pageY<h||b.pageY>
n)?(e.close(),e=!0):e=!1}else e=void 0;if(0==e)return}}a.endcelledit(a.editcell.row,a.editcell.column,!1,!0);a._oldselectedcell=null}}});a.vScrollInstance.valueChanged=function(b){a.virtualsizeinfo&&(a._closemenu(),a._renderrows(a.virtualsizeinfo),a.currentScrollValue=b.currentValue,a.pageable||a.groupable||!a.dataview.virtualmode||(a.loadondemandupdate&&clearTimeout(a.loadondemandupdate),a.loadondemandupdate=setTimeout(function(){a.loadondemand=!0;a._renderrows(a.virtualsizeinfo)},100)),c&&(a._lastScroll=
new Date))};a.hScrollInstance.valueChanged=function(b){if(a.virtualsizeinfo){a._closemenu();var d=function(){a._renderhorizontalscroll();a._renderrows(a.virtualsizeinfo);a.editcell&&!a.editrow&&a._showcelleditor&&a.editcell.editing&&(a.hScrollInstance.isScrolling()||a._showcelleditor(a.editcell.row,a.getcolumn(a.editcell.column),a.editcell.element,a.editcell.init))};c?d():(void 0==a._browser&&a._isIE10(),navigator&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?
(a._hScrollTimer&&clearTimeout(a._hScrollTimer),a._hScrollTimer=setTimeout(function(){d()},1)):e.jqx.browser.msie?(a._hScrollTimer&&clearTimeout(a._hScrollTimer),a._hScrollTimer=setTimeout(function(){d()},.01)):d());c&&(a._lastScroll=new Date)}};a._mousewheelfunc=a._mousewheelfunc||function(b){if(!a.editcell&&a.enablemousewheel)return a.wheel(b,a),!1};a.removeHandler(a.host,"mousewheel",a._mousewheelfunc);a.addHandler(a.host,"mousewheel",a._mousewheelfunc);var b="mousedown.jqxgrid";c&&(b=e.jqx.mobile.getTouchEventName("touchend"));
a.addHandler(a.host,b,function(b){if(a.isTouchDevice()&&(a._newScroll=new Date,500>a._newScroll-a._lastScroll||e(b.target).ischildof(a.vScrollBar)||e(b.target).ischildof(a.hScrollBar)))return!1;a._mousedown=new Date;var c=a._handlemousedown(b,a);a.isNestedGrid&&(a.resizablecolumn||a.columnsreorder||b.stopPropagation());a._lastmousedown=new Date;return c});c||(a.addHandler(a.host,"dblclick.jqxgrid",function(b){a.editable&&a.begincelledit&&"dblclick"==a.editmode?a._handledblclick(b,a):e.jqx.browser.msie&&
9>e.jqx.browser.version&&a._handlemousedown(b,a);a.mousecaptured=!1;a._lastmousedown=new Date;return!0}),a._mousemovefunc=function(b){if(a._handlemousemove)return a._handlemousemove(b,a)},a.addHandler(a.content,"mousemove",a._mousemovefunc),a._handlemousemoveselection&&(a._mousemovedocumentfunc=function(b){if(a._handlemousemoveselection)return a._handlemousemoveselection(b,a)},a.addHandler(e(document),"mousemove.selection"+a.element.id,a._mousemovedocumentfunc)),a.addHandler(e(document),"mouseup.selection"+
a.element.id,function(b){a._handlemouseupselection&&a._handlemouseupselection(b,a)}));try{""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||(b=null,window.parent&&document.referrer&&(b=document.referrer),b&&-1!=b.indexOf(document.location.host)&&a.addHandler(e(window.top.document),"mouseup.grid"+a.element.id,function(b){if(a._handlemouseupselection)try{a._handlemouseupselection(b,a)}catch(g){}}))}catch(d){}a.focused=!1;c||(a.addHandler(a.content,"mouseenter",
function(b){a.focused=!0;a.wrapper&&(a.wrapper.attr("tabindex",1),a.content.attr("tabindex",2));a._overlayElement&&(a.vScrollInstance.isScrolling()||a.hScrollInstance.isScrolling()?a._overlayElement[0].style.visibility="visible":a._overlayElement[0].style.visibility="hidden")}),a.addHandler(a.content,"mouseleave",function(b){a._handlemousemove&&a.enablehover&&a._clearhoverstyle();a._overlayElement&&(a._overlayElement[0].style.visibility="hidden");a.focused=!1}),(a.groupable||a.columnsreorder)&&a.addHandler(e(document),
"selectstart."+a.element.id,function(b){if(!0===a.__drag)return!1}),a.addHandler(a.content,"selectstart."+a.element.id,function(b){if(a.enablebrowserselection||a.showfilterrow&&e(b.target).ischildof(a.filterrow)||a.showeverpresentrow&&(e(b.target).ischildof(a.addnewrow)||a.addnewrowtop&&e(b.target).ischildof(a.addnewrowtop))||b.target.className&&0<=b.target.className.indexOf("jqx-grid-widget"))return!0;if(!a.editcell)return!1;b.stopPropagation&&b.stopPropagation()}),a.addHandler(e(document),"keyup.edit"+
a.element.id,function(b){a._keydown=!1}),a.addHandler(e(document),"keydown.edit"+a.element.id,function(b){a._keydown=!a.editcell;var c=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(a.handlekeyboardnavigation&&(a.focused||b.target===a.element||e(b.target).ischildof(a.host))&&1==a.handlekeyboardnavigation(b))return!1;a.editable&&a.editcell&&(13==c||27==c||9==c)&&a._handleeditkeydown&&(d=a._handleeditkeydown(b,a));27==c&&(a.mousecaptured=!1,"visible"==a.selectionarea.css("visibility")&&a.selectionarea.css("visibility",
"hidden"));if(e.jqx.browser.msie&&12>e.jqx.browser.version&&a.focused&&!a.isNestedGrid){if(13==c&&0==d)return d;var d=!0;!a.editcell&&a.editable&&"programmatic"!=a.editmode&&a._handleeditkeydown&&(d=a._handleeditkeydown(b,a));if(d&&a.keyboardnavigation&&a._handlekeydown)return d=a._handlekeydown(b,a),d||(b.preventDefault&&b.preventDefault(),void 0!=b.stopPropagation&&b.stopPropagation()),d}return!0}),a.addHandler(a.host,"keydown.edit"+a.element.id,function(b){var c=!0;if(a.handlekeyboardnavigation&&
1==a.handlekeyboardnavigation(b))return!1;a.editable&&"programmatic"!=a.editmode&&a._handleeditkeydown&&(c=a._handleeditkeydown(b,a),a.isNestedGrid&&b.stopPropagation());e.jqx.browser.msie&&8>e.jqx.browser.version?a.isNestedGrid&&c&&a.keyboardnavigation&&a._handlekeydown&&(c=a._handlekeydown(b,a),b.stopPropagation()):c&&a.keyboardnavigation&&a._handlekeydown&&(c=a._handlekeydown(b,a),a.isNestedGrid&&b.stopPropagation());c||(b.preventDefault&&b.preventDefault(),void 0!=b.stopPropagation&&b.stopPropagation());
return c}))},_hittestrow:function(a,c){if(null!=this.vScrollInstance&&null!=this.hScrollInstance){void 0==c&&0==c;var b=this.hScrollInstance,d=this.vScrollInstance.value;"visible"!=this.vScrollBar.css("visibility")&&(d=0);b=b.value;"visible"!=this.hScrollBar.css("visibility")&&(b=0);"deferred"==this.scrollmode&&null!=this._newmax&&d>this._newmax&&(d=this._newmax);var g=parseInt(d)+c;parseInt(b);if(null!=this.visiblerows&&0!=this.visiblerows.length){d=!1;b=this._findvisiblerow(g,this.visiblerows);
if(0<=b){var f=this.visiblerows[b],g=!f.rowdetailshidden;if(this.rowdetails&&f.rowdetails){var k=this.visiblerows[b-1];k==f&&(f=k,b--);g&&(g=e(this.hittestinfo[b].visualrow).position().top+parseInt(this.table.css("top")),k=e(this.hittestinfo[b].visualrow).height(),c>=g&&c<=g+k||(b++,f=this.visiblerows[b],d=!0))}}return{index:b,row:f,details:d}}}},getcellatposition:function(a,c){var b=this.that,d=this.showheader?this.columnsheader.height()+2:0,g=this._groupsheader()?this.groupsheader.height():0,g=
g+(this.showtoolbar?this.toolbarheight:0),f=this.host.coord();this.hasTransform&&(f=e.jqx.utilities.getOffset(this.host));var k=a-f.left,h=c-d-f.top-g,g=this._hittestrow(k,h),d=g.row,g=this.table[0].rows[g.index];if(this.dataview&&0==this.dataview.records.length){for(var d=this.table[0].rows,l=0,f=0;f<d.length;f++){if(h>=l&&h<l+this.rowsheight){g=d[f];break}l+=this.rowsheight}d={boundindex:f}}if(null==g)return!0;h=this.hScrollInstance.value;for(f=l=0;f<g.cells.length;f++){var n=parseInt(e(this.columnsrow[0].cells[f]).css("left"));
a=n-h;b.columns.records[f].pinned&&(a=n);if(!b.columns.records[f].hidden&&a+e(this.columnsrow[0].cells[f]).width()>=k&&k>=a){l=f;break}}return null!=d?(b=this._getcolumnat(l),{row:this.getboundindex(d),column:b.datafield,value:this.getcellvalue(this.getboundindex(d),b.datafield)}):null},_handlemousedown:function(a,c){if(null==a.target||c.disabled||e(a.target).ischildof(this.columnsheader)||e(a.target).ischildof(this.hScrollBar)||e(a.target).ischildof(this.vScrollBar))return!0;var b;a.which?b=3==a.which:
a.button&&(b=2==a.button);var d;a.which?d=2==a.which:a.button&&(d=1==a.button);if(d||this.showstatusbar&&(e(a.target).ischildof(this.statusbar)||a.target==this.statusbar[0])||this.showtoolbar&&(e(a.target).ischildof(this.toolbar)||a.target==this.toolbar[0])||this.pageable&&(e(a.target).ischildof(this.pager)||a.target==this.pager[0])||!this.columnsheader||!this.editcell&&this.pageable&&e(a.target).ischildof(this.pager))return!0;d=this.showheader?this.columnsheader.height()+2:0;var g=this._groupsheader()?
this.groupsheader.height():0,g=g+(this.showtoolbar?this.toolbarheight:0),f=this.host.coord();if(this.hasTransform){var f=e.jqx.utilities.getOffset(this.host),k=this._getBodyOffset();f.left-=k.left;f.top-=k.top}var h=parseInt(a.pageX),l=parseInt(a.pageY);this.isTouchDevice()&&(k=c.getTouches(a)[0],h=parseInt(k.pageX),l=parseInt(k.pageY),1==c.touchmode&&void 0!=k._pageX&&(h=parseInt(k._pageX),l=parseInt(k._pageY)));k=h-f.left;h=l-d-f.top-g;if(this.pageable&&!this.autoheight&&this.gotopage&&(d=this.pager.coord().top-
f.top-g-d,h>d))return;if((f=this._hittestrow(k,h))&&!f.details){d=f.row;var n=f.index,l=a.target.className,m=this.table[0].rows[n];if(null==m)return c.editable&&c.begincelledit&&c.editcell&&c.endcelledit(c.editcell.row,c.editcell.column,!1,!0),!0;c.mousecaptured=!0;c.mousecaptureposition={left:a.pageX,top:a.pageY-g,clickedrow:m};var h=this.hScrollInstance,q=h.value;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(q=h.max-h.value);var p=-1,t=this.groupable?this.groups.length:0;this.rtl&&("hidden"!=
this.vScrollBar[0].style.visibility&&(q-=this.scrollbarsize+4),"hidden"==this.hScrollBar[0].style.visibility&&(q=-parseInt(this.content.css("left"))));for(var r=0;r<m.cells.length;r++)if(g=parseInt(e(this.columnsrow[0].cells[r]).css("left")),h=g-q,c.columns.records[r].pinned&&!c.rtl&&(h=g),g=this._getcolumnat(r),null==g||!g.hidden)if(g=h+e(this.columnsrow[0].cells[r]).width(),g>=k&&k>=h){p=r;c.mousecaptureposition.clickedcell=r;break}if(this.rtl&&this._haspinned)for(r=m.cells.length-1;0<=r&&c.columns.records[r].pinned;r--)if(h=
g=e(this.columnsrow[0].cells[r]).coord().left-this.host.coord().left,g=this._getcolumnat(r),null==g||!g.hidden)if(g=h+e(this.columnsrow[0].cells[r]).width(),g>=k&&k>=h){p=r;c.mousecaptureposition.clickedcell=r;break}if(null!=d&&0<=p){this._raiseEvent(1,{rowindex:this.getboundindex(d),visibleindex:d.visibleindex,row:d,group:d.group,rightclick:b,originalEvent:a});g=this._getcolumnat(p);k=this.getcellvalue(this.getboundindex(d),g.datafield);this.editable&&this.editcell&&g.datafield==this.editcell.column&&
this.getboundindex(d)==this.editcell.row&&(this.mousecaptured=!1);this._raiseEvent(8,{rowindex:this.getboundindex(d),column:g?g.getcolumnproperties():null,row:d,visibleindex:d.visibleindex,datafield:g?g.datafield:null,columnindex:p,value:k,rightclick:b,originalEvent:a});if(g.createwidget)return!0;if(this.isTouchDevice())if("checkbox"==g.columntype&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility","hidden"),this.editcell=this.getcell(n,g.datafield),
!0}else if("button"==g.columntype&&this._overlayElement)return g.buttonclick&&g.buttonclick(m.cells[p].buttonrow,a),!0;h=!1;if(null!=this._lastmousedown&&300>this._mousedown-this._lastmousedown&&this._clickedrowindex==this.getboundindex(d)&&(this._raiseEvent(22,{rowindex:this.getboundindex(d),row:d,visibleindex:d.visibleindex,group:d.group,rightclick:b,originalEvent:a}),this._clickedcolumn==g.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(d),row:d,visibleindex:d.visibleindex,column:g?
g.getcolumnproperties():null,datafield:g?g.datafield:null,columnindex:p,value:k,rightclick:b,originalEvent:a}),h=!0,this._clickedrowindex=-1,this._clickedcolumn=null,a.isPropagationStopped&&a.isPropagationStopped()))return!1;if(b)return!0;h||(this._clickedrowindex=this.getboundindex(d),this._clickedcolumn=g.datafield);b=e.jqx.utilities.getBrowser();"msie"==b.browser&&7>=parseInt(b.version)&&(0==p&&this.rowdetails&&(l="jqx-grid-group-collapse"),0<t&&p<=t&&(l="jqx-grid-group-collapse"));if(-1!=l.indexOf("jqx-grid-group-expand")||
-1!=l.indexOf("jqx-grid-group-collapse"))this.rtl?0<t&&p>m.cells.length-t-1&&this._togglegroupstate?this._togglegroupstate(d.bounddata,!0):p==m.cells.length-1-t&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(d.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):0<t&&p<t&&this._togglegroupstate?this._togglegroupstate(d.bounddata,!0):p==t&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(d.bounddata,!0),this.gridcontent[0].scrollTop=
0,this.gridcontent[0].scrollLeft=0);else if(-1!=d.boundindex){h=this.selectedrowindexes.slice(0);b=!1;if("none"!=c.selectionmode&&"checkbox"!=c.selectionmode&&this._selectrowwithmouse){"multiplecellsadvanced"!=c.selectionmode&&"multiplecellsextended"!=c.selectionmode&&"multiplerowsextended"!=c.selectionmode&&"multiplerowsadvanced"!=c.selectionmode||a.ctrlKey||a.shiftKey||a.metaKey||(c.selectedrowindexes=[],c.selectedcells=[]);var u=!1,k=this.getboundindex(d);if(c._oldselectedrow===k||"none"===c.selectionmode)u=
!0;if(-1==c.selectionmode.indexOf("cell")){if("singlerow"!=c.selectionmode||c.selectedrowindex!=k&&"singlerow"==c.selectionmode)this._applyrowselection(k,!0,!1,null,g.datafield),this._selectrowwithmouse(c,f,h,g.datafield,a.ctrlKey||a.metaKey,a.shiftKey)}else null!=g.datafield&&(this._selectrowwithmouse(c,f,h,g.datafield,a.ctrlKey||a.metaKey,a.shiftKey),a.shiftKey||this._applycellselection(k,g.datafield,!0,!1));c._oldselectedcell&&c._oldselectedcell.datafield==c.selectedcell.datafield&&c._oldselectedcell.rowindex==
c.selectedcell.rowindex&&(b=!0);c._oldselectedcell=c.selectedcell;c._oldselectedrow=k}c.autosavestate&&c.savestate&&c.savestate();if(c.editable&&c.begincelledit&&"programmatic"!=c.editmode){if(a.isPropagationStopped&&a.isPropagationStopped())return!1;"selectedrow"==c.editmode?u&&!c.editcell?"checkbox"!==g.columntype&&c.beginrowedit(this.getboundindex(d)):c.editcell&&!u&&"none"!=c.selectionmode&&c.endrowedit(c.editcell.row):(k=this.getboundindex(d),u="click"==c.editmode||b&&"selectedcell"==c.editmode,
-1==c.selectionmode.indexOf("cell")&&"dblclick"!=c.editmode&&(u=!0),u&&void 0!=d.boundindex&&g.editable&&(c.begincelledit(this.getboundindex(d),g.datafield,g.defaulteditorvalue),-1!=c.selectionmode.indexOf("cell")&&c._applycellselection(k,g.datafield,!1,!1)),-1!=c.selectionmode.indexOf("cell")&&"selectedcell"==c.editmode&&!b&&c.editcell&&c.endcelledit(c.editcell.row,c.editcell.column,!1,!0),"dblclick"!=c.editmode||b||!c.editcell||c.editcell.row==k&&g.datafield==c.editcell.column||c.endcelledit(c.editcell.row,
c.editcell.column,!1,!0))}}}return!0}},_columnPropertyChanged:function(a,c,b,d){},_rowPropertyChanged:function(a,c,b,d){},_serializeObject:function(a){if(null==a)return"";var c="";e.each(a,function(a){0<a&&(c+=", ");c+="[";a=0;for(obj in this)0<a&&(c+=", "),c+="{"+obj+":"+this[obj]+"}",a++;c+="]"});return c},isbindingcompleted:function(){return!this._loading},propertiesChangedHandler:function(a,c,b){b.width&&b.height&&2==Object.keys(b).length&&(a._updatesize(!0,!0),a._resizeWindow(),a.virtualmode&&
!a._loading?a.vScrollInstance.setPosition(0):setTimeout(function(){a._renderrows(a.virtualsizeinfo)},100))},propertyChangedHandler:function(a,c,b,d){if(void 0!=this.isInitialized&&0!=this.isInitialized&&!(a.batchUpdate&&a.batchUpdate.width&&a.batchUpdate.height&&2==Object.keys(a.batchUpdate).length))switch(c=c.toLowerCase(),c){case "editable":a.refresh();break;case "everpresentrowactionsmode":b!=d&&(a._removeaddnewrow(),a.render());break;case "everpresentrowactions":a._updateaddnewrowui();break;case "showeverpresentrow":case "everpresentrowposition":case "everpresentrowheight":b!=
d&&(a._removeaddnewrow(),a.render());break;case "rtl":a.content.css("left","");a.columns=a._columns;a._filterrowcache=[];a.vScrollBar.jqxScrollBar({rtl:d});a.hScrollBar.jqxScrollBar({rtl:d});a._initpager&&a._initpager();a._initgroupsheader&&a._initgroupsheader();a.render();break;case "enablebrowserselection":a.showfilterrow||(a.showstatusbar||a.showtoolbar||a.host.addClass("jqx-disableselect"),a.content.addClass("jqx-disableselect"));a.enablebrowserselection&&(a.content.removeClass("jqx-disableselect"),
a.host.removeClass("jqx-disableselect"));break;case "columnsheight":(30!=a.columnsheight||a.columngroups)&&a._measureElement("column");a._render(!0,!0,!0,!1,!1);break;case "rowsheight":d!=b&&(30!=a.rowsheight&&a._measureElement("cell"),a.virtualsizeinfo=null,a.rendergridcontent(!0,!1),a.refresh());break;case "scrollMode":a.vScrollInstance.thumbStep=a.rowsheight;break;case "showdefaultloadelement":a._builddataloadelement();break;case "showfiltermenuitems":case "showsortmenuitems":case "showgroupmenuitems":case "filtermode":a._initmenu();
break;case "touchmode":b!=d&&(a._removeHandlers(),a.touchDevice=null,a.vScrollBar.jqxScrollBar({touchMode:d}),a.hScrollBar.jqxScrollBar({touchMode:d}),a._updateTouchScrolling(),a._arrange(),a._updatecolumnwidths(),a._updatecellwidths(),a._addHandlers());break;case "autoshowcolumnsmenubutton":b!=d&&a._rendercolumnheaders();break;case "rendergridrows":b!=d&&a.updatebounddata();break;case "editmode":b!=d&&(a._removeHandlers(),a._addHandlers());break;case "source":a.updatebounddata();a.virtualmode&&!a._loading&&
(a.loadondemand=!0,a._renderrows(a.virtualsizeinfo));break;case "horizontalscrollbarstep":case "verticalscrollbarstep":case "horizontalscrollbarlargestep":case "verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep});this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case "closeablegroups":a._initgroupsheader&&a._initgroupsheader();break;case "showgroupsheader":b!=
d&&(a._arrange(),a._initgroupsheader&&a._initgroupsheader(),a._renderrows(a.virtualsizeinfo));break;case "theme":d!=b&&(e.jqx.utilities.setTheme(b,d,a.host),a.gridmenu&&a.gridmenu.jqxMenu({theme:d}),a.pageable&&a._updatepagertheme(),a.filterable&&a._updatefilterrowui(!0),a.showeverpresentrow&&a._updateaddnewrowui(!0));break;case "showtoolbar":case "toolbarheight":b!=d&&(a._arrange(),a.refresh());break;case "showstatusbar":b!=d&&(a.statusbar&&(d?a.statusbar.show():a.statusbar.hide()),a._arrange(),
a.refresh());break;case "statusbarheight":b!=d&&(a._arrange(),a.refresh());break;case "filterable":case "showfilterrow":b!=d&&a.render();break;case "autoshowfiltericon":case "showfiltercolumnbackground":case "showpinnedcolumnbackground":case "showsortcolumnbackground":b!=d&&a.rendergridcontent();break;case "showrowdetailscolumn":b!=d&&a.render();break;case "scrollbarsize":b!=d&&a._arrange();break;case "width":case "height":b!=d&&(a._updatesize(!0,!0),a._resizeWindow(),a.virtualmode&&!a._loading?a.vScrollInstance.setPosition(0):
setTimeout(function(){a._renderrows(a.virtualsizeinfo)},100));break;case "altrows":case "altstart":case "altstep":b!=d&&a._renderrows(a.virtualsizeinfo);break;case "groupsheaderheight":b!=d&&(a._arrange(),a._initgroupsheader&&a._initgroupsheader());break;case "pagerheight":b!=d&&a._initpager();break;case "selectedrowindex":a.selectrow(d);break;case "selectionmode":b!=d&&("none"==d&&(a.selectedrowindexes=[],a.selectedcells=[],a.selectedrowindex=-1),a._renderrows(a.virtualsizeinfo),"checkbox"==d&&a._render(!1,
!1,!0,!1,!1));break;case "showheader":d?a.columnsheader.css("display","block"):a.columnsheader.css("display","none");break;case "virtualmode":b!=d&&(a.dataview.virtualmode=a.virtualmode,a.dataview.refresh(!1),a._render(!1,!1,!1));break;case "columnsmenu":b!=d&&a.render();break;case "columngroups":a._render(!0,!0,!0,!1,!1);break;case "columns":if(a._serializeObject(a._cachedcolumns)!==a._serializeObject(d)){var g=!1;a.filterable&&b&&b.records&&e.each(b.records,function(){this.filter&&(g=!0);a.dataview.removefilter(this.displayfield,
this.filter)});a._columns=null;a._filterrowcache=[];a.render();g&&a.applyfilters();a._cachedcolumns=a.columns;a.removesort&&a.removesort()}else a[c]=b;break;case "autoheight":b!=d&&a._render(!1,!1,!0);break;case "pagermode":case "pagerbuttonscount":b!=d&&a._initpager&&(a.pagershowrowscombo&&(a.pagershowrowscombo.jqxDropDownList("destroy"),a.pagershowrowscombo=null),a.pagerrightbutton&&(a.removeHandler(a.pagerrightbutton,"mousedown"),a.removeHandler(a.pagerrightbutton,"mouseup"),a.removeHandler(a.pagerrightbutton,
"click"),a.pagerrightbutton.jqxButton("destroy"),a.pagerrightbutton=null),a.pagerleftbutton&&(a.removeHandler(a.pagerleftbutton,"mousedown"),a.removeHandler(a.pagerleftbutton,"mouseup"),a.removeHandler(a.pagerleftbutton,"click"),a.pagerleftbutton.jqxButton("destroy"),a.removeHandler(e(document),"mouseup.pagerbuttons"+a.element.id),a.pagerleftbutton=null),a.pagerdiv.remove(),a._initpager());break;case "pagesizeoptions":case "pageable":case "pagesize":if(b!=d){if(a._loading)throw Error("jqxGrid: "+
a.loadingerrormessage);if(a.host.jqxDropDownList&&a.host.jqxListBox){if(a._initpager){if("pageable"!=c&&"pagermode"!=c&&"string"==typeof d)throw b="The expected value type is: Int.","pagesize"!=c&&(b="The expected value type is: Array of Int values."),Error("Invalid Value for: "+c+". "+b);a.dataview.pageable=a.pageable;a.dataview.pagenum=0;a.dataview.pagesize=a._getpagesize();a.virtualmode&&a.updatebounddata();a.dataview.refresh(!0);a._initpager();"pagesizeoptions"==c&&null!=d&&0<d.length&&(a.pagesize=
parseInt(d[0]),a.dataview.pagesize=parseInt(d[0]),a.prerenderrequired=!0,a._requiresupdate=!0,a.dataview.pagenum=-1,a.gotopage(0))}a._render(!1,!1,!1)}else a._testmodules()}break;case "groups":a._serializeObject(b)!==a._serializeObject(d)&&(a.dataview.groups=d,a._refreshdataview(),a._render(!0,!0,!0,!1));break;case "groupable":b!=d&&(a.dataview.groupable=a.groupable,a.dataview.pagenum=0,a.dataview.refresh(!1),a._render(!1,!1,!0));break;case "renderstatusbar":null!=d&&a.renderstatusbar(a.statusbar);
break;case "rendertoolbar":null!=d&&a.rendertoolbar(a.toolbar);break;case "disabled":d?a.host.addClass(a.toThemeProperty("jqx-fill-state-disabled")):a.host.removeClass(a.toThemeProperty("jqx-fill-state-disabled")),e.jqx.aria(a,"aria-disabled",a.disabled),a.pageable&&(a.pagerrightbutton&&(a.pagerrightbutton.jqxButton({disabled:d}),a.pagerleftbutton.jqxButton({disabled:d}),a.pagershowrowscombo.jqxDropDownList({disabled:d}),a.pagergotoinput.attr("disabled",d)),a.pagerfirstbutton&&(a.pagerfirstbutton.jqxButton({disabled:d}),
a.pagerlastbutton.jqxButton({disabled:d}))),a.vScrollBar.jqxScrollBar({disabled:d}),a.hScrollBar.jqxScrollBar({disabled:d}),a.filterable&&a.showfilterrow&&a._updatefilterrowui(!0),a.showeverpresentrow&&a._updateaddnewrowui(!0)}}});e.jqx.collection=function(a){this.records=[];this.owner=a;this.updating=!1;this.beginupdate=function(){this.updating=!0};this.resumeupdate=function(){this.updating=!1};this._raiseEvent=function(a){};this.clear=function(){this.records=[]};this.replace=function(a,b){this.records[a]=
b;this.updating||this._raiseEvent({type:"replace",element:b})};this.isempty=function(a){return void 0==this.records[a]?!0:!1};this.initialize=function(a){1>a&&(a=1);this.records[a-1]=-1};this.length=function(){return this.records.length};this.indexOf=function(a){return this.records.indexOf(a)};this.add=function(a){if(null==a)return!1;this.records[this.records.length]=a;this.updating||this._raiseEvent({type:"add",element:a});return!0};this.insertAt=function(a,b){return null==a||void 0==a||null==b?
!1:0<=a?a<this.records.length?(this.records.splice(a,0,b),this.updating||this._raiseEvent({type:"insert",index:a,element:b}),!0):this.add(b):!1};this.remove=function(a){if(null==a||void 0==a)return!1;var b=this.records.indexOf(a);return-1!=b?(this.records.splice(b,1),this.updating||this._raiseEvent({type:"remove",element:a}),!0):!1};this.removeAt=function(a){if(null==a||void 0==a||0>a)return!1;if(a<this.records.length){var b=this.records[a];this.records.splice(a,1);this.updating||this._raiseEvent({type:"removeAt",
index:a,element:b});return!0}return!1};return this};e.jqx.dataview=function(){this.self=this;this.aggregates=!1;this.grid=null;this.uniqueId="id";this.records=[];this.rows=[];this.columns=[];this.groups=[];this.filters=[];this.update=this.updated=null;this.suspend=!1;this.totalrecords=this.totalrows=this.pagenum=this.pagesize=0;this.groupable=!0;this.loadedrecords=[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=[];this.virtualmode=!0;this._cachegrouppages=[];this.source=null;
this.changedrecords=[];this.rowschangecallback=null;this.that=this;this.destroy=function(){delete this.self;delete this.grid;delete this.uniqueId;delete this.records;delete this.rows;delete this.columns;delete this.groups;delete this.filters;delete this.updated;delete this.update;delete this.suspend;delete this.pagesize;delete this.pagenum;delete this.totalrows;delete this.totalrecords;delete this.groupable;delete this.loadedrecords;delete this.loadedrootgroups;delete this.loadedgroups;delete this.loadedgroupsByKey;
delete this.virtualmode;delete this._cachegrouppages;delete this.source;delete this.changedrecords;delete this.rowschangecallback;delete this.that};this.suspendupdate=function(){this.suspend=!0};this.isupdating=function(){return this.suspend};this.resumeupdate=function(a){this.suspend=!1;void 0==a&&(a=!0);this.refresh(a)};this.getrecords=function(){return this.records};this.clearrecords=function(){this.recordids=[]};this.databind=function(a,c){var b=a._source?!0:!1,d=null;this.grid&&(this.aggregates=
this.grid.showgroupaggregates);b?(d=a,a=a._source):d=new e.jqx.dataAdapter(a,{autoBind:!1});var g=function(b){b.totalrecords=d.totalrecords;if(b.virtualmode){var c={startindex:b.pagenum*b.pagesize,endindex:b.pagenum*b.pagesize+b.pagesize};void 0!=a.recordstartindex&&(c.startindex=parseInt(a.recordstartindex));void 0!=a.recordendindex?c.endindex=parseInt(a.recordendindex):b.grid.pageable||(c.endindex=c.startindex+100,b.grid.autoheight&&(c.endindex=c.startindex+b.totalrecords));a.recordendindex||(b.grid.pageable?
c={startindex:b.pagenum*b.pagesize,endindex:b.pagenum*b.pagesize+b.pagesize}:(c.endindex=c.startindex+100,b.grid.autoheight&&(c.endindex=c.startindex+b.totalrecords)));c.data=d.records;if(b.grid.rendergridrows&&0<b.totalrecords){var f=0;a.records=b.grid.rendergridrows(c);a.records.length&&(f=a.records.length);if(a.records&&!a.records[c.startindex]){var g=[],h=c.startindex;e.each(a.records,function(){g[h]=this;h++;f++});a.records=g}0==f&&a.records&&e.each(a.records,function(){f++});if(0<f&&f<c.endindex-
c.startindex&&!b.grid.groupable)for(var k=a.records[0],l=0;l<c.endindex-c.startindex-f;l++){var m={};for(obj in k)m[obj]="";a.records.push&&a.records.push(m)}}a.records&&0!=b.totalrecords||(a.records=[]);b.originaldata=a.records;b.records=a.records;b.cachedrecords=a.records}else b.originaldata=d.originaldata,b.records=d.records,b.recordids=d.recordids,b.cachedrecords=d.cachedrecords};d.recordids=[];d.records=[];d.cachedrecords=[];d.originaldata=[];d._options.virtualmode=this.virtualmode;d._options.totalrecords=
this.totalrecords;d._options.originaldata=this.originaldata;d._options.recordids=this.recordids;d._options.cachedrecords=[];d._options.pagenum=this.pagenum;d._options.pageable=this.pageable;void 0!=a.type&&(d._options.type=a.type);void 0!=a.formatdata&&(d._options.formatData=a.formatdata);void 0!=a.contenttype&&(d._options.contentType=a.contenttype);void 0!=a.async&&(d._options.async=a.async);void 0!=a.updaterow&&(d._options.updaterow=a.updaterow);void 0!=a.addrow&&(d._options.addrow=a.addrow);void 0!=
a.deleterow&&(d._options.deleterow=a.deleterow);0==this.pagesize&&(this.pagesize=10);d._options.pagesize=this.pagesize;this.source=a;void 0!==c&&(uniqueId=c);var f=this.that;switch(a.datatype){default:null==a.localdata&&(a.localdata=[]);null!=a.localdata&&(d.unbindBindingUpdate(f.grid.element.id),(!f.grid.autobind&&f.grid.isInitialized||f.grid.autobind)&&d.dataBind(),b=function(b){if(void 0!=b&&""!=b){if(d._changedrecords[0]){var c=[];e.each(d._changedrecords,function(a){var e=this.index,g=this.record;
f.grid._updateFromAdapter=!0;switch(b){case "update":e=f.grid.getrowid(e);a==d._changedrecords.length-1?f.grid.updaterow(e,g):f.grid.updaterow(e,g,!1);f.grid._updateFromAdapter=!1;break;case "add":f.grid.addrow(null,g);f.grid._updateFromAdapter=!1;break;case "remove":e=f.grid.getrowid(e),c.push(e)}});0<c.length&&(f.grid.deleterow(c,!1),f.grid._updateFromAdapter=!1)}if("update"==b)return}var h=f.totalrecords;g(f,b);null===a.localdata.notifier&&"observableArray"==a.localdata.name&&(a.localdata.notifier=
function(b){if(!this._updating){this._updating=!0;var c=f.grid.getrowid(b.index);switch(b.type){case "add":var g=e.extend({},b.object[b.index]),c=d.getid(a.id,g,b.index);0===b.index?f.grid.addrow(c,g,"first"):f.grid.addrow(c,g);break;case "delete":f.grid.deleterow(c);break;case "update":b.path&&1<b.path.split(".").length?(g=b.path.split("."),f.grid.setcellvalue(b.index,g[g.length-1],b.newValue)):(g=e.extend({},b.object[b.index]),f.grid.updaterow(c,g))}this._updating=!1}});"updateData"==b?(f.refresh(),
f.grid._updateGridData()):(a.recordstartindex&&this.virtualmode?f.updateview(a.recordstartindex,a.recordstartindex+f.pagesize):f.refresh(),f.update(h!=f.totalrecords))},b(),d.bindBindingUpdate(f.grid.element.id,b));break;case "json":case "jsonp":case "xml":case "xhtml":case "script":case "text":case "csv":case "tab":if(null!=a.localdata)d.unbindBindingUpdate(f.grid.element.id),(!f.grid.autobind&&f.grid.isInitialized||f.grid.autobind)&&d.dataBind(),b=function(b){var c=f.totalrecords;g(f);"updateData"==
b?(f.refresh(),f.grid._updateGridData()):(a.recordstartindex&&f.virtualmode?f.updateview(a.recordstartindex,a.recordstartindex+f.pagesize):f.refresh(),f.update(c!=f.totalrecords))},b(),d.bindBindingUpdate(f.grid.element.id,b);else{for(var k=[],h=0,b={},l=0;l<this.filters.length;l++){var n=this.filters[l].datafield,m=this.filters[l].filter;if(m.getfilters){var q=m.getfilters();b[n+"operator"]=m.operator;for(m=0;m<q.length;m++){q[m].datafield=n;var p=q[m].value;if("datefilter"==q[m].type)if(q[m].value&&
q[m].value.toLocaleString){var t=this.grid.getcolumn(q[m].datafield);t&&t.cellsformat?(t=this.grid.source.formatDate(q[m].value,t.cellsformat,this.grid.gridlocalization),b["filtervalue"+h]=t?t:q[m].value.toLocaleString()):b["filtervalue"+h]=p.toString()}else b["filtervalue"+h]=p.toString();else b["filtervalue"+h]=p.toString(),q[m].data&&(b["filterid"+h]=q[m].data.toString()),q[m].id&&(b["filterid"+h]=q[m].id.toString());b["filtercondition"+h]=q[m].condition;b["filteroperator"+h]=q[m].operator;b["filterdatafield"+
h]=n;t={label:p.toString()};q[m].data&&(t.value=q[m].data.toString());t.value=q[m].id?q[m].id.toString():p.toString();t.condition=q[m].condition;t.operator=0==q[m].operator?"and":"or";t.field=n;t.type=q[m].type;p=!1;if(0<k.length)for(var r=0;r<k.length;r++){var u=k[r];if(u.field==n){u.filters.push(t);p=!0;break}}p||(k.push({field:n,filters:[]}),k[k.length-1].filters.push(t));h++}}}b.filterGroups=k;b.filterscount=h;b.groupscount=f.groups.length;for(l=0;l<f.groups.length;l++)b["group"+l]=f.groups[l];
void 0==a.recordstartindex&&(a.recordstartindex=0);if(void 0==a.recordendindex||0==a.recordendindex)f.grid.height&&-1==f.grid.height.toString().indexOf("%")?(a.recordendindex=parseInt(f.grid.height)/f.grid.rowsheight,a.recordendindex+=2):a.recordendindex=e(window).height()/f.grid.rowsheight,a.recordendindex=parseInt(a.recordendindex),this.pageable&&(a.recordendindex=this.pagesize);this.pageable&&(a.recordstartindex=this.pagenum*this.pagesize,a.recordendindex=(this.pagenum+1)*this.pagesize);e.extend(b,
{sortdatafield:f.sortfield,sortorder:f.sortfielddirection,pagenum:f.pagenum,pagesize:f.grid.pagesize,recordstartindex:a.recordstartindex,recordendindex:a.recordendindex});(k=d._options.data)?e.extend(d._options.data,b):(a.data&&e.extend(b,a.data),d._options.data=b);b=function(){var b=function(){var b=f.totalrecords;g(f);a.recordstartindex&&f.virtualmode?f.updateview(a.recordstartindex,a.recordstartindex+f.pagesize):f.refresh();f.update(b!=f.totalrecords)};if(e.jqx.browser.msie&&9>e.jqx.browser.version)try{b()}catch(C){}else b()};
d.unbindDownloadComplete(f.grid.element.id);d.bindDownloadComplete(f.grid.element.id,b);!f.grid.autobind&&f.grid.isInitialized||f.grid.autobind?d.dataBind():f.grid.isInitialized||f.grid.autobind||b();d._options.data=k}}};this.getid=function(a,c,b){return 0<e(a,c).length?e(a,c).text():a&&0<a.toString().length&&(a=e(c).attr(a),null!=a&&0<a.toString().length)?a:b};this.getvaluebytype=function(a,c){var b=a;if("date"==c.type){var d=new Date(a);a="NaN"==d.toString()||"Invalid Date"==d.toString()?e.jqx.dataFormat?
e.jqx.dataFormat.tryparsedate(a):d:d;null==a&&(a=b)}else"float"==c.type?(a=parseFloat(a),isNaN(a)&&(a=b)):"int"==c.type?(a=parseInt(a),isNaN(a)&&(a=b)):"bool"==c.type&&(null!=a&&("false"==a.toLowerCase()?a=!1:"true"==a.toLowerCase()&&(a=!0)),a=1==a?!0:0==a?!1:"");return a};this.setpaging=function(a){void 0!=a.pageSize&&(this.pagesize=a.pageSize);void 0!=a.pageNum&&(this.pagenum=Math.min(a.pageNum,Math.ceil(this.totalrows/this.pagesize)));this.refresh()};this.getpagingdetails=function(){return{pageSize:this.pagesize,
pageNum:this.pagenum,totalrows:this.totalrows}};this._clearcaches=function(){this.sortcache={};this.sortdata=null;this.changedrecords=[];this.records=[];this.rows=[];this.cacheddata=[];this.originaldata=[];this.bounditems=[];this.loadedrecords=[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=[];this._cachegrouppages=[];this.recordsbyid=[];this.cachedrecords=[];this.recordids=[]};this.addfilter=function(a,c){for(var b=-1,d=0;d<this.filters.length;d++)if(this.filters[d].datafield==
a){b=d;break}-1==b?this.filters[this.filters.length]={filter:c,datafield:a}:this.filters[b]={filter:c,datafield:a}};this.removefilter=function(a){for(var c=0;c<this.filters.length;c++)if(this.filters[c].datafield==a){this.filters.splice(c,1);break}};this.getItemFromIndex=function(a){return this.records[a]};this.updaterow=function(a,c,b){if(!(this.filters&&0<this.filters.length&&!this.virtualmode||void 0==c)&&void 0!=a){c.uid=a;c[this.source.id]||(c[this.source.id]=c.uid);var d=this.recordsbyid["id"+
a],e=this.records.indexOf(d);if(-1==e)return!1;this.records[e]=c;this.cachedrecords&&(this.cachedrecords[e]=c);1!=b&&void 0!=b||this.refresh();this.changedrecords[c.uid]={Type:"Update",OldData:d,Data:c};return!0}if(this.filters&&0<this.filters.length){for(var f=this.cachedrecords,d=null,e=-1,k=0;k<f.length;k++)if(f[k].uid==a){d=f[k];e=k;break}if(d){a=this.that;for(var h in c)a.cachedrecords[e][h]=c[h];1!=b&&void 0!=b||this.refresh();return!0}}return!1};this.addrow=function(a,c,b,d){if(void 0!=c){e.isEmptyObject(c)&&
this.source&&this.source.datafields&&e.each(this.source.datafields,function(){var a="";"number"==this.type&&(a=null);"date"==this.type&&(a=null);if("bool"==this.type||"boolean"==this.type)a=!1;c[this.name]=a});if(!a||this.recordsbyid["id"+a])for(c.uid=this.getid(this.source.id,c,this.totalrecords),a=this.recordsbyid["id"+c.uid];null!=a;)a=Math.floor(1E4*Math.random()).toString(),c.uid=a,a=this.recordsbyid["id"+a];else c.uid=a;c[this.source.id]||void 0==this.source.id||(c[this.source.id]=c.uid);this.addSkipFilterRowId(this.source.id?
c[this.source.id]:c.uid);"last"==b?this.records.push(c):"number"===typeof b&&isFinite(b)?this.records.splice(b,0,c):this.records.splice(0,0,c);this.filters&&0<this.filters.length&&("last"==b?this.cachedrecords.push(c):"number"===typeof b&&isFinite(b)?this.cachedrecords.splice(b,0,c):this.cachedrecords.splice(0,0,c));this.totalrecords++;this.virtualmode&&(this.source.totalrecords=this.totalrecords);1!=d&&void 0!=d||this.refresh(null,{skipFilters:!0});this.changedrecords[c.uid]={Type:"New",Data:c};
return!0}return!1};this.deleterow=function(a,c){if(void 0!=a){var b=this.filters&&0<this.filters.length;if(this.recordsbyid["id"+a]&&!b){var b=this.recordsbyid["id"+a],d=this.records.indexOf(b);this.changedrecords[a]={Type:"Delete",Data:this.records[d]};this.records.splice(d,1);this.totalrecords--;this.virtualmode&&(this.source.totalrecords=this.totalrecords);1!=c&&void 0!=c||this.refresh();return!0}if(this.filters&&0<this.filters.length){for(var e=this.cachedrecords,b=null,d=-1,f=0;f<e.length;f++)if(e[f].uid==
a){b=e[f];d=f;break}if(b){this.cachedrecords.splice(d,1);if(1==c||void 0==c)this.totalrecords=0,this.records=this.cachedrecords,this.removeSkipFilterRowId(a),this.refresh(null,{skipFilters:!0});return!0}}}return!1};this.reload=function(a,c,b,d,g,f,k){var h=this.that;g=[];var l=c.length,n=0;this.columns=[];this.bounditems=[];this.loadedrecords=[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=[];this._cachegrouppages=[];this.recordsbyid={};0==this.totalrecords&&(Object.size=function(a){var b=
0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b},this.totalrecords=Object.size(a),e.each(this.records,function(a){var b=0;e.each(this,function(a,c){h.columns[b++]=a});return!1}));if(this.virtualmode){if(this.pageable){this.updateview();return}f=0;if(this.groupable)k=this.totalrecords;else{this.updateview();return}}else f=0,k=this.totalrecords;if(this.groupable&&0<this.groups.length&&this.loadgrouprecords)var m=f,m=this.loadgrouprecords(0,f,k,b,0,d,c,l,g);else n=this.loadflatrecords(f,k,b,0,d,c,l,
g);0<l&&c.splice(0,l-0);this.totalrows=0<this.groups.length&&this.groupable?m:n;return g};this.loadflatrecords=function(a,c,b,d,g,f,k,h){var l=this.that,n=b=a;c=Math.min(c,this.totalrecords);for(var m=null!=this.sortdata,q=m?this.sortdata:this.records;a<c;a++){var p={};m?(p=e.extend({},q[a].value),id=p[l.uniqueId],p.boundindex=q[a].index,void 0==p.uid&&(p.uid=l.getid(l.source.id,p,p.boundindex)),l.recordsbyid["id"+p.uid]=q[a].value,l.loadedrecords[b]=p,p.uniqueid=l.generatekey(),l.bounditems[p.boundindex]=
p):(p=Object(q[a]),id=p[l.uniqueId],p.boundindex=b,l.loadedrecords[b]=p,void 0==p.uid&&(p.uid=l.getid(l.source.id,p,b)),l.recordsbyid["id"+p.uid]=q[a],p.uniqueid=l.generatekey(),l.bounditems[this.bounditems.length]=p);if(d>=k||id!=f[d][l.uniqueId]||g&&g[id])h[h.length]=d;f[d]=p;d++;p.visibleindex=n;n++;b++}if(l.grid.summaryrows){var t=b;e.each(l.grid.summaryrows,function(){var a=e.extend({},this);a.boundindex=c++;l.loadedrecords[t]=a;a.uniqueid=l.generatekey();l.bounditems[l.bounditems.length]=a;
f[d]=a;d++;a.visibleindex=n;n++;t++})}return n};this.updateview=function(a,c){var b=this.that,d=this.pagesize*this.pagenum,e=0,f=[],k=this.filters,h=this.updated,l=f.length;if(this.pageable){if(this.virtualmode)if(!this.groupable||0==this.groups.length)this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),k,e,h,f,l,[]),this.totalrows=f.length;else if(this.groupable&&0<this.groups.length&&this.loadgrouprecords){if(void 0!=this._cachegrouppages[this.pagenum+"_"+this.pagesize]){this.rows=
this._cachegrouppages[this.pagenum+"_"+this.pagesize];this.totalrows=this.rows.length;return}b=this.pagesize*(1+this.pagenum);b>this.totalrecords&&(b=this.totalrecords);this.loadgrouprecords(0,this.pagesize*this.pagenum,b,k,e,h,f,l,[]);this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows;this.totalrows=this.rows.length;return}}else if(this.virtualmode&&(!this.groupable||0==this.groups.length)){var n=this.pagesize;0==n&&(n=Math.min(100,this.totalrecords));null!=a&&null!=c?this.loadflatrecords(a,
c,k,e,h,f,l,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),k,e,h,f,l,[]);this.totalrows=this.loadedrecords.length;this.rows=f;if(f.length>=n)return}if(this.groupable&&this.pageable&&0<this.groups.length&&this._updategroupsinpage)f=this._updategroupsinpage(b,k,d,e,l,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(k=this.pagesize*this.pagenum;k<this.pagesize*(1+this.pagenum);k++)if(h=k<this.loadedrecords.length?this.loadedrecords[k]:null,null!=
h){if(!this.pagesize||d>=this.pagesize*this.pagenum&&d<=this.pagesize*(this.pagenum+1))f[e]=h,e++;d++}if((0==f.length||f.length<this.pagesize)&&!this.pageable&&this.virtualmode)for(d=e=f.length,k=this.pagesize*this.pagenum;k<this.pagesize*(1+this.pagenum)-d;k++)h={},h.boundindex=k+d,h.visibleindex=k+d,h.uniqueid=b.generatekey(),h.empty=!0,b.bounditems[k+d]=h,f[e]=h,e++;this.rows=f};this.generatekey=function(){var a=function(){return 16*(1+Math.random())|0};return""+a()+a()+"-"+a()+"-"+a()+"-"+a()+
"-"+a()+a()+a()};this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)};this.skipFilterOnThisRow=function(a){this.skipFilterRowIds=this.skipFilterRowIds||{};return this.skipFilterRowIds.hasOwnProperty(a)};this.addSkipFilterRowId=function(a){this.skipFilterRowIds=this.skipFilterRowIds||{};this.skipFilterRowIds[a]=a};this.removeSkipFilterRowId=function(a){this.skipFilterRowIds&&this.skipFilterRowIds.hasOwnProperty(a)&&delete this.skipFilterRowIds[a]};this.refresh=
function(a,c){if(!this.suspend){void 0==a&&(a=!0);c=c||{};var b=this.rows.length,d=this.totalrows;if(0<this.filters.length&&!this.virtualmode){var g,f=this.cachedrecords.length,k=[];this.totalrecords=0;var h=this.cachedrecords;this._dataIndexToBoundIndex=[];var l=this.filters.length;if(null!=this.source&&void 0!=this.source.filter&&void 0!=this.source.localdata)k=this.source.filter(this.filters,h,f),void 0==k&&(k=[]),this.records=k;else if(null==this.source.filter||void 0==this.source.filter){c.skipFilters||
(this.skipFilterRowIds={});for(var n=0;n<f;n++){var m=h[n],q=void 0,p=this.source.id?m[this.source.id]:m.uid;if(c.skipFilters)q=this.skipFilterOnThisRow(p);else for(var t=0;t<l;t++)if((g=this.filters[t].filter)&&g.evaluate&&"function"==typeof g.evaluate)var r=g.evaluate(m[this.filters[t].datafield]),q=void 0==q?r:"or"==g.operator?q||r:q&&r;q?(c.skipFilters||this.addSkipFilterRowId(p),k[k.length]=e.extend({dataindex:n},m),this._dataIndexToBoundIndex[n]={boundindex:k.length-1}):this._dataIndexToBoundIndex[n]=
null}this.records=k}if(this.sortdata&&(g=this.sortfield,this.sortcache[g])){this.sortdata=null;b=this.sortcache[g].direction;this.sortcache[g]=null;this.sortby(this.sortfield,b);return}}else if(0==this.filters.length&&!this.virtualmode&&this.cachedrecords&&(this.totalrecords=0,this.records=h=this.cachedrecords,this.sortdata&&(g=this.sortfield,this.sortcache[g]))){this.sortdata=null;b=this.sortcache[g].direction;this.sortcache[g]=null;this.sortby(this.sortfield,b);return}g=this.reload(this.records,
this.rows,this.filter,this.updated,a);this.updated=null;null!=this.rowschangecallback&&(d!=totalrows&&this.rowschangecallback({type:"PagingChanged",data:getpagingdetails()}),b!=rows.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:b,current:rows.length}}),(0<g.length||b!=rows.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:b,current:rows.length,diff:g}}))}};return this}})(jqxBaseFramework);
